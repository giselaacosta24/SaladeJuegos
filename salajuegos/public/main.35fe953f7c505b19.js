(self.webpackChunksalajuegos=self.webpackChunksalajuegos||[]).push([[179],{2011:(gt,Me,U)=>{"use strict";U.d(Me,{Dh:()=>me,GT:()=>we,cc:()=>Oe,hO:()=>Je,on:()=>z,pX:()=>oe,xv:()=>ge});var m=U(5e3),te=U(127),V=U(5813);gt=U.hmd(gt);const ce=["ngOnDestroy"],oe=(Ae,rt,et,Pe={})=>new Proxy(Ae,{get:(Te,Se)=>et.runOutsideAngular(()=>{var Ye;if(Ae[Se])return(null===(Ye=null==Pe?void 0:Pe.spy)||void 0===Ye?void 0:Ye.get)&&Pe.spy.get(Se,Ae[Se]),Ae[Se];if(ce.indexOf(Se)>-1)return()=>{};const Z=rt.toPromise().then(ae=>{const X=ae&&ae[Se];return"function"==typeof X?X.bind(ae):X&&X.then?X.then(ue=>et.run(()=>ue)):et.run(()=>X)});return new Proxy(()=>{},{get:(ae,X)=>Z[X],apply:(ae,X,ue)=>Z.then(he=>{var re;const Be=he&&he(...ue);return(null===(re=null==Pe?void 0:Pe.spy)||void 0===re?void 0:re.apply)&&Pe.spy.apply(Se,ue,Be),Be})})})}),we=(Ae,rt)=>{rt.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Pe=>{Object.defineProperty(Ae.prototype,Pe,Object.getOwnPropertyDescriptor(et.prototype||et,Pe))})})};class de{constructor(rt){return rt}}const me=new m.OlP("angularfire2.app.options"),ge=new m.OlP("angularfire2.app.name");function z(Ae,rt,et){const Te="object"==typeof et&&et||{};Te.name=Te.name||"string"==typeof et&&et||"[DEFAULT]";const Ye=te.Z.apps.filter(Z=>Z&&Z.name===Te.name)[0]||rt.runOutsideAngular(()=>te.Z.initializeApp(Ae,Te));try{JSON.stringify(Ae)!==JSON.stringify(Ye.options)&&K("error",`${Ye.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Z){}return new de(Ye)}const K=(Ae,...rt)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ae](...rt)},ie={provide:de,useFactory:z,deps:[me,m.R0b,[new m.FiY,ge]]};let Je=(()=>{class Ae{constructor(et){te.Z.registerVersion("angularfire",V.q4.full,"core"),te.Z.registerVersion("angularfire",V.q4.full,"app-compat"),te.Z.registerVersion("angular",m.q4F.full,et.toString())}static initializeApp(et,Pe){return{ngModule:Ae,providers:[{provide:me,useValue:et},{provide:ge,useValue:Pe}]}}}return Ae.\u0275fac=function(et){return new(et||Ae)(m.LFG(m.Lbi))},Ae.\u0275mod=m.oAB({type:Ae}),Ae.\u0275inj=m.cJS({providers:[ie]}),Ae})();function Oe(Ae,rt,et,Pe,Te){const[,Se,Ye]=globalThis.\u0275AngularfireInstanceCache.find(Z=>Z[0]===Ae)||[];if(Se)return function He(Ae,rt){try{return Ae.toString()===rt.toString()}catch(et){return Ae===rt}}(Te,Ye)||(ve("error",`${rt} was already initialized on the ${et} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:Te,was:Ye})),Se;{const Z=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Z,Te]),Z}}const qe=!!gt.hot,ve=(Ae,...rt)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ae](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,Me,U)=>{"use strict";U.d(Me,{q4:()=>gc,iC:()=>wc,fc:()=>nr,HU:()=>Tu,vb:()=>Ed,JM:()=>Lo});var m=U(5e3),te=U(5867),V=U(5861),ce=U(9681),oe=U(2090),we=U(4859),de=U(1877);const me="@firebase/installations",K="w:0.5.7",ie="FIS_v2",Ae=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(T){return T instanceof oe.ZR&&T.code.includes("request-failed")}function et({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Pe(T){return{token:T.token,requestStatus:2,expiresIn:ue(T.expiresIn),creationTime:Date.now()}}function Te(T,S){return Se.apply(this,arguments)}function Se(){return(Se=(0,V.Z)(function*(T,S){const j=(yield S.json()).error;return Ae.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ye({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Z(T,{refreshToken:S}){const N=Ye(T);return N.append("Authorization",function he(T){return`${ie} ${T}`}(S)),N}function ae(T){return X.apply(this,arguments)}function X(){return(X=(0,V.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function ue(T){return Number(T.replace("s","000"))}function re(T,S){return Be.apply(this,arguments)}function Be(){return(Be=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:N}){const j=et(T),ne=Ye(T),le=S.getImmediate({optional:!0});if(le){const Pt=yield le.getHeartbeatsHeader();Pt&&ne.append("x-firebase-client",Pt)}const Ve={method:"POST",headers:ne,body:JSON.stringify({fid:N,authVersion:ie,appId:T.appId,sdkVersion:K})},it=yield ae(()=>fetch(j,Ve));if(it.ok){const Pt=yield it.json();return{fid:Pt.fid||N,registrationStatus:2,refreshToken:Pt.refreshToken,authToken:Pe(Pt.authToken)}}throw yield Te("Create Installation",it)})).apply(this,arguments)}function fe(T){return new Promise(S=>{setTimeout(S,T)})}const on=/^[cdef][\w-]{21}$/;function dt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function at(T){return function Dt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return on.test(N)?N:""}catch(T){return""}}function tn(T){return`${T.appName}!${T.appId}`}const fn=new Map;function ur(T,S){const N=tn(T);an(N,S),function $t(T,S){const N=function jr(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=T=>{an(T.data.key,T.data.fid)}),Qn}();N&&N.postMessage({key:T,fid:S}),function xi(){0===fn.size&&Qn&&(Qn.close(),Qn=null)}()}(N,S)}function an(T,S){const N=fn.get(T);if(N)for(const j of N)j(S)}let Qn=null;const kr="firebase-installations-store";let Nr=null;function bn(){return Nr||(Nr=(0,oe.X3)("firebase-installations-database",1,(T,S)=>{0===S&&T.createObjectStore(kr)})),Nr}function ot(T,S){return $r.apply(this,arguments)}function $r(){return($r=(0,V.Z)(function*(T,S){const N=tn(T),ne=(yield bn()).transaction(kr,"readwrite"),le=ne.objectStore(kr),Le=yield le.get(N);return yield le.put(S,N),yield ne.complete,(!Le||Le.fid!==S.fid)&&ur(T,S.fid),S})).apply(this,arguments)}function dn(T){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,V.Z)(function*(T){const S=tn(T),j=(yield bn()).transaction(kr,"readwrite");yield j.objectStore(kr).delete(S),yield j.complete})).apply(this,arguments)}function Gr(T,S){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,V.Z)(function*(T,S){const N=tn(T),ne=(yield bn()).transaction(kr,"readwrite"),le=ne.objectStore(kr),Le=yield le.get(N),Ve=S(Le);return void 0===Ve?yield le.delete(N):yield le.put(Ve,N),yield ne.complete,Ve&&(!Le||Le.fid!==Ve.fid)&&ur(T,Ve.fid),Ve})).apply(this,arguments)}function ft(T){return mn.apply(this,arguments)}function mn(){return(mn=(0,V.Z)(function*(T){let S;const N=yield Gr(T.appConfig,j=>{const ne=dr(j),le=Mi(T,ne);return S=le.registrationPromise,le.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function dr(T){return Xt(T||{fid:dt(),registrationStatus:0})}function Mi(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Ae.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function bt(T,S){return Qe.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Tt(T)}:{installationEntry:S}}function Qe(){return(Qe=(0,V.Z)(function*(T,S){try{const N=yield re(T,S);return ot(T.appConfig,N)}catch(N){throw rt(N)&&409===N.customData.serverCode?yield dn(T.appConfig):yield ot(T.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Tt(T){return jn.apply(this,arguments)}function jn(){return(jn=(0,V.Z)(function*(T){let S=yield xn(T.appConfig);for(;1===S.registrationStatus;)yield fe(100),S=yield xn(T.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:j}=yield ft(T);return j||N}return S})).apply(this,arguments)}function xn(T){return Gr(T,S=>{if(!S)throw Ae.create("installation-not-found");return Xt(S)})}function Xt(T){return function bs(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function hr(T,S){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},N){const j=vt(T,N),ne=Z(T,N),le=S.getImmediate({optional:!0});if(le){const Pt=yield le.getHeartbeatsHeader();Pt&&ne.append("x-firebase-client",Pt)}const Ve={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:K,appId:T.appId}})},it=yield ae(()=>fetch(j,Ve));if(it.ok)return Pe(yield it.json());throw yield Te("Generate Auth Token",it)})).apply(this,arguments)}function vt(T,{fid:S}){return`${et(T)}/${S}/authTokens:generate`}function fr(T){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,V.Z)(function*(T,S=!1){let N;const j=yield Gr(T.appConfig,le=>{if(!Rt(le))throw Ae.create("not-registered");const Le=le.authToken;if(!S&&W(Le))return le;if(1===Le.requestStatus)return N=ke(T,S),le;{if(!navigator.onLine)throw Ae.create("app-offline");const Ve=J(le);return N=wt(T,Ve),Ve}});return N?yield N:j.authToken})).apply(this,arguments)}function ke(T,S){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,V.Z)(function*(T,S){let N=yield nt(T.appConfig);for(;1===N.authToken.requestStatus;)yield fe(100),N=yield nt(T.appConfig);const j=N.authToken;return 0===j.requestStatus?fr(T,S):j})).apply(this,arguments)}function nt(T){return Gr(T,S=>{if(!Rt(S))throw Ae.create("not-registered");return function _e(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function wt(T,S){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,V.Z)(function*(T,S){try{const N=yield hr(T,S),j=Object.assign(Object.assign({},S),{authToken:N});return yield ot(T.appConfig,j),N}catch(N){if(!rt(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ot(T.appConfig,j)}else yield dn(T.appConfig);throw N}})).apply(this,arguments)}function Rt(T){return void 0!==T&&2===T.registrationStatus}function W(T){return 2===T.requestStatus&&!function G(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function J(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function We(){return(We=(0,V.Z)(function*(T){const S=T,{installationEntry:N,registrationPromise:j}=yield ft(S);return j?j.catch(console.error):fr(S).catch(console.error),N.fid})).apply(this,arguments)}function rn(){return(rn=(0,V.Z)(function*(T,S=!1){const N=T;return yield Hn(N),(yield fr(N,S)).token})).apply(this,arguments)}function Hn(T){return nn.apply(this,arguments)}function nn(){return(nn=(0,V.Z)(function*(T){const{registrationPromise:S}=yield ft(T);S&&(yield S)})).apply(this,arguments)}function mt(T){return Ae.create("missing-app-config-values",{valueName:T})}const Yo="installations",$e=T=>{const S=T.getProvider("app").getImmediate(),N=function Qi(T){if(!T||!T.options)throw mt("App Configuration");if(!T.name)throw mt("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!T.options[N])throw mt(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:N,heartbeatServiceProvider:(0,ce._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},jt=T=>{const S=T.getProvider("app").getImmediate(),N=(0,ce._getProvider)(S,Yo).getImmediate();return{getId:()=>function se(T){return We.apply(this,arguments)}(N),getToken:ne=>function Ct(T){return rn.apply(this,arguments)}(N,ne)}};(function yn(){(0,ce._registerComponent)(new we.wA(Yo,$e,"PUBLIC")),(0,ce._registerComponent)(new we.wA("installations-internal",jt,"PRIVATE"))})(),(0,ce.registerVersion)(me,"0.5.7"),(0,ce.registerVersion)(me,"0.5.7","esm2017");const pr="@firebase/remote-config",Un=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ic{constructor(S,N,j,ne){this.client=S,this.storage=N,this.storageCache=j,this.logger=ne}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-N,ne=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ne}.`),ne}fetch(S){var N=this;return(0,V.Z)(function*(){const[j,ne]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(ne&&N.isCachedDataFresh(S.cacheMaxAgeMillis,j))return ne;S.eTag=ne&&ne.eTag;const le=yield N.client.fetch(S),Le=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Le.push(N.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Le),le})()}}function El(T=navigator){return T.languages&&T.languages[0]||T.language}class Xo{constructor(S,N,j,ne,le,Le){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=j,this.projectId=ne,this.apiKey=le,this.appId=Le}fetch(S){var N=this;return(0,V.Z)(function*(){const[j,ne]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},it={sdk_version:N.sdkVersion,app_instance_id:j,app_instance_id_token:ne,app_id:N.appId,language_code:El()},Pt={method:"POST",headers:Ve,body:JSON.stringify(it)},qt=fetch(Le,Pt),Ot=new Promise((Fi,cs)=>{S.signal.addEventListener(()=>{const ca=new Error("The operation was aborted.");ca.name="AbortError",cs(ca)})});let rr;try{yield Promise.race([qt,Ot]),rr=yield qt}catch(Fi){let cs="fetch-client-network";throw"AbortError"===Fi.name&&(cs="fetch-timeout"),Un.create(cs,{originalErrorMessage:Fi.message})}let Kn=rr.status;const Ja=rr.headers.get("ETag")||void 0;let ua,ai;if(200===rr.status){let Fi;try{Fi=yield rr.json()}catch(cs){throw Un.create("fetch-client-parse",{originalErrorMessage:cs.message})}ua=Fi.entries,ai=Fi.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?Kn=500:"NO_CHANGE"===ai?Kn=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(ua={}),304!==Kn&&200!==Kn)throw Un.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:Ja,config:ua}})()}}class dd{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,V.Z)(function*(){const j=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:j}){var ne=this;return(0,V.Z)(function*(){yield function Gn(T,S){return new Promise((N,j)=>{const ne=Math.max(S-Date.now(),0),le=setTimeout(N,ne);T.addEventListener(()=>{clearTimeout(le),j(Un.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const le=yield ne.client.fetch(S);return yield ne.storage.deleteThrottleMetadata(),le}catch(le){if(!function hu(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(le))throw le;const Le={throttleEndTimeMillis:Date.now()+(0,oe.$s)(j),backoffCount:j+1};return yield ne.storage.setThrottleMetadata(Le),ne.attemptFetch(S,Le)}})()}}class fu{constructor(S,N,j,ne,le){this.app=S,this._client=N,this._storageCache=j,this._storage=ne,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Cl(T,S){const N=T.target.error||void 0;return Un.create(S,{originalErrorMessage:N&&N.message})}const Ts="app_namespace_store";class pd{constructor(S,N,j,ne=function fd(){return new Promise((T,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=j=>{S(Cl(j,"storage-open"))},N.onsuccess=j=>{T(j.target.result)},N.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(Ts,{keyPath:"compositeKey"})}}catch(N){S(Un.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=j,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,V.Z)(function*(){const j=yield N.openDbPromise;return new Promise((ne,le)=>{const Ve=j.transaction([Ts],"readonly").objectStore(Ts),it=N.createCompositeKey(S);try{const Pt=Ve.get(it);Pt.onerror=qt=>{le(Cl(qt,"storage-get"))},Pt.onsuccess=qt=>{const Ot=qt.target.result;ne(Ot?Ot.value:void 0)}}catch(Pt){le(Un.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(S,N){var j=this;return(0,V.Z)(function*(){const ne=yield j.openDbPromise;return new Promise((le,Le)=>{const it=ne.transaction([Ts],"readwrite").objectStore(Ts),Pt=j.createCompositeKey(S);try{const qt=it.put({compositeKey:Pt,value:N});qt.onerror=Ot=>{Le(Cl(Ot,"storage-set"))},qt.onsuccess=()=>{le()}}catch(qt){Le(Un.create("storage-set",{originalErrorMessage:qt&&qt.message}))}})})()}delete(S){var N=this;return(0,V.Z)(function*(){const j=yield N.openDbPromise;return new Promise((ne,le)=>{const Ve=j.transaction([Ts],"readwrite").objectStore(Ts),it=N.createCompositeKey(S);try{const Pt=Ve.delete(it);Pt.onerror=qt=>{le(Cl(qt,"storage-delete"))},Pt.onsuccess=()=>{ne()}}catch(Pt){le(Un.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class pu{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const N=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),ne=S.storage.getActiveConfig(),le=yield N;le&&(S.lastFetchStatus=le);const Le=yield j;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const Ve=yield ne;Ve&&(S.activeConfig=Ve)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Js(){return sc.apply(this,arguments)}function sc(){return(sc=(0,V.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Co(){(0,ce._registerComponent)(new we.wA("remote-config",function T(S,{instanceIdentifier:N}){const j=S.getProvider("app").getImmediate(),ne=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Un.create("registration-window");if(!(0,oe.hl)())throw Un.create("indexed-db-unavailable");const{projectId:le,apiKey:Le,appId:Ve}=j.options;if(!le)throw Un.create("registration-project-id");if(!Le)throw Un.create("registration-api-key");if(!Ve)throw Un.create("registration-app-id");const it=new pd(Ve,j.name,N=N||"firebase"),Pt=new pu(it),qt=new de.Yd(pr);qt.logLevel=de.in.ERROR;const Ot=new Xo(ne,ce.SDK_VERSION,N,le,Le,Ve),rr=new dd(Ot,it),Kn=new ic(rr,it,Pt,qt),Ja=new fu(j,Kn,Pt,it,qt);return function Or(T){const S=(0,oe.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ja),Ja},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(pr,"0.3.6"),(0,ce.registerVersion)(pr,"0.3.6","esm2017")}();const Dl="/firebase-messaging-sw.js",Ss="/firebase-cloud-messaging-push-scope",qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xs="google.c.a.c_id",Do="google.c.a.c_l",gu="google.c.a.ts",oc="google.c.a.e";var As=(()=>{return(T=As||(As={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",As;var T})();function si(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function es(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(N),ne=new Uint8Array(j.length);for(let le=0;le<j.length;++le)ne[le]=j.charCodeAt(le);return ne}const xa="fcm_token_details_db",gr="fcm_token_object_Store";function ac(T){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,V.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(xa))return null;let S=null;return(yield(0,oe.X3)(xa,5,function(){var j=(0,V.Z)(function*(ne,le,Le,Ve){var it;if(le<2||!ne.objectStoreNames.contains(gr))return;const Pt=Ve.objectStore(gr),qt=yield Pt.index("fcmSenderId").get(T);if(yield Pt.clear(),qt)if(2===le){const Ot=qt;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;S={token:Ot.fcmToken,createTime:null!==(it=Ot.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:si(Ot.vapidKey)}}}else if(3===le){const Ot=qt;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:si(Ot.auth),p256dh:si(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:si(Ot.vapidKey)}}}else if(4===le){const Ot=qt;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:si(Ot.auth),p256dh:si(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:si(Ot.vapidKey)}}}});return function(ne,le,Le,Ve){return j.apply(this,arguments)}}())).close(),yield(0,oe.Lj)(xa),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),mu(S)?S:null}),Ma.apply(this,arguments)}function mu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ts="firebase-messaging-store";let eo=null;function ka(){return eo||(eo=(0,oe.X3)("firebase-messaging-database",1,(T,S)=>{0===S&&T.createObjectStore(ts)})),eo}function vn(T){return So.apply(this,arguments)}function So(){return(So=(0,V.Z)(function*(T){const S=to(T),j=yield(yield ka()).transaction(ts).objectStore(ts).get(S);if(j)return j;{const ne=yield ac(T.appConfig.senderId);if(ne)return yield xs(T,ne),ne}})).apply(this,arguments)}function xs(T,S){return sn.apply(this,arguments)}function sn(){return(sn=(0,V.Z)(function*(T,S){const N=to(T),ne=(yield ka()).transaction(ts,"readwrite");return yield ne.objectStore(ts).put(S,N),yield ne.complete,S})).apply(this,arguments)}function _u(T){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,V.Z)(function*(T){const S=to(T),j=(yield ka()).transaction(ts,"readwrite");yield j.objectStore(ts).delete(S),yield j.complete})).apply(this,arguments)}function to({appConfig:T}){return T.appId}const Nn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ea(T,S){return zr.apply(this,arguments)}function zr(){return(zr=(0,V.Z)(function*(T,S){const N=yield Ps(T),j=yt(S),ne={method:"POST",headers:N,body:JSON.stringify(j)};let le;try{le=yield(yield fetch(Kr(T.appConfig),ne)).json()}catch(Le){throw Nn.create("token-subscribe-failed",{errorInfo:Le})}if(le.error)throw Nn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Nn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function mr(T,S){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,V.Z)(function*(T,S){const N=yield Ps(T),j=yt(S.subscriptionOptions),ne={method:"PATCH",headers:N,body:JSON.stringify(j)};let le;try{le=yield(yield fetch(`${Kr(T.appConfig)}/${S.token}`,ne)).json()}catch(Le){throw Nn.create("token-update-failed",{errorInfo:Le})}if(le.error)throw Nn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Nn.create("token-update-no-token");return le.token})).apply(this,arguments)}function ns(T,S){return Na.apply(this,arguments)}function Na(){return(Na=(0,V.Z)(function*(T,S){const j={method:"DELETE",headers:yield Ps(T)};try{const le=yield(yield fetch(`${Kr(T.appConfig)}/${S}`,j)).json();if(le.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(ne){throw Nn.create("token-unsubscribe-failed",{errorInfo:ne})}})).apply(this,arguments)}function Kr({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ps(T){return ks.apply(this,arguments)}function ks(){return(ks=(0,V.Z)(function*({appConfig:T,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function yt({p256dh:T,auth:S,endpoint:N,vapidKey:j}){const ne={web:{endpoint:N,auth:S,p256dh:T}};return j!==qr&&(ne.web.applicationPubKey=j),ne}const Oa=6048e5;function Ns(T){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,V.Z)(function*(T){const S=yield Sl(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:si(S.getKey("auth")),p256dh:si(S.getKey("p256dh"))},j=yield vn(T.firebaseDependencies);if(j){if(ro(j.subscriptionOptions,N))return Date.now()>=j.createTime+Oa?no(T,{token:j.token,createTime:Date.now(),subscriptionOptions:N}):j.token;try{yield ns(T.firebaseDependencies,j.token)}catch(ne){console.warn(ne)}return Re(T.firebaseDependencies,N)}return Re(T.firebaseDependencies,N)})).apply(this,arguments)}function La(T){return Va.apply(this,arguments)}function Va(){return(Va=(0,V.Z)(function*(T){const S=yield vn(T.firebaseDependencies);S&&(yield ns(T.firebaseDependencies,S.token),yield _u(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function no(T,S){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,V.Z)(function*(T,S){try{const N=yield mr(T.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield xs(T.firebaseDependencies,j),N}catch(N){throw yield La(T),N}})).apply(this,arguments)}function Re(T,S){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,V.Z)(function*(T,S){const j={token:yield ea(T,S),createTime:Date.now(),subscriptionOptions:S};return yield xs(T,j),j.token})).apply(this,arguments)}function Sl(T,S){return In.apply(this,arguments)}function In(){return(In=(0,V.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:es(S)})})).apply(this,arguments)}function ro(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Ao(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Zr(T,S){if(!S.notification)return;T.notification={};const N=S.notification.title;N&&(T.notification.title=N);const j=S.notification.body;j&&(T.notification.body=j);const ne=S.notification.image;ne&&(T.notification.image=ne)}(S,T),function Al(T,S){!S.data||(T.data=S.data)}(S,T),function xl(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const N=S.fcmOptions.link;N&&(T.fcmOptions.link=N);const j=S.fcmOptions.analytics_label;j&&(T.fcmOptions.analyticsLabel=j)}(S,T),S}function yu(T){return"object"==typeof T&&!!T&&Xs in T}function Ml(T,S){const N=[];for(let j=0;j<T.length;j++)N.push(T.charAt(j)),j<S.length&&N.push(S.charAt(j));return N.join("")}function Os(T){return Nn.create("missing-app-config-values",{valueName:T})}Ml("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ml("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _r{constructor(S,N,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Ua(T){if(!T||!T.options)throw Os("App Configuration Object");if(!T.name)throw Os("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const j of S)if(!N[j])throw Os(j);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ne,installations:N,analyticsProvider:j}}_delete(){return Promise.resolve()}}function oi(T){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,V.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Dl,{scope:Ss}),T.swRegistration.update().catch(()=>{})}catch(S){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function rs(T,S){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,V.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield oi(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function ja(T,S){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,V.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=qr)})).apply(this,arguments)}function Rl(){return(Rl=(0,V.Z)(function*(T,S){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield ja(T,null==S?void 0:S.vapidKey),yield rs(T,null==S?void 0:S.serviceWorkerRegistration),Ns(T)})).apply(this,arguments)}function xo(T,S,N){return ta.apply(this,arguments)}function ta(){return(ta=(0,V.Z)(function*(T,S,N){const j=na(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:N[Xs],message_name:N[Do],message_time:N[gu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function na(T){switch(T){case As.NOTIFICATION_CLICKED:return"notification_open";case As.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Pl(){return(Pl=(0,V.Z)(function*(T,S){const N=S.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===As.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Ao(N)):T.onMessageHandler.next(Ao(N)));const j=N.data;yu(j)&&"1"===j[oc]&&(yield xo(T,N.messageType,j))})).apply(this,arguments)}const ra="@firebase/messaging",vu=T=>{const S=new _r(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Ga(T,S){return Pl.apply(this,arguments)}(S,N)),S},so=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:j=>function $a(T,S){return Rl.apply(this,arguments)}(S,j)}};function wu(){return oo.apply(this,arguments)}function oo(){return(oo=(0,V.Z)(function*(){try{yield(0,oe.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ia(){(0,ce._registerComponent)(new we.wA("messaging",vu,"PUBLIC")),(0,ce._registerComponent)(new we.wA("messaging-internal",so,"PRIVATE")),(0,ce.registerVersion)(ra,"0.9.11"),(0,ce.registerVersion)(ra,"0.9.11","esm2017")}();const qa="analytics",Jh="firebase_id",Mo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ro="https://www.googletagmanager.com/gtag/js",qn=new de.Yd("@firebase/analytics");function bu(T){return Promise.all(T.map(S=>S.catch(N=>N)))}function gd(T,S){const N=document.createElement("script");N.src=`${Ro}?l=${T}&id=${S}`,N.async=!0,document.head.appendChild(N)}function yi(T,S,N,j,ne,le){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,V.Z)(function*(T,S,N,j,ne,le){const Le=j[ne];try{if(Le)yield S[Le];else{const it=(yield bu(N)).find(Pt=>Pt.measurementId===ne);it&&(yield S[it.appId])}}catch(Ve){qn.error(Ve)}T("config",ne,le)})).apply(this,arguments)}function Ol(T,S,N,j,ne){return ao.apply(this,arguments)}function ao(){return(ao=(0,V.Z)(function*(T,S,N,j,ne){try{let le=[];if(ne&&ne.send_to){let Le=ne.send_to;Array.isArray(Le)||(Le=[Le]);const Ve=yield bu(N);for(const it of Le){const Pt=Ve.find(Ot=>Ot.measurementId===it),qt=Pt&&S[Pt.appId];if(!qt){le=[];break}le.push(qt)}}0===le.length&&(le=Object.values(S)),yield Promise.all(le),T("event",j,ne||{})}catch(le){qn.error(le)}})).apply(this,arguments)}function md(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Ro))return S;return null}const Tn=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),H=new class P{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function xe(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ht(T){return xt.apply(this,arguments)}function xt(){return(xt=(0,V.Z)(function*(T){var S;const{appId:N,apiKey:j}=T,ne={method:"GET",headers:xe(j)},le=Mo.replace("{app-id}",N),Le=yield fetch(le,ne);if(200!==Le.status&&304!==Le.status){let Ve="";try{const it=yield Le.json();(null===(S=it.error)||void 0===S?void 0:S.message)&&(Ve=it.error.message)}catch(it){}throw Tn.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:Ve})}return Le.json()})).apply(this,arguments)}function Qr(T){return En.apply(this,arguments)}function En(){return(En=(0,V.Z)(function*(T,S=H,N){const{appId:j,apiKey:ne,measurementId:le}=T.options;if(!j)throw Tn.create("no-app-id");if(!ne){if(le)return{measurementId:le,appId:j};throw Tn.create("no-api-key")}const Le=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new cc;return setTimeout((0,V.Z)(function*(){Ve.abort()}),void 0!==N?N:6e4),ss({appId:j,apiKey:ne,measurementId:le},Le,Ve,S)})).apply(this,arguments)}function ss(T,S,N){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,V.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:N},j,ne=H){const{appId:le,measurementId:Le}=T;try{yield Nt(j,S)}catch(Ve){if(Le)return qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:le,measurementId:Le};throw Ve}try{const Ve=yield ht(T);return ne.deleteThrottleMetadata(le),Ve}catch(Ve){if(!_d(Ve)){if(ne.deleteThrottleMetadata(le),Le)return qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:le,measurementId:Le};throw Ve}const it=503===Number(Ve.customData.httpStatus)?(0,oe.$s)(N,ne.intervalMillis,30):(0,oe.$s)(N,ne.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+it,backoffCount:N+1};return ne.setThrottleMetadata(le,Pt),qn.debug(`Calling attemptFetch again in ${it} millis`),ss(T,Pt,j,ne)}})).apply(this,arguments)}function Nt(T,S){return new Promise((N,j)=>{const ne=Math.max(S-Date.now(),0),le=setTimeout(N,ne);T.addEventListener(()=>{clearTimeout(le),j(Tn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function _d(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class cc{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function yd(){return sa.apply(this,arguments)}function sa(){return(sa=(0,V.Z)(function*(){if(!(0,oe.hl)())return qn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(T){return qn.warn(Tn.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function lo(){return(lo=(0,V.Z)(function*(T,S,N,j,ne,le,Le){var Ve;const it=Qr(T);it.then(Kn=>{N[Kn.measurementId]=Kn.appId,T.options.measurementId&&Kn.measurementId!==T.options.measurementId&&qn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>qn.error(Kn)),S.push(it);const Pt=yd().then(Kn=>{if(Kn)return j.getId()}),[qt,Ot]=yield Promise.all([it,Pt]);md()||gd(le,qt.measurementId),ne("js",new Date);const rr=null!==(Ve=null==Le?void 0:Le.config)&&void 0!==Ve?Ve:{};return rr.origin="firebase",rr.update=!0,null!=Ot&&(rr[Jh]=Ot),ne("config",qt.measurementId,rr),qt.measurementId})).apply(this,arguments)}class Wa{constructor(S){this.app=S}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},Po=[];const Fl={};let ko,Us,Vs="dataLayer",hc=!1;function os(T,S,N){!function oa(){const T=[];if((0,oe.ru)()&&T.push("This is a browser extension environment."),(0,oe.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((j,ne)=>`(${ne+1}) ${j}`).join(" "),N=Tn.create("invalid-analytics-context",{errorInfo:S});qn.warn(N.message)}}();const j=T.options.appId;if(!j)throw Tn.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Tn.create("no-api-key");qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ki[j])throw Tn.create("already-exists",{id:j});if(!hc){!function _i(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(Vs);const{wrappedGtag:le,gtagCore:Le}=function uc(T,S,N,j,ne){let le=function(...Le){window[j].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(le=window[ne]),window[ne]=function Cu(T,S,N,j){function le(){return(le=(0,V.Z)(function*(Le,Ve,it){try{"event"===Le?yield Ol(T,S,N,Ve,it):"config"===Le?yield yi(T,S,N,j,Ve,it):T("set",Ve)}catch(Pt){qn.error(Pt)}})).apply(this,arguments)}return function ne(Le,Ve,it){return le.apply(this,arguments)}}(le,T,S,N),{gtagCore:le,wrappedGtag:window[ne]}}(ki,Po,Fl,Vs,"gtag");Us=le,ko=Le,hc=!0}return ki[j]=function Fn(T,S,N,j,ne,le,Le){return lo.apply(this,arguments)}(T,Po,Fl,S,ko,Vs,N),new Wa(T)}function Ll(){return(Ll=(0,V.Z)(function*(T,S,N,j,ne){if(ne&&ne.global)T("event",N,j);else{const le=yield S;T("event",N,Object.assign(Object.assign({},j),{send_to:le}))}})).apply(this,arguments)}function Wn(){return No.apply(this,arguments)}function No(){return(No=(0,V.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(T){return!1}})).apply(this,arguments)}const Oo="@firebase/analytics";!function _g(){(0,ce._registerComponent)(new we.wA(qa,(S,{options:N})=>os(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ce._registerComponent)(new we.wA("analytics-internal",function T(S){try{const N=S.getProvider(qa).getImmediate();return{logEvent:(j,ne,le)=>function mg(T,S,N,j){T=(0,oe.m9)(T),function za(T,S,N,j,ne){return Ll.apply(this,arguments)}(Us,ki[T.app.options.appId],S,N,j).catch(ne=>qn.error(ne))}(N,j,ne,le)}}catch(N){throw Tn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ce.registerVersion)(Oo,"0.7.7"),(0,ce.registerVersion)(Oo,"0.7.7","esm2017")}();var Fo=U(4408),Iu=U(7565);const fc=new class Bn extends Iu.v{}(class co extends Fo.o{constructor(S,N){super(S,N),this.scheduler=S,this.work=N}schedule(S,N=0){return N>0?super.schedule(S,N):(this.delay=N,this.state=S,this.scheduler.flush(this),this)}execute(S,N){return N>0||this.closed?super.execute(S,N):this._execute(S,N)}requestAsyncId(S,N,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,N,j):S.flush(this)}});var yg=U(4986),pc=U(8505),Fr=U(5363),Ni=U(9468);const gc=new m.GfV("7.3.0"),ho="__angularfire_symbol__analyticsIsSupportedValue",us="__angularfire_symbol__analyticsIsSupported",js="__angularfire_symbol__remoteConfigIsSupportedValue",Vl="__angularfire_symbol__remoteConfigIsSupported",mc="__angularfire_symbol__messagingIsSupportedValue",_c="__angularfire_symbol__messagingIsSupported";function Lo(T,S,N){if(S){if(1===S.length)return S[0];const le=S.filter(Le=>Le.app===N);if(1===le.length)return le[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[us]||(globalThis[us]=Wn().then(T=>globalThis[ho]=T).catch(()=>globalThis[ho]=!1)),globalThis[_c]||(globalThis[_c]=wu().then(T=>globalThis[mc]=T).catch(()=>globalThis[mc]=!1)),globalThis[Vl]||(globalThis[Vl]=Js().then(T=>globalThis[js]=T).catch(()=>globalThis[js]=!1));const Ed=(T,S)=>{const N=S?[S]:(0,te.C6)(),j=[];return N.forEach(ne=>{ne.container.getProvider(T).instances.forEach(Le=>{j.includes(Le)||j.push(Le)})}),j};function aa(){}class Du{constructor(S,N=fc){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,j){const ne=this.zone;return this.delegate.schedule(function(Le){ne.runGuarded(()=>{S.apply(this,[Le])})},N,j)}}class Hs{constructor(S){this.zone=S,this.task=null}call(S,N){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",aa,{},aa,aa)),N.pipe((0,pc.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tu=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Du(Zone.current)),this.insideAngular=N.run(()=>new Du(Zone.current,yg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(m.LFG(m.R0b))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function $s(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function nr(T){return T.pipe((0,Fr.Q)($s().outsideAngular))}function wc(T){return $s(),function la(T){return function(N){return(N=N.lift(new Hs(T.ngZone))).pipe((0,Ni.R)(T.outsideAngular),(0,Fr.Q)(T.insideAngular))}}($s())(T)}},2090:(gt,Me,U)=>{"use strict";U.d(Me,{$s:()=>bs,BH:()=>Oe,DV:()=>$t,Dv:()=>Yi,G6:()=>ae,GJ:()=>Pr,L:()=>ge,LL:()=>Dt,Lj:()=>Qt,Mn:()=>Ye,Pz:()=>at,Sg:()=>He,UG:()=>Ae,UI:()=>jr,US:()=>de,Wj:()=>dr,X3:()=>wt,Yr:()=>Z,ZB:()=>ie,ZR:()=>fe,b$:()=>Pe,cI:()=>dt,d:()=>Te,dS:()=>bt,eu:()=>ue,g5:()=>ce,gK:()=>ft,gQ:()=>bn,h$:()=>me,hl:()=>X,hu:()=>V,jU:()=>rt,lb:()=>Mi,m9:()=>vt,ne:()=>ot,p$:()=>K,pd:()=>Nr,r3:()=>an,ru:()=>et,tV:()=>z,uI:()=>ve,ug:()=>Qe,vZ:()=>xi,w1:()=>Se,w9:()=>Jt,xO:()=>Hr,xb:()=>Qn,z$:()=>qe,zI:()=>he,zd:()=>kr});var m=U(5861);const V=function(W,G){if(!W)throw ce(G)},ce=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},oe=function(W){const G=[];let J=0;for(let _e=0;_e<W.length;_e++){let se=W.charCodeAt(_e);se<128?G[J++]=se:se<2048?(G[J++]=se>>6|192,G[J++]=63&se|128):55296==(64512&se)&&_e+1<W.length&&56320==(64512&W.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&W.charCodeAt(++_e)),G[J++]=se>>18|240,G[J++]=se>>12&63|128,G[J++]=se>>6&63|128,G[J++]=63&se|128):(G[J++]=se>>12|224,G[J++]=se>>6&63|128,G[J++]=63&se|128)}return G},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<W.length;se+=3){const We=W[se],Ct=se+1<W.length,rn=Ct?W[se+1]:0,Hn=se+2<W.length,nn=Hn?W[se+2]:0;let _n=(15&rn)<<2|nn>>6,$n=63&nn;Hn||($n=64,Ct||(_n=64)),_e.push(J[We>>2],J[(3&We)<<4|rn>>4],J[_n],J[$n])}return _e.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(oe(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let J=0,_e=0;for(;J<W.length;){const se=W[J++];if(se<128)G[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const We=W[J++];G[_e++]=String.fromCharCode((31&se)<<6|63&We)}else if(se>239&&se<365){const Hn=((7&se)<<18|(63&W[J++])<<12|(63&W[J++])<<6|63&W[J++])-65536;G[_e++]=String.fromCharCode(55296+(Hn>>10)),G[_e++]=String.fromCharCode(56320+(1023&Hn))}else{const We=W[J++],Ct=W[J++];G[_e++]=String.fromCharCode((15&se)<<12|(63&We)<<6|63&Ct)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const J=G?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<W.length;){const We=J[W.charAt(se++)],rn=se<W.length?J[W.charAt(se)]:0;++se;const nn=se<W.length?J[W.charAt(se)]:64;++se;const Vt=se<W.length?J[W.charAt(se)]:64;if(++se,null==We||null==rn||null==nn||null==Vt)throw Error();_e.push(We<<2|rn>>4),64!==nn&&(_e.push(rn<<4&240|nn>>2),64!==Vt&&_e.push(nn<<6&192|Vt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},me=function(W){const G=oe(W);return de.encodeByteArray(G,!0)},ge=function(W){return me(W).replace(/\./g,"")},z=function(W){try{return de.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function K(W){return ie(void 0,W)}function ie(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const J in G)!G.hasOwnProperty(J)||!Je(J)||(W[J]=ie(W[J],G[J]));return W}function Je(W){return"__proto__"!==W}class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,J)=>{this.resolve=G,this.reject=J})}wrapCallback(G){return(J,_e)=>{J?this.reject(J):this.resolve(_e),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(J):G(J,_e))}}}function He(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=G||"demo-project",se=W.iat||0,We=W.sub||W.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},W);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ct)),""].join(".")}function qe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function rt(){return"object"==typeof self&&self.self===self}function et(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return qe().indexOf("Electron/")>=0}function Se(){const W=qe();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Ye(){return qe().indexOf("MSAppHost/")>=0}function Z(){return!1}function ae(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}function ue(){return new Promise((W,G)=>{try{let J=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),J||self.indexedDB.deleteDatabase(_e),W(!0)},se.onupgradeneeded=()=>{J=!1},se.onerror=()=>{var We;G((null===(We=se.error)||void 0===We?void 0:We.message)||"")}}catch(J){G(J)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class fe extends Error{constructor(G,J,_e){super(J),this.code=G,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dt.prototype.create)}}class Dt{constructor(G,J,_e){this.service=G,this.serviceName=J,this.errors=_e}create(G,...J){const _e=J[0]||{},se=`${this.service}/${G}`,We=this.errors[G],Ct=We?function on(W,G){return W.replace(Pn,(J,_e)=>{const se=G[_e];return null!=se?String(se):`<${_e}?>`})}(We,_e):"Error";return new fe(se,`${this.serviceName}: ${Ct} (${se}).`,_e)}}const Pn=/\{\$([^}]+)}/g;function dt(W){return JSON.parse(W)}function at(W){return JSON.stringify(W)}const tn=function(W){let G={},J={},_e={},se="";try{const We=W.split(".");G=dt(z(We[0])||""),J=dt(z(We[1])||""),se=We[2],_e=J.d||{},delete J.d}catch(We){}return{header:G,claims:J,data:_e,signature:se}},Jt=function(W){const J=tn(W).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Pr=function(W){const G=tn(W).claims;return"object"==typeof G&&!0===G.admin};function an(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function $t(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function Qn(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function jr(W,G,J){const _e={};for(const se in W)Object.prototype.hasOwnProperty.call(W,se)&&(_e[se]=G.call(J,W[se],se,W));return _e}function xi(W,G){if(W===G)return!0;const J=Object.keys(W),_e=Object.keys(G);for(const se of J){if(!_e.includes(se))return!1;const We=W[se],Ct=G[se];if(cr(We)&&cr(Ct)){if(!xi(We,Ct))return!1}else if(We!==Ct)return!1}for(const se of _e)if(!J.includes(se))return!1;return!0}function cr(W){return null!==W&&"object"==typeof W}function Hr(W){const G=[];for(const[J,_e]of Object.entries(W))Array.isArray(_e)?_e.forEach(se=>{G.push(encodeURIComponent(J)+"="+encodeURIComponent(se))}):G.push(encodeURIComponent(J)+"="+encodeURIComponent(_e));return G.length?"&"+G.join("&"):""}function kr(W){const G={};return W.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,We]=_e.split("=");G[decodeURIComponent(se)]=decodeURIComponent(We)}}),G}function Nr(W){const G=W.indexOf("?");if(!G)return"";const J=W.indexOf("#",G);return W.substring(G,J>0?J:void 0)}class bn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,J){J||(J=0);const _e=this.W_;if("string"==typeof G)for(let Vt=0;Vt<16;Vt++)_e[Vt]=G.charCodeAt(J)<<24|G.charCodeAt(J+1)<<16|G.charCodeAt(J+2)<<8|G.charCodeAt(J+3),J+=4;else for(let Vt=0;Vt<16;Vt++)_e[Vt]=G[J]<<24|G[J+1]<<16|G[J+2]<<8|G[J+3],J+=4;for(let Vt=16;Vt<80;Vt++){const _n=_e[Vt-3]^_e[Vt-8]^_e[Vt-14]^_e[Vt-16];_e[Vt]=4294967295&(_n<<1|_n>>>31)}let nn,kn,se=this.chain_[0],We=this.chain_[1],Ct=this.chain_[2],rn=this.chain_[3],Hn=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(nn=rn^We&(Ct^rn),kn=1518500249):(nn=We^Ct^rn,kn=1859775393):Vt<60?(nn=We&Ct|rn&(We|Ct),kn=2400959708):(nn=We^Ct^rn,kn=3395469782);const _n=(se<<5|se>>>27)+nn+Hn+kn+_e[Vt]&4294967295;Hn=rn,rn=Ct,Ct=4294967295&(We<<30|We>>>2),We=se,se=_n}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+Ct&4294967295,this.chain_[3]=this.chain_[3]+rn&4294967295,this.chain_[4]=this.chain_[4]+Hn&4294967295}update(G,J){if(null==G)return;void 0===J&&(J=G.length);const _e=J-this.blockSize;let se=0;const We=this.buf_;let Ct=this.inbuf_;for(;se<J;){if(0===Ct)for(;se<=_e;)this.compress_(G,se),se+=this.blockSize;if("string"==typeof G){for(;se<J;)if(We[Ct]=G.charCodeAt(se),++Ct,++se,Ct===this.blockSize){this.compress_(We),Ct=0;break}}else for(;se<J;)if(We[Ct]=G[se],++Ct,++se,Ct===this.blockSize){this.compress_(We),Ct=0;break}}this.inbuf_=Ct,this.total_+=J}digest(){const G=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&J,J/=256;this.compress_(this.buf_);let _e=0;for(let se=0;se<5;se++)for(let We=24;We>=0;We-=8)G[_e]=this.chain_[se]>>We&255,++_e;return G}}function ot(W,G){const J=new $r(W,G);return J.subscribe.bind(J)}class $r{constructor(G,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{G(this)}).catch(_e=>{this.error(_e)})}next(G){this.forEachObserver(J=>{J.next(G)})}error(G){this.forEachObserver(J=>{J.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,J,_e){let se;if(void 0===G&&void 0===J&&void 0===_e)throw new Error("Missing Observer.");se=function Vn(W,G){if("object"!=typeof W||null===W)return!1;for(const J of G)if(J in W&&"function"==typeof W[J])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:J,complete:_e},void 0===se.next&&(se.next=Gr),void 0===se.error&&(se.error=Gr),void 0===se.complete&&(se.complete=Gr);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(Ct){}}),this.observers.push(se),We}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,G)}sendOne(G,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{J(this.observers[G])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gr(){}const Yi=function(W,G,J,_e){let se;if(_e<G?se="at least "+G:_e>J&&(se=0===J?"none":"no more than "+J),se)throw new Error(W+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+se+".")};function ft(W,G){return`${W} failed: ${G} argument `}function dr(W,G,J,_e){if((!_e||J)&&"function"!=typeof J)throw new Error(ft(W,G)+"must be a valid function.")}function Mi(W,G,J,_e){if((!_e||J)&&("object"!=typeof J||null===J))throw new Error(ft(W,G)+"must be a valid context object.")}const bt=function(W){const G=[];let J=0;for(let _e=0;_e<W.length;_e++){let se=W.charCodeAt(_e);if(se>=55296&&se<=56319){const We=se-55296;_e++,V(_e<W.length,"Surrogate pair missing trail surrogate."),se=65536+(We<<10)+(W.charCodeAt(_e)-56320)}se<128?G[J++]=se:se<2048?(G[J++]=se>>6|192,G[J++]=63&se|128):se<65536?(G[J++]=se>>12|224,G[J++]=se>>6&63|128,G[J++]=63&se|128):(G[J++]=se>>18|240,G[J++]=se>>12&63|128,G[J++]=se>>6&63|128,G[J++]=63&se|128)}return G},Qe=function(W){let G=0;for(let J=0;J<W.length;J++){const _e=W.charCodeAt(J);_e<128?G++:_e<2048?G+=2:_e>=55296&&_e<=56319?(G+=4,J++):G+=3}return G};function bs(W,G=1e3,J=2){const _e=G*Math.pow(J,W),se=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+se)}function vt(W){return W&&W._delegate?W._delegate:W}function fr(W,G){return new Promise((J,_e)=>{W.onsuccess=se=>{J(se.target.result)},W.onerror=se=>{var We;_e(`${G}: ${null===(We=se.target.error)||void 0===We?void 0:We.message}`)}})}class Zt{constructor(G){this._db=G,this.objectStoreNames=this._db.objectStoreNames}transaction(G,J){return new ke(this._db.transaction.call(this._db,G,J))}createObjectStore(G,J){return new Ne(this._db.createObjectStore(G,J))}close(){this._db.close()}}class ke{constructor(G){this._transaction=G,this.complete=new Promise((J,_e)=>{this._transaction.oncomplete=function(){J()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(G){return new Ne(this._transaction.objectStore(G))}}class Ne{constructor(G){this._store=G}index(G){return new nt(this._store.index(G))}createIndex(G,J,_e){return new nt(this._store.createIndex(G,J,_e))}get(G){return fr(this._store.get(G),"Error reading from IndexedDB")}put(G,J){return fr(this._store.put(G,J),"Error writing to IndexedDB")}delete(G){return fr(this._store.delete(G),"Error deleting from IndexedDB")}clear(){return fr(this._store.clear(),"Error clearing IndexedDB object store")}}class nt{constructor(G){this._index=G}get(G){return fr(this._index.get(G),"Error reading from IndexedDB")}}function wt(W,G,J){return new Promise((_e,se)=>{try{const We=indexedDB.open(W,G);We.onsuccess=Ct=>{_e(new Zt(Ct.target.result))},We.onerror=Ct=>{var rn;se(`Error opening indexedDB: ${null===(rn=Ct.target.error)||void 0===rn?void 0:rn.message}`)},We.onupgradeneeded=Ct=>{J(new Zt(We.result),Ct.oldVersion,Ct.newVersion,new ke(We.transaction))}}catch(We){se(`Error opening indexedDB: ${We.message}`)}})}function Qt(W){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(W){return new Promise((G,J)=>{try{const _e=indexedDB.deleteDatabase(W);_e.onsuccess=()=>{G()},_e.onerror=se=>{var We;J(`Error deleting indexedDB database "${W}": ${null===(We=se.target.error)||void 0===We?void 0:We.message}`)}}catch(_e){J(`Error deleting indexedDB database "${W}": ${_e.message}`)}})})).apply(this,arguments)}},1904:(gt,Me,U)=>{"use strict";var m=U(5e3);let te=null;function V(){return te}const de=new m.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ge(){return(0,m.LFG)(K)}()},providedIn:"platform"}),n})();const z=new m.OlP("Location Initialized");let K=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Je(){return new K((0,m.LFG)(de))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function He(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ae(n){const e=(0,m.LFG)(de).location;return new et((0,m.LFG)(me),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new m.OlP("appBaseHref");let et=(()=>{class n extends ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me),m.LFG(rt,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+qe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+qe(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me),m.LFG(rt,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=He(Z(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ye(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Z(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Oe,n.stripTrailingSlash=He,n.\u0275fac=function(t){return new(t||n)(m.LFG(ve),m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Se(){return new Te((0,m.LFG)(ve),(0,m.LFG)(me))}()},providedIn:"root"}),n})();function Z(n){return n.replace(/\/index.html$/,"")}let Or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ta("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ta("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hn{constructor(){this.$implicit=null,this.ngIf=null}}function Ta(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let To=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function gr(n){return"server"===n}let Ra=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Pa((0,m.LFG)(de),window)}),n})();class Pa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function eo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ts(this.window.history)||ts(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ts(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class So extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){te||(te=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _u(){return sn=sn||document.querySelector("base"),sn?sn.getAttribute("href"):null}();return null==t?null:function to(n){Ms=Ms||document.createElement("a"),Ms.setAttribute("href",n);const e=Ms.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ms,sn=null;const Tr=new m.OlP("TRANSITION_ID"),ea=[{provide:m.ip1,useFactory:function Nn(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Tr,de,m.zs3],multi:!0}];class zr{static init(){(0,m.VLi)(new zr)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let mr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Rs=new m.OlP("EventManagerPlugins");let ns=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Rs),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Na{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ks))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ks(n){V().remove(n)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oa=/%COMP%/g;function Re(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Re(n,i,t):(i=i.replace(Oa,n),t.push(i))}return t}function Gt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let In=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ro(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Al(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new xl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Re(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ns),m.LFG(Ps),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ro{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=yt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gt(r)):this.eventManager.addEventListener(e,t,Gt(r))}}class Al extends ro{constructor(e,t,r,i){super(e),this.component=r;const a=Re(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function no(n){return"_ngcontent-%COMP%".replace(Oa,n)}(i+"-"+r.id),this.hostAttr=function Tl(n){return"_nghost-%COMP%".replace(Oa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class xl extends ro{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Re(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let yu=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ml=["alt","control","meta","shift"],Os={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_r={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ba=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(Ml.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),u+=_+".")}),u+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function rs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_r.hasOwnProperty(e)&&(e=_r[e]))}return Os[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ml.forEach(a=>{a!=i&&oi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Rl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Yr(){xs.makeCurrent(),zr.init()},multi:!0},{provide:de,useFactory:function Ha(){return(0,m.RDi)(document),document},deps:[]}]),xo=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function ja(){return new m.qLn},deps:[]},{provide:Rs,useClass:yu,multi:!0,deps:[de,m.R0b,m.Lbi]},{provide:Rs,useClass:Ba,multi:!0,deps:[de]},{provide:In,useClass:In,deps:[ns,Ps,m.AFp]},{provide:m.FYo,useExisting:In},{provide:Kr,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[de]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ns,useClass:ns,deps:[Rs,m.R0b]},{provide:class vn{},useClass:mr,deps:[]}];let ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Tr,useExisting:m.AFp},ea]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:xo,imports:[To,m.hGG]}),n})();"undefined"!=typeof window&&window;var Dn=U(8996),Tn=U(7669);function C(...n){const e=(0,Tn.yG)(n);return(0,Dn.D)(n,e)}var D=U(7579);class P extends D.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var H=U(8306);const{isArray:xe}=Array,{getPrototypeOf:ht,prototype:xt,keys:Qr}=Object;function En(n){if(1===n.length){const e=n[0];if(xe(e))return{args:e,keys:null};if(function ss(n){return n&&"object"==typeof n&&ht(n)===xt}(e)){const t=Qr(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Sr=U(4671),Nt=U(4004);const{isArray:_d}=Array;function yd(n){return(0,Nt.U)(e=>function cc(n,e){return _d(e)?n(...e):n(e)}(n,e))}function sa(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Fn=U(5403),lo=U(9672);function Po(n,e,t){n?(0,lo.f)(t,n,e):e()}var Fl=U(576);function Vs(n,e){const t=(0,Fl.m)(n)?n:()=>n,r=i=>i.error(t());return new H.y(e?i=>e.schedule(r,0,i):r)}const ko=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Us=U(8189);function vd(...n){return function hc(){return(0,Us.J)(1)}()((0,Dn.D)(n,(0,Tn.yG)(n)))}var oa=U(8421);function os(n){return new H.y(e=>{(0,oa.Xf)(n()).subscribe(e)})}var za=U(515),Ll=U(727),Ar=U(4482);function as(){return(0,Ar.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wd extends H.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ar.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ll.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ll.w0.EMPTY)}return e}refCount(){return as()(this)}}function Ln(n,e){return(0,Ar.e)((t,r)=>{let i=null,a=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,Fn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const A=a++;(0,oa.Xf)(n(_,A)).subscribe(i=(0,Fn.x)(r,x=>r.next(e?e(_,x,A,w++):x),()=>{i=null,h()}))},()=>{u=!0,h()}))})}var Ka=U(5698);function ls(...n){const e=(0,Tn.yG)(n);return(0,Ar.e)((t,r)=>{(e?vd(n,t,e):vd(n,t)).subscribe(r)})}function Za(n,e,t,r,i){return(a,u)=>{let h=t,_=e,w=0;a.subscribe((0,Fn.x)(u,A=>{const x=w++;_=h?n(_,A,x):(h=!0,A),r&&u.next(_)},i&&(()=>{h&&u.next(_),u.complete()})))}}function xr(n,e){return(0,Ar.e)(Za(n,e,arguments.length>=2,!0))}function uo(n,e){return(0,Ar.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Bs(n){return(0,Ar.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,u=>{a=(0,oa.Xf)(n(u,Bs(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Wn=U(5577);function No(n,e){return(0,Fl.m)(e)?(0,Wn.z)(n,e,1):(0,Wn.z)(n,1)}function bd(n){return n<=0?()=>za.E:(0,Ar.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zn(n=pg){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function pg(){return new ko}function gg(n){return(0,Ar.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Oo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((i,a)=>n(i,a,r)):Sr.y,(0,Ka.q)(1),t?gg(e):zn(()=>new ko))}var vi=U(8505);class Fo{constructor(e,t){this.id=e,this.url=t}}class co extends Fo{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iu extends Fo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bn extends Fo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fc extends Fo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ya extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yg extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pc extends Fo{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fr extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends Fo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gc{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ho{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class us{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _c{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class yc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vr(n){return new yc(n)}const vc="ngNavigationCancelingError";function Lo(n){const e=Error("NavigationCancelingError: "+n);return e[vc]=!0,e}function aa(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],h=n[a];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Tu(n[i],e[i]))return!1;return!0}function Tu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function $s(n){return Array.prototype.concat.apply([],n)}function Cd(n){return n.length>0?n[n.length-1]:null}function nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Oi(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):C(n)}const la={exact:function S(n,e,t){if(!qt(n.segments,e.segments)||!le(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!S(n.children[r],e.children[r],t))return!1;return!0},subset:j},Qa={exact:function T(n,e){return Hs(n,e)},subset:function N(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Tu(n[t],e[t]))},ignored:()=>!0};function Su(n,e,t){return la[t.paths](n.root,e.root,t.matrixParams)&&Qa[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function j(n,e,t){return ne(n,e,e.segments,t)}function ne(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qt(i,t)||e.hasChildren()||!le(i,t,r))}if(n.segments.length===t.length){if(!qt(n.segments,t)||!le(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!j(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(qt(n.segments,i)&&le(n.segments,i,r)&&n.children[Yt])&&ne(n.children[Yt],e,a,r)}}function le(n,e,t){return e.every((r,i)=>Qa[t](n[i].parameters,r.parameters))}class Le{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return Ja.serialize(this)}}class Ve{constructor(e,t){this.segments=e,this.children=t,this.parent=null,nr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ua(this)}}class it{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vr(this.parameters)),this._parameterMap}toString(){return Ul(this)}}function qt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class rr{}class Kn{parse(e){const t=new Dd(e);return new Le(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ai(e.root,!0)}`,r=function uy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${cs(t)}=${cs(i)}`).join("&"):`${cs(t)}=${cs(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ca(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ja=new Kn;function ua(n){return n.segments.map(e=>Ul(e)).join("/")}function ai(n,e){if(!n.hasChildren())return ua(n);if(e){const t=n.children[Yt]?ai(n.children[Yt],!1):"",r=[];return nr(n.children,(i,a)=>{a!==Yt&&r.push(`${a}:${ai(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ot(n,e){let t=[];return nr(n.children,(r,i)=>{i===Yt&&(t=t.concat(e(r,i)))}),nr(n.children,(r,i)=>{i!==Yt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Yt?[ai(n.children[Yt],!1)]:[`${i}:${ai(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${ua(n)}/${t[0]}`:`${ua(n)}/(${t.join("//")})`}}function Fi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cs(n){return Fi(n).replace(/%3B/gi,";")}function Id(n){return Fi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bc(n){return decodeURIComponent(n)}function Ec(n){return bc(n.replace(/\+/g,"%20"))}function Ul(n){return`${Id(n.path)}${function vg(n){return Object.keys(n).map(e=>`;${Id(e)}=${Id(n[e])}`).join("")}(n.parameters)}`}const cy=/^[^\/()?;=#]+/;function fo(n){const e=n.match(cy);return e?e[0]:""}const Cc=/^[^=?&#]+/,hy=/^[^&#]+/;class Dd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new Ve(e,t)),r}parseSegment(){const e=fo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new it(bc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fo(this.remaining);i&&(r=i,this.capture(r))}e[bc(t)]=bc(r)}parseQueryParam(e){const t=function dy(n){const e=n.match(Cc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function wg(n){const e=n.match(hy);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Ec(t),a=Ec(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Yt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Yt]:new Ve([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class fy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ef(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ef(e,this._root).map(t=>t.value)}}function Xh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xh(n,t);if(r)return r}return null}function ef(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ef(n,t);if(r.length)return r.unshift(e),r}return[]}class da{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ha(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Td extends fy{constructor(e,t){super(e),this.snapshot=t,Ad(this,e)}toString(){return this.snapshot.toString()}}function Bl(n,e){const t=function py(n,e){const u=new Au([],{},{},"",{},Yt,e,null,n.root,-1,{});return new tf("",new da(u,[]))}(n,e),r=new P([new it("",{})]),i=new P({}),a=new P({}),u=new P({}),h=new P(""),_=new Xa(r,i,u,h,a,Yt,e,t.root);return _.snapshot=t.root,new Td(new da(_,[]),t)}class Xa{constructor(e,t,r,i,a,u,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(e=>vr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(e=>vr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Sd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Au{constructor(e,t,r,i,a,u,h,_,w,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tf extends fy{constructor(e,t){super(t),this.url=e,Ad(this,t)}toString(){return xd(this._root)}}function Ad(n,e){e.value._routerState=n,e.children.forEach(t=>Ad(n,t))}function xd(n){const e=n.children.length>0?` { ${n.children.map(xd).join(", ")} } `:"";return`${n.value}${e}`}function Md(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hs(e.params,t.params)||n.params.next(t.params),function Du(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function nf(n,e){const t=Hs(n.params,e.params)&&function Pt(n,e){return qt(n,e)&&n.every((t,r)=>Hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||nf(n.parent,e.parent))}function Ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rf(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ic(n,r,i);return Ic(n,r)})}(n,e,t);return new da(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>Ic(n,h)),u}}const r=function _y(n){return new Xa(new P(n.url),new P(n.params),new P(n.queryParams),new P(n.fragment),new P(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ic(n,a));return new da(r,i)}}function el(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xu(n){return"object"==typeof n&&null!=n&&n.outlets}function bg(n,e,t,r,i){let a={};if(r&&nr(r,(h,_)=>{a[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new Le(t,a,i);const u=sf(n,e,t);return new Le(u,a,i)}function sf(n,e,t){const r={};return nr(n.children,(i,a)=>{r[a]=i===e?t:sf(i,e,t)}),new Ve(n.segments,r)}class yy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&el(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(xu);if(i&&i!==Cd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class af{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ey(n,e,t){if(n||(n=new Ve([],{})),0===n.segments.length&&n.hasChildren())return Uo(n,e,t);const r=function Cb(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],h=t[r];if(xu(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ds(_,w,u))return a;r+=2}else{if(!ds(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ve(n.segments.slice(0,r.pathIndex),{});return a.children[Yt]=new Ve(n.segments.slice(r.pathIndex),n.children),Uo(a,0,i)}return r.match&&0===i.length?new Ve(n.segments,{}):r.match&&!n.hasChildren()?lf(n,e,t):r.match?Uo(n,0,i):lf(n,e,t)}function Uo(n,e,t){if(0===t.length)return new Ve(n.segments,{});{const r=function by(n){return xu(n[0])?n[0].outlets:{[Yt]:n}}(t),i={};return nr(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=Ey(n.children[u],e,a))}),nr(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Ve(n.segments,i)}}function lf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(xu(a)){const _=Mu(a.outlets);return new Ve(r,_)}if(0===i&&el(t[0])){r.push(new it(n.segments[e].path,uf(t[0]))),i++;continue}const u=xu(a)?a.outlets[Yt]:`${a}`,h=i<t.length-1?t[i+1]:null;u&&h&&el(h)?(r.push(new it(u,uf(h))),i+=2):(r.push(new it(u,{})),i++)}return new Ve(r,{})}function Mu(n){const e={};return nr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=lf(new Ve([],{}),0,t))}),e}function uf(n){const e={};return nr(n,(t,r)=>e[r]=`${t}`),e}function ds(n,e,t){return n==t.path&&Hs(e,t.parameters)}class Cg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Md(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ha(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),nr(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ha(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ha(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ha(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new mc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new js(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Md(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),Md(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function Rd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=_,u.outlet&&u.outlet.activateWith(i,_),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Pd{constructor(e,t){this.routes=e,this.module=t}}function jl(n){return"function"==typeof n}function Ru(n){return n instanceof Le}const Tc=Symbol("INITIAL_VALUE");function tl(){return Ln(n=>function Wa(...n){const e=(0,Tn.yG)(n),t=(0,Tn.jO)(n),{args:r,keys:i}=En(n);if(0===r.length)return(0,Dn.D)([],e);const a=new H.y(function ki(n,e,t=Sr.y){return r=>{Po(e,()=>{const{length:i}=n,a=new Array(i);let u=i,h=i;for(let _=0;_<i;_++)Po(e,()=>{const w=(0,Dn.D)(n[_],e);let A=!1;w.subscribe((0,Fn.x)(r,x=>{a[_]=x,A||(A=!0,h--),h||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>sa(i,u):Sr.y));return t?a.pipe(yd(t)):a}(n.map(e=>e.pipe((0,Ka.q)(1),ls(Tc)))).pipe(xr((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==Tc?i:(a===Tc&&(r=!0),r||!1!==a&&u!==t.length-1&&!Ru(a)?i:a),e)},Tc),uo(e=>e!==Tc),(0,Nt.U)(e=>Ru(e)?e:!0===e),(0,Ka.q)(1)))}class Cy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Sc,this.attachRef=null}}class Sc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Cy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ac=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=a||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new ff(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Sc),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ff{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xa?this.route:e===Sc?this.childContexts:this.parent.get(e,t)}}let pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Ac],encapsulation:2}),n})();function xc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];kd(r,gf(e,r))}}function kd(n,e){n.children&&xc(n.children,e)}function gf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function mf(n){const e=n.children&&n.children.map(mf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=pf),t}function pn(n){return n.outlet||Yt}function _f(n,e){const t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}const Dg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Dg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||aa)(t,n,e);if(!a)return Object.assign({},Dg);const u={};nr(a.posParams,(_,w)=>{u[w]=_.path});const h=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Mc(n,e,t,r,i="corrected"){if(t.length>0&&function Dy(n,e,t){return t.some(r=>Od(n,e,r)&&pn(r)!==Yt)}(n,t,r)){const u=new Ve(e,function Nd(n,e,t,r){const i={};i[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&pn(a)!==Yt){const u=new Ve([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[pn(a)]=u}return i}(n,e,r,new Ve(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function Tg(n,e,t){return t.some(r=>Od(n,e,r))}(n,t,r)){const u=new Ve(n.segments,function Iy(n,e,t,r,i,a){const u={};for(const h of r)if(Od(n,t,h)&&!i[pn(h)]){const _=new Ve([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[pn(h)]=_}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Ve(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Od(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ty(n,e,t,r){return!!(pn(n)===r||r!==Yt&&Od(e,t,n))&&("**"===n.path||Pu(e,n,t).matched)}function Sy(n,e,t){return 0===e.length&&!n.children[t]}class nl{constructor(e){this.segmentGroup=e||null}}class Jr{constructor(e){this.urlTree=e}}function fa(n){return Vs(new nl(n))}function Rc(n){return Vs(new Jr(n))}class vf{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=Mc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ve(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe((0,Nt.U)(a=>this.createUrlTree($l(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(a=>{if(a instanceof Jr)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof nl?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe((0,Nt.U)(i=>this.createUrlTree($l(i),e.queryParams,e.fragment))).pipe(Bs(i=>{throw i instanceof nl?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Ve([],{[Yt]:e}):e;return new Le(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Nt.U)(a=>new Ve([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Dn.D)(i).pipe(No(a=>{const u=r.children[a],h=_f(t,a);return this.expandSegmentGroup(e,h,u,a).pipe((0,Nt.U)(_=>({segment:_,outlet:a})))}),xr((a,u)=>(a[u.outlet]=u.segment,a),{}),function mg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((i,a)=>n(i,a,r)):Sr.y,bd(1),t?gg(e):zn(()=>new ko))}())}expandSegment(e,t,r,i,a,u){return(0,Dn.D)(r).pipe(No(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,u).pipe(Bs(w=>{if(w instanceof nl)return C(null);throw w}))),Oo(h=>!!h),Bs((h,_)=>{if(h instanceof ko||"EmptyError"===h.name)return Sy(t,i,a)?C(new Ve([],{})):fa(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,u,h){return Ty(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):fa(t):fa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Rc(a):this.lineralizeSegments(r,a).pipe((0,Wn.z)(u=>{const h=new Ve(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:A}=Pu(t,i,a);if(!h)return fa(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?Rc(x):this.lineralizeSegments(i,x).pipe((0,Wn.z)(O=>this.expandSegment(e,t,r,O.concat(w),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?C(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Nt.U)(x=>(r._loadedConfig=x,new Ve(i,{})))):C(new Ve(i,{}));const{matched:u,consumedSegments:h,remainingSegments:_}=Pu(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Wn.z)(A=>{const x=A.module,O=A.routes,{segmentGroup:$,slicedSegments:Y}=Mc(t,h,_,O),Ie=new Ve($.segments,$.children);if(0===Y.length&&Ie.hasChildren())return this.expandChildren(x,O,Ie).pipe((0,Nt.U)(kt=>new Ve(h,kt)));if(0===O.length&&0===Y.length)return C(new Ve(h,{}));const je=pn(r)===a;return this.expandSegment(x,Ie,O,Y,je?Yt:a,!0).pipe((0,Nt.U)(tt=>new Ve(h.concat(tt.segments),tt.children)))})):fa(t)}getChildConfig(e,t,r){return t.children?C(new Pd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?C(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Wn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Nt.U)(a=>(t._loadedConfig=a,a))):function li(n){return Vs(Lo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):C(new Pd([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?C(i.map(u=>{const h=e.get(u);let _;if(function cf(n){return n&&jl(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!jl(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return Oi(_)})).pipe(tl(),(0,vi.b)(u=>{if(!Ru(u))return;const h=Lo(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,Nt.U)(u=>!0===u)):C(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return C(r);if(i.numberOfChildren>1||!i.children[Yt])return Vs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Le(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return nr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return nr(t.children,(h,_)=>{u[_]=this.createSegmentGroup(e,h,r,i)}),new Ve(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function $l(n){const e={};for(const r of Object.keys(n.children)){const a=$l(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function hs(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new Ve(n.segments.concat(e.segments),e.children)}return n}(new Ve(n.segments,e))}class Sg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gl{constructor(e,t){this.component=e,this.route=t}}function bf(n,e,t){const r=n._root;return Li(r,e?e._root:null,t,[r.value])}function Pc(n,e,t){const r=function Ay(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Li(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ha(e);return n.children.forEach(u=>{(function xg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function xy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qt(n.url,e.url)||!Hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nf(n,e)||!Hs(n.queryParams,e.queryParams);default:return!nf(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Sg(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Li(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Gl(h.outlet.component,u))}else u&&ql(e,h,i),i.canActivateChecks.push(new Sg(r)),Li(n,null,a.component?h?h.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),nr(a,(u,h)=>ql(u,t.getContext(h),i)),i}function ql(n,e,t){const r=ha(n),i=n.value;nr(r,(a,u)=>{ql(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Gl(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class If{}function Df(n){return new H.y(e=>e.error(n))}class Tf{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=Mc(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const r=new Au([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new da(r,t),a=new tf(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=gy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],h=_f(e,a),_=this.processSegmentGroup(h,u,a);if(null===_)return null;r.push(..._)}const i=Rg(r);return function ky(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return Sy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ty(e,t,r,i))return null;let a,u=[],h=[];if("**"===e.path){const $=r.length>0?Cd(r).parameters:{};a=new Au(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),pn(e),e.component,e,f(t),g(t)+r.length,M(e))}else{const $=Pu(t,e,r);if(!$.matched)return null;u=$.consumedSegments,h=$.remainingSegments,a=new Au(u,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,b(e),pn(e),e.component,e,f(t),g(t)+u.length,M(e))}const _=function Ny(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:A}=Mc(t,u,h,_.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);if(0===A.length&&w.hasChildren()){const $=this.processChildren(_,w);return null===$?null:[new da(a,$)]}if(0===_.length&&0===A.length)return[new da(a,[])];const x=pn(e)===i,O=this.processSegment(_,w,A,x?Yt:i);return null===O?null:[new da(a,O)]}}function Oy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rg(n){const e=[],t=new Set;for(const r of n){if(!Oy(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rg(r.children);e.push(new da(r.value,i))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function b(n){return n.data||{}}function M(n){return n.resolve||{}}function st(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _t(n){return Ln(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,Nt.U)(()=>e)):C(e)})}class Nc extends class qs{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ku=new m.OlP("ROUTES");class Nu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Nt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new Pd($s(u.injector.get(ku,void 0,m.XFs.Self|m.XFs.Optional)).map(mf),u)}),Bs(a=>{throw t._loader$=void 0,a}));return t._loader$=new wd(i,()=>new D.x).pipe(as()),t._loader$}loadModuleFactory(e){return Oi(e()).pipe((0,Wn.z)(t=>t instanceof m.YKP?C(t):(0,Dn.D)(this.compiler.compileModuleAsync(t))))}}class Fy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function rl(n){throw n}function Fd(n,e,t){return e.parse("/")}function Ld(n,e){return C(null)}const Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lr=(()=>{class n{constructor(t,r,i,a,u,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new D.x,this.errorHandler=rl,this.malformedUriErrorHandler=Fd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ld,afterPreactivation:Ld},this.urlHandlingStrategy=new Fy,this.routeReuseStrategy=new Nc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(m.h0i),this.console=u.get(m.c2e);const x=u.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function wc(){return new Le(new Ve([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Nu(u,h,O=>this.triggerEvent(new gc(O)),O=>this.triggerEvent(new ho(O))),this.routerState=Bl(this.currentUrlTree,this.rootComponentType),this.transitions=new P({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(uo(i=>0!==i.id),(0,Nt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ln(i=>{let a=!1,u=!1;return C(i).pipe((0,vi.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ln(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Pg(h.source)&&(this.browserUrlTree=h.extractedUrl),C(h).pipe(Ln(x=>{const O=this.transitions.getValue();return r.next(new co(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?za.E:Promise.resolve(x)}),function wf(n,e,t,r){return Ln(i=>function Hl(n,e,t,r,i){return new vf(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Nt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vi.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function F(n,e,t,r,i){return(0,Wn.z)(a=>function Py(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new Tf(n,e,t,r,i,a).recognize();return null===u?Df(new If):C(u)}catch(u){return Df(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Nt.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vi.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl($,x)}this.browserUrlTree=x.urlAfterRedirects}const O=new Ya(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(O)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:$,source:Y,restoredState:Ie,extras:je}=h,At=new co(O,this.serializeUrl($),Y,Ie);r.next(At);const tt=Bl($,this.rootComponentType).snapshot;return C(Object.assign(Object.assign({},h),{targetSnapshot:tt,urlAfterRedirects:$,extras:Object.assign(Object.assign({},je),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),za.E}),_t(h=>{const{targetSnapshot:_,id:w,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,vi.b)(h=>{const _=new yg(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,Nt.U)(h=>Object.assign(Object.assign({},h),{guards:bf(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function My(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?C(Object.assign(Object.assign({},t),{guardsResult:!0})):function Mg(n,e,t,r){return(0,Dn.D)(n).pipe((0,Wn.z)(i=>function kc(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?C(a.map(h=>{const _=Pc(h,e,i);let w;if(function Ib(n){return n&&jl(n.canDeactivate)}(_))w=Oi(_.canDeactivate(n,e,t,r));else{if(!jl(_))throw new Error("Invalid CanDeactivate guard");w=Oi(_(n,e,t,r))}return w.pipe(Oo())})).pipe(tl()):C(!0)}(i.component,i.route,t,e,r)),Oo(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Wn.z)(h=>h&&function Ig(n){return"boolean"==typeof n}(h)?function Xr(n,e,t,r){return(0,Dn.D)(e).pipe(No(i=>vd(function Cf(n,e){return null!==n&&e&&e(new us(n)),C(!0)}(i.route.parent,r),function Ef(n,e){return null!==n&&e&&e(new Vl(n)),C(!0)}(i.route,r),function pa(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function Ag(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>os(()=>C(u.guards.map(_=>{const w=Pc(_,u.node,t);let A;if(function hf(n){return n&&jl(n.canActivateChild)}(w))A=Oi(w.canActivateChild(r,n));else{if(!jl(w))throw new Error("Invalid CanActivateChild guard");A=Oi(w(r,n))}return A.pipe(Oo())})).pipe(tl())));return C(a).pipe(tl())}(n,i.path,t),function Ry(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return C(!0);const i=r.map(a=>os(()=>{const u=Pc(a,e,t);let h;if(function df(n){return n&&jl(n.canActivate)}(u))h=Oi(u.canActivate(e,n));else{if(!jl(u))throw new Error("Invalid CanActivate guard");h=Oi(u(e,n))}return h.pipe(Oo())}));return C(i).pipe(tl())}(n,i.route,t))),Oo(i=>!0!==i,!0))}(r,a,n,e):C(h)),(0,Nt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,vi.b)(h=>{if(Ru(h.guardsResult)){const w=Lo(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new pc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),uo(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),_t(h=>{if(h.guards.canActivateChecks.length)return C(h).pipe((0,vi.b)(_=>{const w=new Fr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Ln(_=>{let w=!1;return C(_).pipe(function ee(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return C(t);let a=0;return(0,Dn.D)(i).pipe(No(u=>function pe(n,e,t,r){return function Ke(n,e,t,r){const i=st(n);if(0===i.length)return C({});const a={};return(0,Dn.D)(i).pipe((0,Wn.z)(u=>function St(n,e,t,r){const i=Pc(n,e,r);return Oi(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,vi.b)(h=>{a[u]=h}))),bd(1),(0,Wn.z)(()=>st(a).length===i.length?C(a):za.E))}(n._resolve,n,e,r).pipe((0,Nt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),gy(n,t).resolve),null)))}(u.route,r,n,e)),(0,vi.b)(()=>a++),bd(1),(0,Wn.z)(u=>a===i.length?C(t):za.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vi.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,vi.b)(_=>{const w=new Ni(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),_t(h=>{const{targetSnapshot:_,id:w,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,Nt.U)(h=>{const _=function my(n,e,t){const r=Ic(n,e._root,t?t._root:void 0);return new Td(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,vi.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Nt.U)(r=>(new Cg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,vi.b)({next(){a=!0},complete(){a=!0}}),function _g(n){return(0,Ar.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Bs(h=>{if(u=!0,function Ed(n){return n&&n[vc]}(h)){const _=Ru(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Bn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pg(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new fc(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return za.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const _=Object.assign({},u);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xc(t),this.config=t.map(mf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,A=_?this.currentUrlTree.fragment:u;let x=null;switch(h){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),function Vo(n,e,t,r,i){if(0===t.length)return bg(e.root,e.root,e.root,r,i);const a=function vy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return nr(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new yy(t,e,r)}(t);if(a.toRoot())return bg(e.root,e.root,new Ve([],{}),r,i);const u=function Eg(n,e,t){if(n.isAbsolute)return new af(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new af(a,a===e.root,0)}const r=el(n.commands[0])?0:1;return function wy(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new af(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=u.processChildren?Uo(u.segmentGroup,u.index,a.commands):Ey(u.segmentGroup,u.index,a.commands);return bg(e.root,u.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ru(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function xf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Af):!1===r?Object.assign({},Vd):r,Ru(t))return Su(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Su(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Iu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var h,_;if(this.disposed)return Promise.resolve(!1);let w,A,x;u?(w=u.resolve,A=u.reject,x=u.promise):x=new Promise((Y,Ie)=>{w=Y,A=Ie});const O=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):$=0,this.setTransition({id:O,targetPageId:$,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:A,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Bn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Pg(n){return"imperative"!==n}let kg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new D.x,this.subscription=t.events.subscribe(a=>{a instanceof Iu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Ud(this.skipLocationChange),replaceUrl:Ud(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ud(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Lr),m.Y36(Xa),m.Y36(ve))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function Ud(n){return""===n||!!n}class Uy{}class Tb{preload(e,t){return C(null)}}let Sb=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Nu(i,r,_=>t.triggerEvent(new gc(_)),_=>t.triggerEvent(new ho(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(uo(t=>t instanceof Iu),No(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Dn.D)(i).pipe((0,Us.J)(),(0,Nt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?C(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Wn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Lr),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(Uy))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ng=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Iu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _c&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _c(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new m.OlP("ROUTER_CONFIGURATION"),jy=new m.OlP("ROUTER_FORROOT_GUARD"),Ab=[Te,{provide:rr,useClass:Kn},{provide:Lr,useFactory:function $y(n,e,t,r,i,a,u={},h,_){const w=new Lr(null,n,e,t,r,i,$s(a));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function Rb(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,w),u.enableTracing&&w.events.subscribe(A=>{var x,O;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(O=console.groupEnd)||void 0===O||O.call(console)}),w},deps:[rr,Sc,Te,m.zs3,m.Sil,ku,po,[class Sf{},new m.FiY],[class Zn{},new m.FiY]]},Sc,{provide:Xa,useFactory:function Fg(n){return n.routerState.root},deps:[Lr]},Sb,Tb,class By{preload(e,t){return t().pipe(Bs(()=>C(null)))}},{provide:po,useValue:{enableTracing:!1}}];function fT(){return new m.PXZ("Router",Lr)}let Og=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Ab,Hy(t),{provide:jy,useFactory:Mb,deps:[[Lr,new m.FiY,new m.tp0]]},{provide:po,useValue:r||{}},{provide:ve,useFactory:xb,deps:[me,[new m.tBr(rt),new m.FiY],po]},{provide:Ng,useFactory:pT,deps:[Lr,Ra,po]},{provide:Uy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Tb},{provide:m.PXZ,multi:!0,useFactory:fT},[Bd,{provide:m.ip1,multi:!0,useFactory:Pb,deps:[Bd]},{provide:qy,useFactory:Gy,deps:[Bd]},{provide:m.tb,multi:!0,useExisting:qy}]]}}static forChild(t){return{ngModule:n,providers:[Hy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(jy,8),m.LFG(Lr,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function pT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ng(n,e,t)}function xb(n,e,t={}){return t.useHash?new Pe(n,e):new et(n,e)}function Mb(n){return"guarded"}function Hy(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:ku,multi:!0,useValue:n}]}let Bd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new D.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Lr),u=this.injector.get(po);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?C(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(po),i=this.injector.get(Sb),a=this.injector.get(Ng),u=this.injector.get(Lr),h=this.injector.get(m.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Pb(n){return n.appInitializer.bind(n)}function Gy(n){return n.bootstrapListener.bind(n)}const qy=new m.OlP("Router Initializer");let gT=(()=>{class n{constructor(){this.title="login",this.mitipo="text"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[Ac],styles:[""]}),n})();var Ee=U(5861);class kb{constructor(){this.correo="",this.contrasena=""}}let zy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Wl=(()=>{class n extends zy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const ga=new m.OlP("NgValueAccessor"),_T={provide:ga,useExisting:(0,m.Gpc)(()=>Mf),multi:!0},yT=new m.OlP("CompositionEventMode");let Mf=(()=>{class n extends zy{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nb(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(yT,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([_T]),m.qOj]}),n})();function ui(n){return null==n||0===n.length}function Ob(n){return null!=n&&"number"==typeof n.length}const wi=new m.OlP("NgValidators"),Ou=new m.OlP("NgAsyncValidators"),vT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class il{static min(e){return function Fb(n){return e=>{if(ui(e.value)||ui(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Zy(n){return e=>{if(ui(e.value)||ui(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Lb(n){return ui(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Vb(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ub(n){return ui(n.value)||vT.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ht(n){return e=>ui(e.value)||!Ob(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Yy(n){return e=>Ob(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Qy(n){if(!n)return Rf;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ui(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Vg(e)}static composeAsync(e){return Bg(e)}}function Rf(n){return null}function Pf(n){return null!=n}function Bo(n){const e=(0,m.QGY)(n)?(0,Dn.D)(n):n;return(0,m.CqO)(e),e}function Jy(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Bb(n,e){return e.map(t=>t(n))}function sl(n){return n.map(e=>function Xy(n){return!n.validate}(e)?e:t=>e.validate(t))}function Vg(n){if(!n)return null;const e=n.filter(Pf);return 0==e.length?null:function(t){return Jy(Bb(t,e))}}function Ug(n){return null!=n?Vg(sl(n)):null}function Bg(n){if(!n)return null;const e=n.filter(Pf);return 0==e.length?null:function(t){return function mT(...n){const e=(0,Tn.jO)(n),{args:t,keys:r}=En(n),i=new H.y(a=>{const{length:u}=t;if(!u)return void a.complete();const h=new Array(u);let _=u,w=u;for(let A=0;A<u;A++){let x=!1;(0,oa.Xf)(t[A]).subscribe((0,Fn.x)(a,O=>{x||(x=!0,w--),h[A]=O},()=>_--,void 0,()=>{(!_||!x)&&(w||a.next(r?sa(r,h):h),a.complete())}))}});return e?i.pipe(yd(e)):i}(Bb(t,e).map(Bo)).pipe((0,Nt.U)(Jy))}}function jb(n){return null!=n?Bg(sl(n)):null}function ev(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wT(n){return n._rawValidators}function kf(n){return n._rawAsyncValidators}function jd(n){return n?Array.isArray(n)?n:[n]:[]}function Hd(n,e){return Array.isArray(n)?n.includes(e):n===e}function jg(n,e){const t=jd(e);return jd(n).forEach(i=>{Hd(t,i)||t.push(i)}),t}function Hg(n,e){return jd(e).filter(t=>!Hd(n,t))}class bT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ug(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fu extends bT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fs extends bT{get formDirective(){return null}get path(){return null}}class Hb{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let $b=(()=>{class n extends Hb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Fu,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})(),tv=(()=>{class n extends Hb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(fs,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[m.qOj]}),n})();function Of(n,e){Lf(n,e),e.valueAccessor.writeValue(n.value),function Vu(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Kb(n,e)})}(n,e),function iv(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Kb(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Wb(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ff(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$g(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Gd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Lf(n,e){const t=wT(n);null!==e.validator?n.setValidators(ev(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=kf(n);null!==e.asyncValidator?n.setAsyncValidators(ev(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Gd(e._rawValidators,i),Gd(e._rawAsyncValidators,i)}function $g(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=wT(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=kf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Gd(e._rawValidators,r),Gd(e._rawAsyncValidators,r),t}function Kb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Oc="VALID",Kd="INVALID",Fc="PENDING",Bu="DISABLED";function qg(n){return(zg(n)?n.validators:n)||null}function ST(n){return Array.isArray(n)?Ug(n):n||null}function Wg(n,e){return(zg(e)?e.asyncValidators:n)||null}function ov(n){return Array.isArray(n)?jb(n):n||null}function zg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Kg=n=>n instanceof tE,Zg=n=>n instanceof Bf,Qb=n=>n instanceof AT;function Ws(n){return Kg(n)?n.value:n.getRawValue()}function Jb(n,e){const t=Zg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function Xb(n,e){Zg(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new m.vHH(1002,"")})}class eE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ST(this._rawValidators),this._composedAsyncValidatorFn=ov(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Oc}get invalid(){return this.status===Kd}get pending(){return this.status==Fc}get disabled(){return this.status===Bu}get enabled(){return this.status!==Bu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ST(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ov(e)}addValidators(e){this.setValidators(jg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Hg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Hg(e,this._rawAsyncValidators))}hasValidator(e){return Hd(this._rawValidators,e)}hasAsyncValidator(e){return Hd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Oc,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oc||this.status===Fc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bu:Oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fc,this._hasOwnPendingAsyncValidator=!0;const t=Bo(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function TT(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Zg(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:Qb(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?Bu:this.errors?Kd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fc)?Fc:this._anyControlsHaveStatus(Kd)?Kd:Oc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class tE extends eE{constructor(e=null,t,r){super(qg(t),Wg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zg(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Bf extends eE{constructor(e,t,r){super(qg(t),Wg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Xb(this,e),Object.keys(e).forEach(r=>{Jb(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Ws(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class AT extends eE{constructor(e,t,r){super(qg(t),Wg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Xb(this,e),e.forEach((r,i)=>{Jb(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Ws(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let uv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),kT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const jf=new m.OlP("NgModelWithFormControlWarning"),Jg={provide:fs,useExisting:(0,m.Gpc)(()=>Vc)};let Vc=(()=>{class n extends fs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($g(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Of(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ff(t.control||null,t,!1),sv(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function zd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ff(r||null,t),Kg(i)&&(Of(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Zb(n,e){Lf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Yb(n,e){return $g(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lf(this.form,this),this._oldForm&&$g(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(wi,10),m.Y36(Ou,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Jg]),m.qOj,m.TTD]}),n})();const LT={provide:Fu,useExisting:(0,m.Gpc)(()=>Zd)};let Zd=(()=>{class n extends Fu{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Uu(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Mf?t=a:function Wd(n){return Object.getPrototypeOf(n.constructor)===Wl}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Uf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function $d(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(m.Y36(fs,13),m.Y36(wi,10),m.Y36(Ou,10),m.Y36(ga,10),m.Y36(jf,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([LT]),m.qOj,m.TTD]}),n})(),bE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[kT]]}),n})(),ma=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[bE]}),n})(),nm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[bE]}),n})(),vv=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,a=null,u=null;return null!=r&&(function EE(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,u=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,u=null!=r.asyncValidator?r.asyncValidator:null)),new Bf(i,{asyncValidators:u,updateOn:h,validators:a})}control(t,r,i){return new tE(t,r,i)}array(t,r,i){const a=t.map(u=>this._createControl(u));return new AT(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return Kg(t)||Zg(t)||Qb(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:nm}),n})();var CE=U(5226),IE=U.n(CE),wv=U(6451),rm=U(5363),$T=U(6063);class DE extends D.x{constructor(e=1/0,t=1/0,r=$T.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)h=_;h&&r.splice(0,h+1)}}}var GT=U(3099);function bv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,GT.B)({connector:()=>new DE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function TE(n,e){return(0,Fl.m)(e)?Ln(()=>n,e):Ln(()=>n)}var Ev=U(9468),Cn=U(5813),ci=U(2011);U(5867);var ps=U(9681),_a=U(4859),L=U(2090),ya=U(1877);const PE=new Map,om={activated:!1,tokenObservers:[]},Yd={initialized:!1,enabled:!1};function di(n){return PE.get(n)||om}function gs(n,e){PE.set(n,e)}function am(){return Yd}class lm{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function jo(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vr=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Hc(n){if(!di(n).activated)throw Vr.create("use-before-activation",{appName:n.name})}function Hu(n,e){return $u.apply(this,arguments)}function $u(){return($u=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,a)}catch(x){throw Vr.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==u.status)throw Vr.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(x){throw Vr.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),A=Date.now();return{token:h.attestationToken,expireTimeMillis:A+w,issuedAtTimeMillis:A}})).apply(this,arguments)}function NE(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Xd="firebase-app-check-store";let qf=null;function Sv(){return qf||(qf=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xd,{keyPath:"compositeKey"})}}catch(t){e(Vr.create("storage-open",{originalErrorMessage:t.message}))}}),qf)}function um(){return(um=(0,Ee.Z)(function*(n,e){const r=(yield Sv()).transaction(Xd,"readwrite"),a=r.objectStore(Xd).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var w;h(Vr.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Wf=new ya.Yd("@firebase/app-check");function HE(n,e){return(0,L.hl)()?function KT(n,e){return function UE(n,e){return um.apply(this,arguments)}(function xv(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cm(){return am().enabled}function dm(){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,Ee.Z)(function*(){const n=am();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const FP={error:"UNKNOWN_ERROR"};function LP(n){return L.US.encodeString(JSON.stringify(n),!1)}function hm(n){return fm.apply(this,arguments)}function fm(){return(fm=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Hc(t);const r=di(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&pm(_)&&(i=_)}if(!e&&i&&pm(i))return{token:i.token};let h,u=!1;if(cm()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hu(NE(t,yield dm()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),u=!0);const _=yield r.exchangeTokenPromise;return yield HE(t,_),gs(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Wf.warn(_.message):Wf.error(_),a=_}return i?(h={token:i.token},gs(t,Object.assign(Object.assign({},r),{token:i})),yield HE(t,i)):h=GE(a),u&&Nv(t,h),h})).apply(this,arguments)}function kv(n,e){const t=di(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),gs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function $c(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function YT(n){const{app:e}=n;return new lm((0,Ee.Z)(function*(){let r;if(r=di(e).token?yield hm(n,!0):yield hm(n),r.error)throw r.error}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),gs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Nv(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function pm(n){return n.expireTimeMillis-Date.now()>0}function GE(n){return{token:LP(FP),error:n}}class gm{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)kv(this.app,t.next);return Promise.resolve()}}const wm="app-check-internal";!function ZE(){(0,ps._registerComponent)(new _a.wA("app-check",n=>function QT(n,e){return new gm(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wm).initialize()})),(0,ps._registerComponent)(new _a.wA(wm,n=>function qE(n){return{getToken:e=>hm(n,e),addTokenListener:e=>function $E(n,e,t,r){const{app:i}=n,a=di(i),u={next:t,error:r,type:e};if(gs(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&pm(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),$c(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>$c(n))}(n,"INTERNAL",e),removeTokenListener:e=>kv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ps.registerVersion)("@firebase/app-check","0.5.5")}();class th{constructor(){return(0,Cn.vb)("app-check")}}"undefined"!=typeof window&&window;var Yf=U(127);const bm=new m.OlP("angularfire2.auth.use-emulator"),Em=new m.OlP("angularfire2.auth.settings"),Cm=new m.OlP("angularfire2.auth.tenant-id"),Im=new m.OlP("angularfire2.auth.langugage-code"),eC=new m.OlP("angularfire2.auth.use-device-language"),Hv=new m.OlP("angularfire.auth.persistence"),$v=(n,e,t,r,i,a,u,h)=>(0,ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[w,A]of Object.entries(u))_.settings[w]=A;return h&&_.setPersistence(h),_},[t,r,i,a,u,h]);let nh=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,O,$){const Y=new D.x,Ie=C(void 0).pipe((0,rm.Q)(u.outsideAngular),Ln(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4087)))),(0,Nt.U)(()=>(0,ci.on)(t,a,r)),(0,Nt.U)(je=>$v(je,a,h,w,A,x,_,O)),bv({bufferSize:1,refCount:!1}));if(gr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=C(null);else{Ie.pipe(Oo()).subscribe();const At=Ie.pipe(Ln(ct=>ct.getRedirectResult().then(zt=>zt,()=>null)),Cn.iC,bv({bufferSize:1,refCount:!1})),tt=Ie.pipe(Ln(ct=>new H.y(zt=>({unsubscribe:a.runOutsideAngular(()=>ct.onAuthStateChanged(Kt=>zt.next(Kt),Kt=>zt.error(Kt),()=>zt.complete()))})))),kt=Ie.pipe(Ln(ct=>new H.y(zt=>({unsubscribe:a.runOutsideAngular(()=>ct.onIdTokenChanged(Kt=>zt.next(Kt),Kt=>zt.error(Kt),()=>zt.complete()))}))));this.authState=At.pipe(TE(tt),(0,Ev.R)(u.outsideAngular),(0,rm.Q)(u.insideAngular)),this.user=At.pipe(TE(kt),(0,Ev.R)(u.outsideAngular),(0,rm.Q)(u.insideAngular)),this.idToken=this.user.pipe(Ln(ct=>ct?(0,Dn.D)(ct.getIdToken()):C(null))),this.idTokenResult=this.user.pipe(Ln(ct=>ct?(0,Dn.D)(ct.getIdTokenResult()):C(null))),this.credential=(0,wv.T)(At,Y,this.authState.pipe(uo(ct=>!ct))).pipe((0,Nt.U)(ct=>(null==ct?void 0:ct.user)?ct:null),(0,Ev.R)(u.outsideAngular),(0,rm.Q)(u.insideAngular))}return(0,ci.pX)(this,Ie,a,{spy:{apply:(je,At,tt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&tt.then(kt=>Y.next(kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ci.Dh),m.LFG(ci.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Cn.HU),m.LFG(bm,8),m.LFG(Em,8),m.LFG(Cm,8),m.LFG(Im,8),m.LFG(eC,8),m.LFG(Hv,8),m.LFG(th,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fS=(()=>{class n{constructor(){Yf.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[nh]}),n})(),wr=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.isLoggged=!1,this.message="",this.error="",t.authState.subscribe(i=>this.isLoggged=i)}getUser(){return this.afAuth.user}login(t){var r=this;return(0,Ee.Z)(function*(){r.afAuth.signInWithEmailAndPassword(t.correo,t.contrasena).then(i=>{console.log("Funcion\xf3,usuario ingresado"),localStorage.setItem("usuario",t.correo),r.router.navigateByUrl("/home")}).catch(i=>{r.message="auth/user-not-found"===i.code?"El correo ingresado no est\xe1 registrado,ingrese uno nuevo o dirijase al registro.":"Ocurrio un error,vuelva a intentar.",console.log(i.code),IE().fire({title:"Error al ingresar",text:r.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"OK!"})})})()}salir(){this.afAuth.signOut(),this.router.navigateByUrl("/login")}registrar(t){this.afAuth.createUserWithEmailAndPassword(t.correo,t.contrasena).then(r=>{console.log("Funcion\xf3,usuario registrado"),localStorage.setItem("usuario",t.correo),this.router.navigateByUrl("/home")}).catch(r=>{this.message="auth/email-already-in-use"===r.code?"El correo ingresado no est\xe1 disponible, ingresar uno nuevo.":"Ocurrio un error,vuelva a intentar.",console.log(r),IE().fire({title:"Error al registrarse",text:this.message,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"OK!"})})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(nh),m.LFG(Lr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tC(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," El correo debe tener un formato valido. "),m.qZA())}function pS(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," El correo no puede quedar vacio. "),m.qZA())}function gS(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," La contrase\xf1a no puede quedar vacia. "),m.qZA())}function nC(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," La contrase\xf1a debe tener por lo menos los 6 minimos caracteres para ser valida. "),m.qZA())}let mS=(()=>{class n{constructor(t,r,i){this.authSvc=t,this.router=r,this.fb=i,this.miUsuario=new kb,this.user={email:"",password:""},this.isEmail=/\S+@\S+\.\S+/}ngOnInit(){this.initForm()}registrar(){this.router.navigateByUrl("/registro")}onLogin(){var t=this;return(0,Ee.Z)(function*(){if(t.formularioContacto.valid)try{yield t.authSvc.login(t.miUsuario)}catch(r){console.log(r)}})()}admin(){this.miUsuario.correo="gise11@gmail.com",this.miUsuario.contrasena="00000000"}invitado(){this.miUsuario.correo="gise12@gmail.com",this.miUsuario.contrasena="00000000"}notRequiredHasValue(t){var r;return(null===(r=this.formularioContacto.get(t))||void 0===r?void 0:r.value)?"is-valid":""}isValidField(t){const r=this.formularioContacto.get(t);return!(null==r?void 0:r.valid)&&(null==r?void 0:r.touched)?"is-invalid":(null==r?void 0:r.touched)?"is-valid":""}initForm(){this.formularioContacto=this.fb.group({correo:["",[il.required,il.pattern(this.isEmail)]],contrase\u00f1a:["",[il.required,il.minLength(6),il.maxLength(10)]]})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(wr),m.Y36(Lr),m.Y36(vv))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:12,consts:[[1,"body"],[1,"grad"],[1,"header"],[1,"login"],["name","form",3,"formGroup"],[1,"form-group"],["type","text","placeholder","ingrese correo","formControlName","correo",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],[4,"ngIf"],["type","password","placeholder","ingrese contrase\xf1a","formControlName","contrase\xf1a",1,"form-control",3,"ngModel","ngModelChange"],["type","button","value","Ingresar",3,"click"],["type","button","value","Ingresar como admin",3,"click"],["type","button","value","Ingresar como invitado",3,"click"],["type","button","value","Registrar",3,"click"]],template:function(t,r){if(1&t&&(m._UZ(0,"div",0)(1,"div",1),m.TgZ(2,"div",2)(3,"div"),m._uU(4,"Sala"),m.TgZ(5,"span"),m._uU(6,"de"),m.qZA(),m._uU(7,"Juegos"),m.qZA()(),m._UZ(8,"br"),m.TgZ(9,"div",3)(10,"form",4)(11,"div",5)(12,"input",6),m.NdJ("ngModelChange",function(a){return r.miUsuario.correo=a}),m.qZA(),m.TgZ(13,"div",7),m.YNc(14,tC,2,0,"span",8),m.YNc(15,pS,2,0,"span",8),m.qZA(),m.TgZ(16,"input",9),m.NdJ("ngModelChange",function(a){return r.miUsuario.contrasena=a}),m.qZA(),m.TgZ(17,"div",7),m.YNc(18,gS,2,0,"span",8),m.YNc(19,nC,2,0,"span",8),m.qZA()(),m.TgZ(20,"input",10),m.NdJ("click",function(){return r.onLogin()}),m.qZA(),m.TgZ(21,"input",11),m.NdJ("click",function(){return r.admin()}),m.qZA(),m.TgZ(22,"input",12),m.NdJ("click",function(){return r.invitado()}),m.qZA(),m._UZ(23,"br"),m.TgZ(24,"div")(25,"span"),m._uU(26),m.qZA()(),m.TgZ(27,"h2"),m._uU(28,"No tienes usuario registrado?"),m.qZA(),m.TgZ(29,"input",13),m.NdJ("click",function(){return r.registrar()}),m.qZA()()()),2&t){let i,a,u,h;m.xp6(10),m.Q6J("formGroup",r.formularioContacto),m.xp6(2),m.Tol(r.isValidField("correo")),m.Q6J("ngModel",r.miUsuario.correo),m.xp6(2),m.Q6J("ngIf",null==(i=r.formularioContacto.get("correo"))||null==i.errors?null:i.errors.pattern),m.xp6(1),m.Q6J("ngIf",null==(a=r.formularioContacto.get("correo"))||null==a.errors?null:a.errors.required),m.xp6(1),m.Tol(r.isValidField("contrase\xf1a")),m.Q6J("ngModel",r.miUsuario.contrasena),m.xp6(2),m.Q6J("ngIf",null==(u=r.formularioContacto.get("contrase\xf1a"))||null==u.errors?null:u.errors.required),m.xp6(1),m.Q6J("ngIf",null==(h=r.formularioContacto.get("contrase\xf1a"))||null==h.errors?null:h.errors.minlength),m.xp6(7),m.Oqu(r.resultado)}},directives:[uv,tv,Vc,Mf,$b,Zd,Or],styles:['@import"https://fonts.googleapis.com/css?family=Exo:100,200,400";@import"https://fonts.googleapis.com/css?family=Source+Sans+Pro:700,400,300";body[_ngcontent-%COMP%]{margin:0;padding:0;background:#fff;color:#fff;font-family:Arial;font-size:12px}.h2[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:35px;font-weight:200}span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.body[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background-image:url(fondologin.964b5b5c2b519987.jpg);background-size:cover;z-index:0}.grad[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(0,0,0,0)),color-stop(100%,rgba(0,0,0,.65)));z-index:1;opacity:.7}.header[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 35px);left:calc(50% - 255px);z-index:2}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:35px;font-weight:200}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5379fa!important}.login[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 75px);left:calc(50% - 50px);height:150px;width:350px;padding:10px;z-index:2}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px}.login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:20px;font-weight:200;width:250px;height:30px}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:260px;height:35px;background:#fff;border:1px solid #fff;cursor:pointer;border-radius:2px;color:#a18d6c;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:6px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{opacity:.8}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active{opacity:.6}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff9}[_ngcontent-%COMP%]::-moz-input-placeholder{color:#fff9}']}),n})(),Dm=(()=>{class n{constructor(){}ngOnInit(){(null!==localStorage.getItem("usuario")||""!==localStorage.getItem("usuario"))&&(this.usuario=localStorage.getItem("usuario"))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-menu"]],decls:17,vars:1,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["type","button","data-toggle","collapse","data-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],[1,"nav-link"],["routerLink","/home",1,"nav-link"],[1,"nav-item"],["routerLink","/quiensoy",1,"nav-link"],["routerLink","/login",1,"nav-link"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"button",1),m._UZ(2,"span",2),m.qZA(),m.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),m._uU(7),m.qZA()(),m.TgZ(8,"li",5)(9,"a",7),m._uU(10,"Home"),m.qZA()(),m.TgZ(11,"li",8)(12,"a",9),m._uU(13,"Quien soy"),m.qZA()(),m.TgZ(14,"li",8)(15,"a",10),m._uU(16,"Salir"),m.qZA()()()()()),2&t&&(m.xp6(7),m.hij("Bienvenido ",r.usuario,""))},directives:[kg],styles:[""]}),n})(),rC=(()=>{class n{constructor(t,r){this.router=t,this.afAuth=r}ngOnInit(){}iraLogin(){this.afAuth.salir()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Lr),m.Y36(wr))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,consts:[[1,"body"]],template:function(t,r){1&t&&m._UZ(0,"div",0)(1,"app-menu")},directives:[Dm],styles:[".inner[_ngcontent-%COMP%]{background-color:#000}.masthead-brand[_ngcontent-%COMP%]{margin-bottom:10}a[_ngcontent-%COMP%]{font-size:30px;color:#060505}.btn-secondary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:focus{color:#020202;text-shadow:none;background-color:#000;border:.05rem solid rgb(36,35,35)}body[_ngcontent-%COMP%]{margin:0;padding:0;background:rgb(17,17,17);color:#0b0202;font-family:Arial;font-size:12px}.body[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background-image:url(fondologin.964b5b5c2b519987.jpg);background-size:cover;-webkit-filter:blur(5px);z-index:0}.header[_ngcontent-%COMP%]{position:absolute;top:calc(10% - 35px);left:calc(50% - 255px);z-index:2}.masthead[_ngcontent-%COMP%]{margin-bottom:2rem}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{border-bottom-color:#00000040}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.25rem 0}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%] + .nav-link[_ngcontent-%COMP%]{margin-left:2rem}body[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem;color:#5a5a5a}.carousel[_ngcontent-%COMP%]{margin-bottom:4rem}.carousel-caption[_ngcontent-%COMP%]{bottom:3rem;z-index:10}.carousel-item[_ngcontent-%COMP%]{height:32rem;background-color:#777}.carousel-item[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;min-width:100%;height:32rem}.marketing[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}.marketing[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:.75rem;margin-left:.75rem}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}.featurette-heading[_ngcontent-%COMP%]{font-weight:300;line-height:1;letter-spacing:-.05rem}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}"]}),n})(),rh=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-quien-soy"]],decls:13,vars:0,consts:[[1,"body"],[1,"row","featurette"],[1,"conteiner"],[1,"col-md-7"],[1,"featurette-heading"],[1,"text-muted"],[1,"lead"],[1,"col-md-5"],["src","../../assets/imagenes/yo.jpg","alt","Generic placeholder image",1,"featurette-image","img-fluid","mx-auto"]],template:function(t,r){1&t&&(m._UZ(0,"div",0)(1,"app-menu"),m.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"h2",4)(7,"span",5),m._uU(8," Mi nombre es Gisela Acosta."),m.qZA()(),m.TgZ(9,"p",6),m._uU(10,"Finalizando la Tecnicatura Superior en Programacion."),m.qZA()()(),m.TgZ(11,"div",7),m._UZ(12,"img",8),m.qZA()()())},directives:[Dm],styles:[".inner[_ngcontent-%COMP%]{background-color:#000}.masthead-brand[_ngcontent-%COMP%]{margin-bottom:10}a[_ngcontent-%COMP%]{font-size:30px;color:#060505}.btn-secondary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:focus{color:#020202;text-shadow:none;background-color:#000;border:.05rem solid rgb(36,35,35)}body[_ngcontent-%COMP%]{margin:0;padding:0;background:#fff;color:#fff;font-family:Arial;font-size:12px}.body[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background-image:url(fondologin.964b5b5c2b519987.jpg);background-size:cover;z-index:0}.header[_ngcontent-%COMP%]{position:absolute;top:calc(10% - 35px);left:calc(50% - 255px);z-index:2}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 75px);left:calc(50% - 50px);height:150px;width:350px;padding:10px;z-index:2}.carousel[_ngcontent-%COMP%]{margin-bottom:4rem}.carousel-caption[_ngcontent-%COMP%]{bottom:3rem;z-index:10}.carousel-item[_ngcontent-%COMP%]{height:32rem;background-color:#777}.carousel-item[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;min-width:100%;height:32rem}.marketing[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}.marketing[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:.75rem;margin-left:.75rem}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}.featurette-heading[_ngcontent-%COMP%]{font-weight:300;line-height:1;letter-spacing:-.05rem}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}"]}),n})();function _S(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," El correo debe tener un formato valido. "),m.qZA())}function yS(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," El correo no puede quedar vacio. "),m.qZA())}function iC(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," La contrase\xf1a no puede quedar vacia. "),m.qZA())}function vS(n,e){1&n&&(m.TgZ(0,"span"),m._uU(1," La contrase\xf1a debe tener por lo menos los 6 minimos caracteres para ser valida. "),m.qZA())}let sC=(()=>{class n{constructor(t,r,i){this.authSvc=t,this.router=r,this.fb=i,this.miUsuario=new kb,this.isEmail=/\S+@\S+\.\S+/}iraLogin(){this.router.navigateByUrl("/login")}ngOnInit(){this.initForm()}Registrar(){if(this.formularioContacto.valid)try{this.authSvc.registrar(this.miUsuario)}catch(t){console.log(t)}}notRequiredHasValue(t){var r;return(null===(r=this.formularioContacto.get(t))||void 0===r?void 0:r.value)?"is-valid":""}isValidField(t){const r=this.formularioContacto.get(t);return!(null==r?void 0:r.valid)&&(null==r?void 0:r.touched)?"is-invalid":(null==r?void 0:r.touched)?"is-valid":""}initForm(){this.formularioContacto=this.fb.group({correo:["",[il.required,il.pattern(this.isEmail)]],contrase\u00f1a:["",[il.required,il.minLength(6),il.maxLength(10)]]})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(wr),m.Y36(Lr),m.Y36(vv))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-registro"]],decls:28,vars:12,consts:[[1,"body"],[1,"grad"],[1,"header"],[1,"login"],["name","form",3,"formGroup"],[1,"form-group"],["type","text","placeholder","ingrese correo","formControlName","correo",1,"form-control",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],[4,"ngIf"],["type","password","placeholder","ingrese contrase\xf1a","formControlName","contrase\xf1a",1,"form-control",3,"ngModel","ngModelChange"],["type","button","value","Registrar",3,"click"],["type","button","value","Ingresar",3,"click"]],template:function(t,r){if(1&t&&(m._UZ(0,"div",0)(1,"div",1),m.TgZ(2,"div",2)(3,"div"),m._uU(4,"Sala"),m.TgZ(5,"span"),m._uU(6,"de"),m.qZA(),m._uU(7,"Juegos"),m.qZA()(),m._UZ(8,"br"),m.TgZ(9,"div",3)(10,"form",4)(11,"div",5)(12,"input",6),m.NdJ("ngModelChange",function(a){return r.miUsuario.correo=a}),m.qZA(),m.TgZ(13,"div",7),m.YNc(14,_S,2,0,"span",8),m.YNc(15,yS,2,0,"span",8),m.qZA(),m.TgZ(16,"input",9),m.NdJ("ngModelChange",function(a){return r.miUsuario.contrasena=a}),m.qZA(),m.TgZ(17,"div",7),m.YNc(18,iC,2,0,"span",8),m.YNc(19,vS,2,0,"span",8),m.qZA()(),m.TgZ(20,"input",10),m.NdJ("click",function(){return r.Registrar()}),m.qZA(),m._UZ(21,"br"),m.TgZ(22,"div")(23,"span"),m._uU(24),m.qZA()(),m.TgZ(25,"h2"),m._uU(26,"Ya estas registrado? Dirigete a ingreso"),m.qZA(),m.TgZ(27,"input",11),m.NdJ("click",function(){return r.iraLogin()}),m.qZA()()()),2&t){let i,a,u,h;m.xp6(10),m.Q6J("formGroup",r.formularioContacto),m.xp6(2),m.Tol(r.isValidField("correo")),m.Q6J("ngModel",r.miUsuario.correo),m.xp6(2),m.Q6J("ngIf",null==(i=r.formularioContacto.get("correo"))||null==i.errors?null:i.errors.pattern),m.xp6(1),m.Q6J("ngIf",null==(a=r.formularioContacto.get("correo"))||null==a.errors?null:a.errors.required),m.xp6(1),m.Tol(r.isValidField("contrase\xf1a")),m.Q6J("ngModel",r.miUsuario.contrasena),m.xp6(2),m.Q6J("ngIf",null==(u=r.formularioContacto.get("contrase\xf1a"))||null==u.errors?null:u.errors.required),m.xp6(1),m.Q6J("ngIf",null==(h=r.formularioContacto.get("contrase\xf1a"))||null==h.errors?null:h.errors.minlength),m.xp6(5),m.Oqu(r.resultado)}},directives:[uv,tv,Vc,Mf,$b,Zd,Or],styles:['@import"https://fonts.googleapis.com/css?family=Exo:100,200,400";@import"https://fonts.googleapis.com/css?family=Source+Sans+Pro:700,400,300";body[_ngcontent-%COMP%]{margin:0;padding:0;background:#fff;color:#fff;font-family:Arial;font-size:12px}.h2[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:35px;font-weight:200}span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.body[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background-image:url(fondologin.964b5b5c2b519987.jpg);background-size:cover;z-index:0}.grad[_ngcontent-%COMP%]{position:absolute;top:-20px;left:-20px;right:-40px;bottom:-40px;width:auto;height:auto;background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(0,0,0,0)),color-stop(100%,rgba(0,0,0,.65)));z-index:1;opacity:.7}.header[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 35px);left:calc(50% - 255px);z-index:2}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:35px;font-weight:200}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#5379fa!important}.login[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 75px);left:calc(50% - 50px);height:150px;width:350px;padding:10px;z-index:2}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px}.login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:20px;font-weight:200;width:250px;height:30px}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:260px;height:35px;background:#fff;border:1px solid #fff;cursor:pointer;border-radius:2px;color:#a18d6c;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:6px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{opacity:.8}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active{opacity:.6}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff9}[_ngcontent-%COMP%]::-moz-input-placeholder{color:#fff9}']}),n})(),oC=(()=>{class n{constructor(t,r){this.authSvc=t,this.router=r}canActivate(t,r){return this.authSvc.isLoggged?(console.log(this.authSvc.isLoggged),!0):(console.log(this.authSvc.isLoggged),console.log("Acceso denegado"),this.router.navigateByUrl("/login"),!1)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wr),m.LFG(Lr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gv=Og.forRoot([{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:mS,pathMatch:"full"},{path:"home",component:rC,pathMatch:"full",canActivate:[oC]},{path:"quiensoy",component:rh,pathMatch:"full",canActivate:[oC]},{path:"registro",component:sC,pathMatch:"full"},{path:"menu",component:Dm,pathMatch:"full",canActivate:[oC]}]);var Ho=U(4986),Tm=U(3942);const va="firebasestorage.googleapis.com",$o="storageBucket";class ir extends L.ZR{constructor(e,t){super(qv(e),`Firebase Storage: ${t} (${qv(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ir.prototype)}_codeEquals(e){return qv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function qv(n){return"storage/"+n}function Wv(){return new ir("unknown","An unknown error occurred, please check the error payload for server response.")}function cC(){return new ir("canceled","User canceled the upload/download.")}function fC(){return new ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Gu(n){return new ir("invalid-argument",n)}function Jf(){return new ir("app-deleted","The Firebase app was deleted.")}function Kv(n){return new ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ih(n,e){return new ir("invalid-format","String does not match format '"+n+"': "+e)}function sh(n){throw new ir("internal-error","Internal error: "+n)}class Ei{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ei.makeFromUrl(e,t)}catch(i){return new Ei(e,"")}if(""===r.path)return r;throw function hC(n){return new ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ct){ct.path_=decodeURIComponent(ct.path)}const x=t.replace(/[.]/g,"\\."),kt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ct){"/"===ct.path.charAt(ct.path.length-1)&&(ct.path_=ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===va?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ct=0;ct<kt.length;ct++){const zt=kt[ct],Kt=zt.regex.exec(e);if(Kt){let Si=Kt[zt.indices.path];Si||(Si=""),r=new Ei(Kt[zt.indices.bucket],Si),zt.postModify(r);break}}if(null==r)throw function dC(n){return new ir("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class mC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Am(n){return"string"==typeof n||n instanceof String}function wC(n){return Zv()&&n instanceof Blob}function Zv(){return"undefined"!=typeof Blob}function Yv(n,e,t,r){if(r<e)throw Gu(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Gu(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ql(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bC(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var qu=(()=>{return(n=qu||(qu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",qu;var n})();class TS{constructor(e,t,r,i,a,u,h,_,w,A,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=A,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,$)=>{this.resolve_=O,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function vC(n){return void 0!==n}(_)?a():a(_)}catch(_){u(_)}else if(null!==h){const _=Wv();_.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,_):_)}else u(i.canceled?this.appDelete_?Jf():cC():function uC(){return new ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new xm(!1,null,!0)):this.backoffId_=function _C(n,e,t){let r=1,i=null,a=null,u=!1,h=0;function _(){return 2===h}let w=!1;function A(...je){w||(w=!0,e.apply(null,je))}function x(je){i=setTimeout(()=>{i=null,n($,_())},je)}function O(){a&&clearTimeout(a)}function $(je,...At){if(w)return void O();if(je)return O(),void A.call(null,je,...At);if(_()||u)return O(),void A.call(null,je,...At);let kt;r<64&&(r*=2),1===h?(h=2,kt=0):kt=1e3*(r+Math.random()),x(kt)}let Y=!1;function Ie(je){Y||(Y=!0,O(),!w&&(null!==i?(je||(h=2),clearTimeout(i),x(0)):je||(h=1)))}return x(0),a=setTimeout(()=>{u=!0,Ie(!0)},t),Ie}((r,i)=>{if(i)return void r(!1,new xm(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===qu.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const A=a.getErrorCode()===qu.ABORT;return void r(!1,new xm(!1,null,A))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new xm(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function yC(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class xm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kS(...n){const e=function PS(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Zv())return new Blob(n);throw new ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mm{constructor(e,t){this.data=e,this.contentType=t||null}}function Rm(n,e){switch(n){case zs.RAW:return new Mm(Qv(e));case zs.BASE64:case zs.BASE64URL:return new Mm(Jv(n,e));case zs.DATA_URL:return new Mm(function DC(n){const e=new Xv(n);return e.base64?Jv(zs.BASE64,e.rest):function IC(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ih(zs.DATA_URL,"Malformed data URL.")}return Qv(e)}(e.rest)}(e),function TC(n){return new Xv(n).contentType}(e))}throw Wv()}function Qv(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Jv(n,e){switch(n){case zs.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ih(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zs.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ih(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function CC(n){return atob(n)}(e)}catch(i){throw ih(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Xv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ih(zs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Gc(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ll{constructor(e,t){let r=0,i="";wC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(wC(this.data_)){const i=function EC(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ll(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ll(r,!0)}}static getBlob(...e){if(Zv()){const t=e.map(r=>r instanceof ll?r.data_:r);return new ll(kS.apply(null,t))}{const t=e.map(u=>Am(u)?Rm(zs.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new ll(i,!0)}}uploadData(){return this.data_}}function ew(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function DS(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Pm(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qP(n,e){return e}class Vi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||qP}}let Xf=null;function Et(){if(Xf)return Xf;const n=[];n.push(new Vi("bucket")),n.push(new Vi("generation")),n.push(new Vi("metageneration")),n.push(new Vi("name","fullPath",!0));const t=new Vi("name");t.xform=function e(a,u){return function WP(n){return!Am(n)||n.length<2?n:Pm(n)}(u)},n.push(t);const i=new Vi("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Vi("timeCreated")),n.push(new Vi("updated")),n.push(new Vi("md5Hash",null,!0)),n.push(new Vi("cacheControl",null,!0)),n.push(new Vi("contentDisposition",null,!0)),n.push(new Vi("contentEncoding",null,!0)),n.push(new Vi("contentLanguage",null,!0)),n.push(new Vi("contentType",null,!0)),n.push(new Vi("metadata","customMetadata",!0)),Xf=n,Xf}function SC(n,e,t){const r=ew(e);return null===r?null:function OS(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function NS(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ei(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function tw(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const ep="prefixes";class ba{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ul(n){if(!n)throw Wv()}function Nm(n,e){return function t(r,i){const a=SC(n,i,e);return ul(null!==a),a}}function qc(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Qf(){return new ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function zv(){return new ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ES(n){return new ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function CS(n){return new ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function ah(n){const e=qc(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function bS(n){return new ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function MC(n,e,t){const i=Ql(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ba(i,"GET",Nm(n,t),u);return h.errorHandler=ah(e),h}function FS(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Ql(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,A=new ba(h,"GET",function AC(n,e){return function t(r,i){const a=function zP(n,e,t){const r=ew(t);return null===r?null:function br(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[ep])for(const i of t[ep]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Ei(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ei(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return ul(null!==a),a}}(n,e.bucket),w);return A.urlParams=a,A.errorHandler=qc(e),A}function rp(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function US(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ip{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Om(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){ul(!1)}return ul(!!t&&-1!==(e||["active"]).indexOf(t)),t}const HS={STATE_CHANGED:"state_changed"},ms={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fm(n){switch(n){case"running":case"pausing":case"canceling":return ms.RUNNING;case"paused":return ms.PAUSED;case"success":return ms.SUCCESS;case"canceled":return ms.CANCELED;default:return ms.ERROR}}class PC{constructor(e,t,r){if(function IS(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Wc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class $S extends class NC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw sh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw sh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ea(){return new $S}class rw{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Et(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function BS(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=rp(e,r,i),h={name:u.fullPath},_=Ql(a,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},x=tw(u,t),Y=new ba(_,"POST",function $(Ie){let je;Om(Ie);try{je=Ie.getResponseHeader("X-Goog-Upload-URL")}catch(At){ul(!1)}return ul(Am(je)),je},n.maxUploadRetryTime);return Y.urlParams=h,Y.headers=A,Y.body=x,Y.errorHandler=qc(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ea,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function sp(n,e,t,r){const _=new ba(t,"POST",function a(w){const A=Om(w,["active","final"]);let x=null;try{x=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){ul(!1)}x||ul(!1);const O=Number(x);return ul(!isNaN(O)),new ip(O,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=qc(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ea,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ip(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function jS(n,e,t,r,i,a,u,h){const _=new ip(0,0);if(u?(_.current=u.current,_.total=u.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function pC(){return new ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let A=w;i>0&&(A=Math.min(A,i));const x=_.current,Y={"X-Goog-Upload-Command":A===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},Ie=r.slice(x,x+A);if(null===Ie)throw fC();const kt=new ba(t,"POST",function je(ct,zt){const Kt=Om(ct,["active","final"]),Ko=_.current+A,Si=r.size();let cu;return cu="final"===Kt?Nm(e,a)(ct,zt):null,new ip(Ko,Si,"final"===Kt,cu)},e.maxUploadRetryTime);return kt.headers=Y,kt.body=Ie.uploadData(),kt.progressCallback=h||null,kt.errorHandler=qc(n),kt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Ea,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MC(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ea,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function nw(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let kt="";for(let ct=0;ct<2;ct++)kt+=Math.random().toString().slice(2);return kt}();u["Content-Type"]="multipart/related; boundary="+_;const w=rp(e,r,i),A=tw(w,t),$=ll.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===$)throw fC();const Y={name:w.fullPath},Ie=Ql(a,n.host,n._protocol),At=n.maxUploadRetryTime,tt=new ba(Ie,"POST",Nm(n,t),At);return tt.urlParams=Y,tt.headers=u,tt.body=$.uploadData(),tt.errorHandler=qc(e),tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ea,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=cC(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Fm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new PC(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Fm(this._state)){case ms.SUCCESS:Wc(this._resolve.bind(null,this.snapshot))();break;case ms.CANCELED:case ms.ERROR:Wc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Fm(this._state)){case ms.RUNNING:case ms.PAUSED:e.next&&Wc(e.next.bind(e,this.snapshot))();break;case ms.SUCCESS:e.complete&&Wc(e.complete.bind(e))();break;default:e.error&&Wc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cl{constructor(e,t){this._service=e,this._location=t instanceof Ei?t:Ei.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cl(e,t)}get root(){const e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pm(this._location.path)}get storage(){return this._service}get parent(){const e=function oh(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ei(this._location.bucket,e);return new cl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Kv(e)}}function OC(n,e,t){return sw.apply(this,arguments)}function sw(){return(sw=(0,Ee.Z)(function*(n,e,t){const i=yield FC(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield OC(n,e,i.nextPageToken))})).apply(this,arguments)}function FC(n,e){null!=e&&"number"==typeof e.maxResults&&Yv("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=FS(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ea)}function ZS(n){n._throwIfRoot("getDownloadURL");const e=function np(n,e,t){const i=Ql(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new ba(i,"GET",function xC(n,e){return function t(r,i){const a=SC(n,i,e);return ul(null!==a),function km(n,e,t,r){const i=ew(e);if(null===i||!Am(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(w=>{const x=n.fullPath;return Ql("/b/"+u(n.bucket)+"/o/"+u(x),t,r)+bC({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=ah(e),h}(n.storage,n._location,Et());return n.storage.makeRequestWithTokens(e,Ea).then(t=>{if(null===t)throw function gC(){return new ir("no-download-url","The given file does not have any download URLs.")}();return t})}function VC(n,e){const t=function GP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ei(n._location.bucket,t);return new cl(n.storage,r)}function ow(n,e){if(n instanceof ap){const t=n;if(null==t._bucket)throw function Sm(){return new ir("no-default-bucket","No default bucket found. Did you set the '"+$o+"' property when initializing the app?")}();const r=new cl(t,t._bucket);return null!=e?ow(r,e):r}return void 0!==e?VC(n,e):n}function QS(n,e){if(e&&function UC(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ap)return function YS(n,e){return new cl(n,e)}(n,e);throw Gu("To use ref(service, url), the first argument must be a Storage instance.")}return ow(n,e)}function aw(n,e){const t=null==e?void 0:e[$o];return null==t?null:Ei.makeFromBucketSpec(t,n)}class ap{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=va,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ei.makeFromBucketSpec(i,this._host):aw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ei.makeFromBucketSpec(this._url,e):aw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Yv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Yv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new mC(Jf());{const a=function RS(n,e,t,r,i,a){const u=bC(n.urlParams),h=n.url+u,_=Object.assign({},n.headers);return function xS(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function SS(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function AS(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function MS(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new TS(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const BC="@firebase/storage";function HC(n,e){return QS(n=(0,L.m9)(n),e)}function lA(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ap(t,r,i,e,ps.SDK_VERSION)}!function uA(){(0,ps._registerComponent)(new _a.wA("storage",lA,"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(BC,"0.9.4",""),(0,ps.registerVersion)(BC,"0.9.4","esm2017")}();class lp{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $C{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new lp(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new lp(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new lp(u,this,this._ref)):{next:t.next?u=>t.next(new lp(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class GC{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Jl(e,this._service))}get items(){return this._delegate.items.map(e=>new Jl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Jl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function iA(n,e){return VC(n,e)}(this._delegate,e);return new Jl(t,this.storage)}get root(){return new Jl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Jl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $C(function cw(n,e,t){return function op(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rw(n,new ll(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zs.RAW,r){this._throwIfRoot("putString");const i=Rm(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new $C(new rw(this._delegate,new ll(i.data,!0),a),this)}listAll(){return function tA(n){return function zS(n){const e={prefixes:[],items:[]};return OC(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new GC(e,this.storage))}list(e){return function eA(n,e){return FC(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new GC(t,this.storage))}getMetadata(){return function XS(n){return function LC(n){n._throwIfRoot("getMetadata");const e=MC(n.storage,n._location,Et());return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function jC(n,e){return function KS(n,e){n._throwIfRoot("updateMetadata");const t=function LS(n,e,t,r){const a=Ql(e.fullServerUrl(),n.host,n._protocol),h=tw(t,r),w=n.maxOperationRetryTime,A=new ba(a,"PATCH",Nm(n,r),w);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=h,A.errorHandler=ah(e),A}(n.storage,n._location,e,Et());return n.storage.makeRequestWithTokens(t,Ea)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function nA(n){return ZS(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rA(n){return function uh(n){n._throwIfRoot("deleteObject");const e=function VS(n,e){const r=Ql(e.fullServerUrl(),n.host,n._protocol),h=new ba(r,"DELETE",function u(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=ah(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Kv(e)}}class Lm{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Vm(e))throw Gu("ref() expected a child path but got a URL, use refFromURL instead.");return new Jl(HC(this._delegate,e),this)}refFromURL(e){if(!Vm(e))throw Gu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ei.makeFromUrl(e,this._delegate.host)}catch(t){throw Gu("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jl(HC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function sA(n,e,t,r={}){!function JS(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Vm(n){return/^[A-Za-z]+:\/\//.test(n)}function dA(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Lm(t,r)}function fw(n){const e=function hA(n){return new H.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function wS(n,e=Ho.z){return(0,Ar.e)((t,r)=>{let i=null,a=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=u+n,A=e.now();if(A<w)return i=this.schedule(void 0,w-A),void r.add(i);h()}t.subscribe((0,Fn.x)(r,w=>{a=w,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Um(n){return{getDownloadURL:()=>C(void 0).pipe(Cn.fc,Ln(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>C(void 0).pipe(Cn.fc,Ln(()=>n.getMetadata()),Cn.iC),delete:()=>(0,Dn.D)(n.delete()),child:e=>Um(n.child(e)),updateMetadata:e=>(0,Dn.D)(n.updateMetadata(e)),put:(e,t)=>fw(n.put(e,t)),putString:(e,t,r)=>fw(n.putString(e,t,r)),list:e=>(0,Dn.D)(n.list(e)),listAll:()=>(0,Dn.D)(n.listAll())}}!function hw(n){const e={TaskState:ms,TaskEvent:HS,StringFormat:zs,Storage:Lm,Reference:Jl};n.INTERNAL.registerComponent(new _a.wA("storage-compat",dA,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(Tm.Z);const WC=new m.OlP("angularfire2.storageBucket"),fA=new m.OlP("angularfire2.storage.maxUploadRetryTime"),zC=new m.OlP("angularfire2.storage.maxOperationRetryTime"),nk=new m.OlP("angularfire2.storage.use-emulator");let pA=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x){const O=(0,ci.on)(t,u,r);this.storage=(0,ci.cc)(`${O.name}.storage.${i}`,"AngularFireStorage",O.name,()=>{const $=u.runOutsideAngular(()=>O.storage(i||void 0)),Y=A;return Y&&$.useEmulator(...Y),_&&$.setMaxUploadRetryTime(_),w&&$.setMaxOperationRetryTime(w),$},[_,w])}ref(t){return Um(this.storage.ref(t))}refFromURL(t){return Um(this.storage.refFromURL(t))}upload(t,r,i){return Um(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ci.Dh),m.LFG(ci.xv,8),m.LFG(WC,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Cn.HU),m.LFG(fA,8),m.LFG(zC,8),m.LFG(nk,8),m.LFG(th,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),ch=(()=>{class n{constructor(){Yf.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[pA],imports:[gA]}),n})();function zc(){return(0,Ar.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function KC(n,e=Sr.y){return n=null!=n?n:rk,(0,Ar.e)((t,r)=>{let i,a=!0;t.subscribe((0,Fn.x)(r,u=>{const h=e(u);(a||!n(i,h))&&(a=!1,i=h,r.next(u))}))})}function rk(n,e){return n===e}U(4087);var lt,_A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xl={},gw=gw||{},Ut=_A||self;function up(){}function cp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mw="closure_uid_"+(1e9*Math.random()>>>0),ZC=0;function YC(n,e,t){return n.call.apply(n.bind,arguments)}function yA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ci(n,e,t){return(Ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YC:yA).apply(null,arguments)}function dh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ii(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Kc(){this.s=this.s,this.o=this.o}var wA={};Kc.prototype.s=!1,Kc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function dp(n){return Object.prototype.hasOwnProperty.call(n,mw)&&n[mw]||(n[mw]=++ZC)}(this);delete wA[n]}},Kc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},_w=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function bA(n){return Array.prototype.concat.apply([],arguments)}function Bm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function jm(n){return/^[\s\xa0]*$/.test(n)}var Bi,EA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ui(n,e){return-1!=n.indexOf(e)}function QC(n,e){return n<e?-1:n>e?1:0}e:{var Hm=Ut.navigator;if(Hm){var JC=Hm.userAgent;if(JC){Bi=JC;break e}}Bi=""}function yw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function XC(n){const e={};for(const t in n)e[t]=n[t];return e}var eI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<eI.length;a++)t=eI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vw(n){return vw[" "](n),n}vw[" "]=up;var hp,n,IA=Ui(Bi,"Opera"),fh=Ui(Bi,"Trident")||Ui(Bi,"MSIE"),nI=Ui(Bi,"Edge"),Yc=nI||fh,ww=Ui(Bi,"Gecko")&&!(Ui(Bi.toLowerCase(),"webkit")&&!Ui(Bi,"Edge"))&&!(Ui(Bi,"Trident")||Ui(Bi,"MSIE"))&&!Ui(Bi,"Edge"),rI=Ui(Bi.toLowerCase(),"webkit")&&!Ui(Bi,"Edge");function bw(){var n=Ut.document;return n?n.documentMode:void 0}e:{var $m="",Ew=(n=Bi,ww?/rv:([^\);]+)(\)|;)/.exec(n):nI?/Edge\/([\d\.]+)/.exec(n):fh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):rI?/WebKit\/(\S+)/.exec(n):IA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ew&&($m=Ew?Ew[1]:""),fh){var Cw=bw();if(null!=Cw&&Cw>parseFloat($m)){hp=String(Cw);break e}}hp=$m}var DA={};var SA=Ut.document&&fh&&(bw()||parseInt(hp,10))||void 0,fp=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",up,e),Ut.removeEventListener("test",up,e)}catch(t){}return n}();function ji(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Qc(n,e){if(ji.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ww){e:{try{vw(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qc.Z.h.call(this)}}ji.prototype.h=function(){this.defaultPrevented=!0},Ii(Qc,ji);var dl={2:"touch",3:"pen",4:"mouse"};Qc.prototype.h=function(){Qc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pp="closure_listenable_"+(1e6*Math.random()|0),Dw=0;function gp(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Dw,this.ca=this.fa=!1}function Gm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function qm(n){this.src=n,this.g={},this.h=0}function Tw(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Zc(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Gm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ph(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}qm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=ph(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new gp(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var gh="closure_lm_"+(1e6*Math.random()|0),Sw={};function sI(n,e,t,r,i){if(r&&r.once)return Wm(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)sI(n,e[a],t,r,i);return null}return t=zm(t),n&&n[pp]?n.N(e,t,Wu(r)?!!r.capture:!!r,i):Aw(n,e,t,!1,r,i)}function Aw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=Wu(i)?!!i.capture:!!i,h=mp(n);if(h||(n[gh]=h=new qm(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function oI(){var e=ik;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fp||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(aI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Wm(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Wm(n,e[a],t,r,i);return null}return t=zm(t),n&&n[pp]?n.O(e,t,Wu(r)?!!r.capture:!!r,i):Aw(n,e,t,!0,r,i)}function xw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)xw(n,e[a],t,r,i);else r=Wu(r)?!!r.capture:!!r,t=zm(t),n&&n[pp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ph(a=n.g[e],t,r,i))&&(Gm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=mp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ph(e,t,r,i)),(t=-1<n?e[n]:null)&&Mw(t))}function Mw(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[pp])Tw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(aI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mp(e))?(Tw(t,n),0==t.h&&(t.src=null,e[gh]=null)):Gm(n)}}}function aI(n){return n in Sw?Sw[n]:Sw[n]="on"+n}function ik(n,e){if(n.ca)n=!0;else{e=new Qc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Mw(n),n=t.call(r,e)}return n}function mp(n){return(n=n[gh])instanceof qm?n:null}var _p="__closure_events_fn_"+(1e9*Math.random()>>>0);function zm(n){return"function"==typeof n?n:(n[_p]||(n[_p]=function(e){return n.handleEvent(e)}),n[_p])}function Ur(){Kc.call(this),this.i=new qm(this),this.P=this,this.I=null}function ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ji(e,n);else if(e instanceof ji)e.target=e.target||n;else{var i=e;tI(e=new ji(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=Km(u,r,!0,e)&&i}if(i=Km(u=e.g=n,r,!0,e)&&i,i=Km(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Km(u=e.g=t[a],r,!1,e)&&i}function Km(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var h=u.listener,_=u.ia||u.src;u.fa&&Tw(n.i,u),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Ii(Ur,Kc),Ur.prototype[pp]=!0,Ur.prototype.removeEventListener=function(n,e,t,r){xw(this,n,e,t,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gm(t[r]);delete n.g[e],n.h--}}this.I=null},Ur.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ur.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rw=Ut.JSON.stringify;function AA(){var n=Fw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zm,Pw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kw,n=>n.reset());class kw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lI(n){Ut.setTimeout(()=>{throw n},0)}function Nw(n,e){Zm||function uI(){var n=Ut.Promise.resolve(void 0);Zm=function(){n.then(cI)}}(),Ow||(Zm(),Ow=!0),Fw.add(n,e)}var Ow=!1,Fw=new class xA{constructor(){this.h=this.g=null}add(e,t){const r=Pw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function cI(){for(var n;n=AA();){try{n.h.call(n.g)}catch(t){lI(t)}var e=Pw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ow=!1}function Ym(n,e){Ur.call(this),this.h=n||1,this.g=e||Ut,this.j=Ci(this.kb,this),this.l=Date.now()}function Qm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Lw(n,e,t){if("function"==typeof n)t&&(n=Ci(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ci(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Hi(n){n.g=Lw(()=>{n.g=null,n.i&&(n.i=!1,Hi(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ii(Ym,Ur),(lt=Ym.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ei(this,"tick"),this.da&&(Qm(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){Ym.Z.M.call(this),Qm(this),delete this.g};class mh extends Kc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Hi(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yp(n){Kc.call(this),this.h=n,this.g={}}Ii(yp,Kc);var dI=[];function MA(n,e,t,r){Array.isArray(t)||(t&&(dI[0]=t.toString()),t=dI);for(var i=0;i<t.length;i++){var a=sI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function _h(n){yw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Mw(e)},n),n.g={}}function Jm(){this.g=!0}function Jc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return Rw(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}yp.prototype.M=function(){yp.Z.M.call(this),_h(this)},yp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jm.prototype.Aa=function(){this.g=!1},Jm.prototype.info=function(){};var eu={},Uw=null;function vp(){return Uw=Uw||new Ur}function wp(n){ji.call(this,eu.Ma,n)}function Xc(n){const e=vp();ei(e,new wp(e,n))}function NA(n,e){ji.call(this,eu.STAT_EVENT,n),this.stat=e}function $i(n){const e=vp();ei(e,new NA(e,n))}function hI(n,e){ji.call(this,eu.Na,n),this.size=e}function yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}eu.Ma="serverreachability",Ii(wp,ji),eu.STAT_EVENT="statevent",Ii(NA,ji),eu.Na="timingevent",Ii(hI,ji);var ed={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jw(){}function e_(){}jw.prototype.h=null;var n_,t_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Hw(){ji.call(this,"d")}function $w(){ji.call(this,"c")}function bp(){}function Ep(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new yp(this),this.P=fI,this.W=new Ym(n=Yc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gw}function Gw(){this.i=null,this.g="",this.h=!1}Ii(Hw,ji),Ii($w,ji),Ii(bp,jw),bp.prototype.g=function(){return new XMLHttpRequest},bp.prototype.i=function(){return{}},n_=new bp;var fI=45e3,qw={},r_={};function i_(n,e,t){n.K=1,n.v=Eh(Ku(e)),n.s=t,n.U=!0,pI(n,null)}function pI(n,e){n.F=Date.now(),vh(n),n.A=Ku(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),LA(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Gw,n.g=__(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mh(Ci(n.Ia,n,n.g),n.O)),MA(n.V,n.g,"readystatechange",n.gb),e=n.H?XC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Xc(1),function Vw(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var A=w[0];w=w[1];var x=A.split("_");u=2<=x.length&&"type"==x[1]?u+(A+"=")+w+"&":u+(A+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ww(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function zw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=gI(n,t),i==r_){4==e&&(n.o=4,$i(14),r=!1),Jc(n.j,n.m,null,"[Incomplete Response]");break}if(i==qw){n.o=4,$i(15),Jc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jc(n.j,n.m,i,null),_I(n,i)}Ww(n)&&i!=r_&&i!=qw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),l0(e),e.L=!0,$i(11))):(Jc(n.j,n.m,t,"[Invalid Chunked Response]"),zu(n),o_(n))}function gI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?r_:(t=Number(e.substring(t,r)),isNaN(t)?qw:(r+=1)+t>e.length?r_:(e=e.substr(r,t),n.C=r+t,e))}function vh(n){n.Y=Date.now()+n.P,mI(n,n.P)}function mI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=yh(Ci(n.eb,n),e)}function s_(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function o_(n){0==n.l.G||n.I||VI(n.l,n)}function zu(n){s_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Qm(n.W),_h(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _I(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Qw(t.i,n)))if(t.I=n.N,!n.J&&Qw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=yh(Ci(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;g_(t),s0(t)}LI(t),$i(18)}if(1>=TI(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else mo(t,11)}else if((n.J||t.g==n)&&g_(t),!jm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const A=w[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=w[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const O=w[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Y=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(Ui(Y,"spdy")||Ui(Y,"quic")||Ui(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Tp(a,a.h),a.h=null))}if(r.D){const Ie=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(r.sa=Ie,sr(r.F,r.D,Ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=m_(r,r.H?r.la:null,r.W),u.J){Jw(r.i,u);var h=u,_=r.K;_&&h.setTimeout(_),h.B&&(s_(h),vh(h)),r.g=u}else zA(r);0<t.l.length&&f_(t)}else"stop"!=w[0]&&"close"!=w[0]||mo(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?mo(t,7):FI(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Xc(4)}catch(w){}}function yI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(cp(n)||"string"==typeof n)_w(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(cp(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function sk(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(cp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Cp(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Cp)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vI(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];wh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)wh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function wh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=Ep.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==fl(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const A=fl(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||Yc||this.g&&(this.h.h||this.g.ga()||kI(this.g)))){this.I||4!=A||7==e||Xc(8==e||0>=x?3:2),s_(this);var t=this.g.ba();this.N=t;t:if(Ww(this)){var r=kI(this.g);n="";var i=r.length,a=4==fl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){zu(this),o_(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function RA(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jm(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,$i(12),zu(this),o_(this);break e}Jc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_I(this,t)}this.U?(zw(this,A,u),Yc&&this.i&&3==A&&(MA(this.V,this.W,"tick",this.fb),this.W.start())):(Jc(this.j,this.m,u,null),_I(this,u)),4==A&&zu(this),this.i&&!this.I&&(4==A?VI(this.l,this):(this.i=!1,vh(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,$i(12)):(this.o=0,$i(13)),zu(this),o_(this)}}}catch(A){}},lt.fb=function(){if(this.g){var n=fl(this.g),e=this.g.ga();this.C<e.length&&(s_(this),zw(this,n,e),this.i&&4!=n&&vh(this))}},lt.cancel=function(){this.I=!0,zu(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function PA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xc(3),$i(17)),zu(this),this.o=2,o_(this)):mI(this,this.Y-n)},(lt=Cp.prototype).R=function(){vI(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return vI(this),this.g.concat()},lt.get=function(n,e){return wh(this.h,n)?this.h[n]:e},lt.set=function(n,e){wh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var OA=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof hl){this.g=void 0!==e?e:n.g,Ip(this,n.j),this.s=n.s,bh(this,n.i),Dp(this,n.m),this.l=n.l,e=n.h;var t=new l_;t.i=e.i,e.g&&(t.g=new Cp(e.g),t.h=e.h),Kw(this,t),this.o=n.o}else n&&(t=String(n).match(OA))?(this.g=!!e,Ip(this,t[1]||"",!0),this.s=Ch(t[2]||""),bh(this,t[3]||"",!0),Dp(this,t[4]),this.l=Ch(t[5]||"",!0),Kw(this,t[6]||"",!0),this.o=Ch(t[7]||"")):(this.g=!!e,this.h=new l_(null,this.g))}function Ku(n){return new hl(n)}function Ip(n,e,t){n.j=t?Ch(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bh(n,e,t){n.i=t?Ch(e,!0):e}function Dp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Kw(n,e,t){e instanceof l_?(n.h=e,function Yw(n,e){e&&!n.j&&(Zu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(II(this,r),LA(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=a_(e,ak)),n.h=new l_(e,n.g))}function sr(n,e,t){n.h.set(e,t)}function Eh(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ch(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function a_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,EI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function EI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(a_(e,CI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(a_(e,CI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(a_(t,"/"==t.charAt(0)?FA:Zw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",a_(t,lk)),n.join("")};var CI=/[#\/\?@]/g,Zw=/[#\?:]/g,FA=/[#\?]/g,ak=/[#\?@]/g,lk=/#/g;function l_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zu(n){n.g||(n.g=new Cp,n.h=0,n.i&&function ok(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function II(n,e){Zu(n),e=Ih(n,e),wh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,wh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vI(n)))}function DI(n,e){return Zu(n),e=Ih(n,e),wh(n.g.h,e)}function LA(n,e,t){II(n,e),0<t.length&&(n.i=null,n.g.set(Ih(n,e),Bm(t)),n.h+=t.length)}function Ih(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Go(n){this.l=n||UA,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=l_.prototype).add=function(n,e){Zu(this),this.i=null,n=Ih(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){Zu(this),this.g.forEach(function(t,r){_w(t,function(i){n.call(e,i,r,this)},this)},this)},lt.T=function(){Zu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},lt.R=function(n){Zu(this);var e=[];if("string"==typeof n)DI(this,n)&&(e=bA(e,this.g.get(Ih(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=bA(e,n[t])}return e},lt.set=function(n,e){return Zu(this),this.i=null,DI(this,n=Ih(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var UA=10;function u_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TI(n){return n.h?1:n.g?n.g.size:0}function Qw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Tp(n,e){n.g?n.g.add(e):n.h=e}function Jw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Xw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Bm(n.i)}function e0(){}function SI(){this.g=new e0}function AI(n,e,t){const r=t||"";try{yI(n,function(i,a){let u=i;Wu(i)&&(u=Rw(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function c_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function td(n){this.l=n.$b||null,this.j=n.ib||!1}function Ks(n,e){Ur.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=t0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Go.prototype.cancel=function(){if(this.i=Xw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},e0.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},e0.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Ii(td,jw),td.prototype.g=function(){return new Ks(this.l,this.j)},td.prototype.i=function(n){return function(){return n}}({}),Ii(Ks,Ur);var t0=0;function jA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Sp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dh(n)}function Dh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Ks.prototype).open=function(n,e){if(this.readyState!=t0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Dh(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sp(this)),this.readyState=t0},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dh(this)),this.g&&(this.readyState=3,Dh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Sp(this):Dh(this),3==this.readyState&&jA(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,Sp(this))},lt.Ta=function(n){this.g&&(this.response=n,Sp(this))},lt.ha=function(){this.g&&Sp(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HA=Ut.JSON.parse;function Br(n){Ur.call(this),this.headers=new Cp,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=n0,this.K=this.L=!1}Ii(Br,Ur);var n0="",$A=/^https?$/i,uk=["POST","PUT"];function MI(n){return"content-type"==n.toLowerCase()}function RI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,PI(n),Th(n)}function PI(n){n.D||(n.D=!0,ei(n,"complete"),ei(n,"error"))}function r0(n){if(n.h&&void 0!==gw&&(!n.C[1]||4!=fl(n)||2!=n.ba()))if(n.v&&4==fl(n))Lw(n.Fa,0,n);else if(ei(n,"readystatechange"),4==fl(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(OA)[1]||null;if(!i&&Ut.self&&Ut.self.location){var a=Ut.self.location.protocol;i=a.substr(0,a.length-1)}r=!$A.test(i?i.toLowerCase():"")}t=r}if(t)ei(n,"complete"),ei(n,"success");else{n.m=6;try{var u=2<fl(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",PI(n)}}finally{Th(n)}}}function Th(n,e){if(n.g){d_(n);const t=n.g,r=n.C[0]?up:null;n.g=null,n.C=null,e||ei(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function d_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function fl(n){return n.g?n.g.readyState:0}function kI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case n0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function h_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function NI(n){let e="";return yw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function Ap(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function OI(n){this.za=0,this.l=[],this.h=new Jm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ap("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ap("baseRetryDelayMs",5e3,n),this.$a=Ap("retryDelaySeedMs",1e4,n),this.Ya=Ap("forwardChannelMaxRetries",2,n),this.ra=Ap("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Go(n&&n.concurrentRequestLimit),this.Ca=new SI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function FI(n){if(o0(n),3==n.G){var e=n.V++,t=Ku(n.F);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),p_(n,t),(e=new Ep(n,n.h,e,void 0)).K=2,e.v=Eh(Ku(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=__(e.l,null),e.g.ea(e.v)),e.F=Date.now(),vh(e)}c0(n)}function s0(n){n.g&&(l0(n),n.g.cancel(),n.g=null)}function o0(n){s0(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),g_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function a0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&f_(n)}function f_(n){u_(n.i)||n.m||(n.m=!0,Nw(n.Ha,n),n.C=0)}function qA(n,e){var t;t=e?e.m:n.V++;const r=Ku(n.F);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.U),p_(n,r),n.o&&n.s&&h_(r,n.o,n.s),t=new Ep(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=WA(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Tp(n.i,t),i_(t,r,e)}function p_(n,e){n.j&&yI({},function(t,r){sr(e,r,t)})}function WA(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ci(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const A=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{AI(A,u,"req"+w+"_")}catch(x){r&&r(A)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function zA(n){n.g||n.u||(n.Y=1,Nw(n.Ga,n),n.A=0)}function LI(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=yh(Ci(n.Ga,n),u0(n,n.A)),n.A++,0))}function l0(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function xp(n){n.g=new Ep(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ku(n.oa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.N?"0":"1"),sr(e,"AID",n.U),p_(n,e),sr(e,"TYPE","xmlhttp"),n.o&&n.s&&h_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Eh(Ku(e)),t.s=null,t.U=!0,pI(t,n)}function g_(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function VI(n,e){var t=null;if(n.g==e){g_(n),l0(n),n.g=null;var r=2}else{if(!Qw(n.i,e))return;t=e.D,Jw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ei(r=vp(),new hI(r,t,e,i)),f_(n)}else zA(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function GA(n,e){return!(TI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=yh(Ci(n.Ha,n,e),u0(n,n.C)),n.C++,0)))}(n,e)||2==r&&LI(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:mo(n,5);break;case 4:mo(n,10);break;case 3:mo(n,6);break;default:mo(n,2)}}function u0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function mo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ci(n.jb,n);t||(t=new hl("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Ip(t,"https"),Eh(t)),function BA(n,e){const t=new Jm;if(Ut.Image){const r=new Image;r.onload=dh(c_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=dh(c_,t,r,"TestLoadImage: error",!1,e),r.onabort=dh(c_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=dh(c_,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else $i(2);n.G=0,n.j&&n.j.va(e),c0(n),o0(n)}function c0(n){n.G=0,n.I=-1,n.j&&((0!=Xw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Bm(n.l),n.l.length=0),n.j.ua())}function m_(n,e,t){let r=function wI(n){return n instanceof hl?Ku(n):new hl(n,void 0)}(t);if(""!=r.i)e&&bh(r,e+"."+r.i),Dp(r,r.m);else{const i=Ut.location;r=function bI(n,e,t,r){var i=new hl(null,void 0);return n&&Ip(i,n),e&&bh(i,e),t&&Dp(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&yw(n.aa,function(i,a){sr(r,a,i)}),t=n.sa,(e=n.D)&&t&&sr(r,e,t),sr(r,"VER",n.ma),p_(n,r),r}function __(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Br(t&&n.Ba&&!n.qa?new td({ib:!0}):n.qa)).L=n.H,e}function UI(){}function Sh(){if(fh&&!(10<=Number(SA)))throw Error("Environmental error: no available transport.")}function _s(n,e){Ur.call(this),this.g=new OI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!jm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rp(this)}function Mp(n){Hw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function KA(){$w.call(this),this.status=1}function Rp(n){this.g=n}(lt=Br.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():n_.g(),this.C=function Xm(n){return n.h||(n.h=n.i())}(this.u?this.u:n_),this.g.onreadystatechange=Ci(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void RI(this,a)}n=t||"";const i=new Cp(this.headers);r&&yI(r,function(a,u){i.set(u,a)}),r=function hh(n){e:{var e=MI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=Zc(uk,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{d_(this),0<this.B&&((this.K=function xI(n){return fh&&function TA(){return function CA(n){var e=DA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=EA(String(hp)).split("."),t=EA("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=QC(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||QC(0==i[2].length,0==a[2].length)||QC(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ci(this.pa,this)):this.A=Lw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){RI(this,a)}},lt.pa=function(){void 0!==gw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ei(this,"complete"),ei(this,"abort"),Th(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Th(this,!0)),Br.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?r0(this):this.cb())},lt.cb=function(){r0(this)},lt.ba=function(){try{return 2<fl(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HA(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=OI.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ep(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=XC(a),tI(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WA(this,i,e),sr(t=Ku(this.F),"RID",n),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),p_(this,t),this.o&&a&&h_(t,this.o,a),Tp(this.i,i),this.Ra&&sr(t,"TYPE","init"),this.ja?(sr(t,"$req",e),sr(t,"SID","null"),i.$=!0,i_(i,t,null)):i_(i,t,e),this.G=2}}else 3==this.G&&(n?qA(this,n):0==this.l.length||u_(this.i)||qA(this))},lt.Ga=function(){if(this.u=null,xp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=yh(Ci(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$i(10),s0(this),xp(this))},lt.ab=function(){null!=this.v&&(this.v=null,s0(this),LI(this),$i(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),$i(2)):(this.h.info("Failed to ping google.com"),$i(1))},(lt=UI.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},Sh.prototype.g=function(n,e){return new _s(n,e)},Ii(_s,Ur),_s.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Nw(Ci(n.hb,n,e))),$i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=m_(n,null,n.W),f_(n)},_s.prototype.close=function(){FI(this.g)},_s.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,a0(this.g,e)}else this.v?((e={}).__data__=Rw(n),a0(this.g,e)):a0(this.g,n)},_s.prototype.M=function(){this.g.j=null,delete this.j,FI(this.g),delete this.g,_s.Z.M.call(this)},Ii(Mp,Hw),Ii(KA,$w),Ii(Rp,UI),Rp.prototype.xa=function(){ei(this.g,"a")},Rp.prototype.wa=function(n){ei(this.g,new Mp(n))},Rp.prototype.va=function(n){ei(this.g,new KA(n))},Rp.prototype.ua=function(){ei(this.g,"b")},Sh.prototype.createWebChannel=Sh.prototype.g,_s.prototype.send=_s.prototype.u,_s.prototype.open=_s.prototype.m,_s.prototype.close=_s.prototype.close,ed.NO_ERROR=0,ed.TIMEOUT=8,ed.HTTP_ERROR=6,Bw.COMPLETE="complete",e_.EventType=t_,t_.OPEN="a",t_.CLOSE="b",t_.ERROR="c",t_.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Br.prototype.listenOnce=Br.prototype.O,Br.prototype.getLastError=Br.prototype.La,Br.prototype.getLastErrorCode=Br.prototype.Da,Br.prototype.getStatus=Br.prototype.ba,Br.prototype.getResponseJson=Br.prototype.Qa,Br.prototype.getResponseText=Br.prototype.ga,Br.prototype.send=Br.prototype.ea;var ck=Xl.createWebChannelTransport=function(){return new Sh},dk=Xl.getStatEventTarget=function(){return vp()},y_=Xl.ErrorCode=ed,ZA=Xl.EventType=Bw,YA=Xl.Event=eu,BI=Xl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},QA=Xl.FetchXmlHttpFactory=td,Pp=Xl.WebChannel=e_,jI=Xl.XhrIo=Br;const d0="@firebase/firestore";class Di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");let Ah="9.6.10";const tu=new ya.Yd("@firebase/firestore");function kp(){return tu.logLevel}function Ge(n,...e){if(tu.logLevel<=ya.in.DEBUG){const t=e.map(h0);tu.debug(`Firestore (${Ah}): ${n}`,...t)}}function Er(n,...e){if(tu.logLevel<=ya.in.ERROR){const t=e.map(h0);tu.error(`Firestore (${Ah}): ${n}`,...t)}}function Np(n,...e){if(tu.logLevel<=ya.in.WARN){const t=e.map(h0);tu.warn(`Firestore (${Ah}): ${n}`,...t)}}function h0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${Ah}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function Bt(n,e){n||pt()}function Xe(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class JA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Di.UNAUTHENTICATED))}shutdown(){}}class gk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XA{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let u=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ti,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=u;e.enqueueRetryable((0,Ee.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt("string"==typeof r.accessToken),new JA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new Di(e)}}class mk{constructor(e,t,r){this.type="FirstParty",this.user=Di.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class _k{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mk(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yk{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bt("string"==typeof t.token),this.p=t.token,new ex(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class o{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function l(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}o.A=-1;class c{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=l(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function d(n,e){return n<e?-1:n>e?1:0}function p(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function v(n){return n+"\0"}class E{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return E.fromMillis(Date.now())}static fromDate(e){return E.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new E(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?d(this.nanoseconds,e.nanoseconds):d(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class I{constructor(e){this.timestamp=e}static fromTimestamp(e){return new I(e)}static min(){return new I(new E(0,0))}static max(){return new I(new E(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function R(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function k(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class q{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===q.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof q?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Q extends q{construct(e,t,r){return new Q(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Q(t)}static emptyPath(){return new Q([])}}const De=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends q{construct(e,t,r){return new Fe(e,t,r)}static isValidIdentifier(e){return De.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ue(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ue(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new Ue(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(t)}static emptyPath(){return new Fe([])}}class ze{constructor(e){this.fields=e,e.sort(Fe.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return p(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ce{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ce(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Ce(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return d(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const It=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wt(n){if(Bt(!!n),"string"==typeof n){let e=0;const t=It.exec(n);if(Bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ti(n){return"string"==typeof n?Ce.fromBase64String(n):Ce.fromUint8Array(n)}function nu(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function v_(n){const e=n.mapValue.fields.__previous_value__;return nu(e)?v_(e):e}function nd(n){const e=Wt(n.mapValue.fields.__local_write_time__.timestampValue);return new E(e.seconds,e.nanos)}class f0{constructor(e,t,r,i,a,u,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Ca{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}function ru(n){return null==n}function rd(n){return 0===n&&1/n==-1/0}function w_(n){return"number"==typeof n&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Q.fromString(e))}static fromName(e){return new Ze(Q.fromString(e).popFirst(5))}static empty(){return new Ze(Q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Q.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Q.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Q(e.slice()))}}const b_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vk={nullValue:"NULL_VALUE"};function Op(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nu(n)?4:Ck(n)?9:10:pt()}function Yu(n,e){if(n===e)return!0;const t=Op(n);if(t!==Op(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nd(n).isEqual(nd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Wt(r.timestampValue),u=Wt(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ti(n.bytesValue).isEqual(ti(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Mt(r.geoPointValue.latitude)===Mt(i.geoPointValue.latitude)&&Mt(r.geoPointValue.longitude)===Mt(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Mt(r.integerValue)===Mt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Mt(r.doubleValue),u=Mt(i.doubleValue);return a===u?rd(a)===rd(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return p(n.arrayValue.values||[],e.arrayValue.values||[],Yu);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(R(a)!==R(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!Yu(a[h],u[h])))return!1;return!0}(n,e);default:return pt()}var i}function p0(n,e){return void 0!==(n.values||[]).find(t=>Yu(t,e))}function xh(n,e){if(n===e)return 0;const t=Op(n),r=Op(e);if(t!==r)return d(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return d(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Mt(i.integerValue||i.doubleValue),h=Mt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return wk(n.timestampValue,e.timestampValue);case 4:return wk(nd(n),nd(e));case 5:return d(n.stringValue,e.stringValue);case 6:return function(i,a){const u=ti(i),h=ti(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let _=0;_<u.length&&_<h.length;_++){const w=d(u[_],h[_]);if(0!==w)return w}return d(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=d(Mt(i.latitude),Mt(a.latitude));return 0!==u?u:d(Mt(i.longitude),Mt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let _=0;_<u.length&&_<h.length;++_){const w=xh(u[_],h[_]);if(w)return w}return d(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},h=Object.keys(u),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let A=0;A<h.length&&A<w.length;++A){const x=d(h[A],w[A]);if(0!==x)return x;const O=xh(u[h[A]],_[w[A]]);if(0!==O)return O}return d(h.length,w.length)}(n.mapValue,e.mapValue);default:throw pt()}}function wk(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return d(n,e);const t=Wt(n),r=Wt(e),i=d(t.seconds,r.seconds);return 0!==i?i:d(t.nanos,r.nanos)}function E_(n){return tx(n)}function tx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Wt(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ti(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=tx(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${tx(r.fields[h])}`;return a+"}"}(n.mapValue):pt();var e}function C_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nx(n){return!!n&&"integerValue"in n}function g0(n){return!!n&&"arrayValue"in n}function bk(n){return!!n&&"nullValue"in n}function Ek(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function HI(n){return!!n&&"mapValue"in n}function m0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return k(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=m0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=m0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ck(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ik(n,e){return void 0===n?e:void 0===e||xh(n,e)>0?n:e}function Dk(n,e){return void 0===n?e:void 0===e||xh(n,e)<0?n:e}class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!HI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=m0(t)}setAll(e){let t=Fe.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=m0(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());HI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];HI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){k(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Zs(m0(this.value))}}function Tk(n){const e=[];return k(n.fields,(t,r)=>{const i=new Fe([t]);if(HI(r)){const a=Tk(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new ze(e)}class or{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new or(e,0,I.min(),I.min(),Zs.empty(),0)}static newFoundDocument(e,t,r){return new or(e,1,t,I.min(),r,0)}static newNoDocument(e,t){return new or(e,2,t,I.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,I.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $I{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rx(n){return n.fields.find(e=>2===e.kind)}function I_(n){return n.fields.filter(e=>2!==e.kind)}$I.UNKNOWN_ID=-1;class GI{constructor(e,t){this.fieldPath=e,this.kind=t}}class _0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _0(0,id.min())}}function Sk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=I.fromTimestamp(1e9===r?new E(t+1,0):new E(t,r));return new id(i,Ze.empty(),e)}function QL(n){return new id(n.readTime,n.key,-1)}class id{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new id(I.min(),Ze.empty(),-1)}static max(){return new id(I.max(),Ze.empty(),-1)}}function JL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:d(n.largestBatchId,e.largestBatchId))}class XL{constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.P=null}}function Ak(n,e=null,t=[],r=[],i=null,a=null,u=null){return new XL(n,e,t,r,i,a,u)}function Fp(n){const e=Xe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+E_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>E_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>E_(r)).join(",")),e.P=t}return e.P}function y0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!l2(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Yu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rk(n.startAt,e.startAt)&&Rk(n.endAt,e.endAt)}function qI(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function WI(n,e){return n.filters.filter(t=>t instanceof ys&&t.field.isEqual(e))}class ys extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new t2(e,t,r):"array-contains"===t?new i2(e,r):"in"===t?new s2(e,r):"not-in"===t?new o2(e,r):"array-contains-any"===t?new a2(e,r):new ys(e,t,r)}static V(e,t,r){return"in"===t?new n2(e,r):new r2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(xh(t,this.value)):null!==t&&Op(this.value)===Op(t)&&this.v(xh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class t2 extends ys{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.v(t)}}class n2 extends ys{constructor(e,t){super(e,"in",t),this.keys=xk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class r2 extends ys{constructor(e,t){super(e,"not-in",t),this.keys=xk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class i2 extends ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return g0(t)&&p0(t.arrayValue,this.value)}}class s2 extends ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&p0(this.value.arrayValue,t)}}class o2 extends ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(p0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!p0(this.value.arrayValue,t)}}class a2 extends ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!g0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>p0(this.value.arrayValue,r))}}class Mh{constructor(e,t){this.position=e,this.inclusive=t}}class D_{constructor(e,t="asc"){this.field=e,this.dir=t}}function l2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Mk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(u.referenceValue),t.key):xh(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Rk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yu(n.position[t],e.position[t]))return!1;return!0}class sd{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function Pk(n,e,t,r,i,a,u,h){return new sd(n,e,t,r,i,a,u,h)}function T_(n){return new sd(n)}function zI(n){return!ru(n.limit)&&"F"===n.limitType}function KI(n){return!ru(n.limit)&&"L"===n.limitType}function ix(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sx(n){for(const e of n.filters)if(e.S())return e.field;return null}function ox(n){return null!==n.collectionGroup}function S_(n){const e=Xe(n);if(null===e.D){e.D=[];const t=sx(e),r=ix(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new D_(t)),e.D.push(new D_(Fe.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new D_(Fe.keyField(),a))}}}return e.D}function pl(n){const e=Xe(n);if(!e.C)if("F"===e.limitType)e.C=Ak(e.path,e.collectionGroup,S_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of S_(e))t.push(new D_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Mh(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Mh(e.startAt.position,!e.startAt.inclusive):null;e.C=Ak(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function kk(n,e,t){return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function v0(n,e){return y0(pl(n),pl(e))&&n.limitType===e.limitType}function Nk(n){return`${Fp(pl(n))}|lt:${n.limitType}`}function ax(n){return`Query(target=${function e2(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${E_(r.value)}`;var r}).join(", ")}]`),ru(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>E_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>E_(t)).join(",")),`Target(${e})`}(pl(n))}; limitType=${n.limitType})`}function lx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const h=Mk(i,a,u);return i.inclusive?h<=0:h<0}(t.startAt,S_(t),r)||t.endAt&&!function(i,a,u){const h=Mk(i,a,u);return i.inclusive?h>=0:h>0}(t.endAt,S_(t),r)));var t,r}function Ok(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fk(n){return(e,t)=>{let r=!1;for(const i of S_(n)){const a=u2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function u2(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),_=u.data.field(i);return null!==h&&null!==_?xh(h,_):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function Lk(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function Vk(n){return{integerValue:""+n}}function Uk(n,e){return w_(e)?Vk(e):Lk(n,e)}class ZI{constructor(){this._=void 0}}function c2(n,e,t){return n instanceof A_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Lp?jk(n,e):n instanceof Vp?Hk(n,e):function(r,i){const a=Bk(r,i),u=$k(a)+$k(r.k);return nx(a)&&nx(r.k)?Vk(u):Lk(r.M,u)}(n,e)}function d2(n,e,t){return n instanceof Lp?jk(n,e):n instanceof Vp?Hk(n,e):t}function Bk(n,e){return n instanceof x_?nx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class A_ extends ZI{}class Lp extends ZI{constructor(e){super(),this.elements=e}}function jk(n,e){const t=Gk(e);for(const r of n.elements)t.some(i=>Yu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vp extends ZI{constructor(e){super(),this.elements=e}}function Hk(n,e){let t=Gk(e);for(const r of n.elements)t=t.filter(i=>!Yu(i,r));return{arrayValue:{values:t}}}class x_ extends ZI{constructor(e,t){super(),this.M=e,this.k=t}}function $k(n){return Mt(n.integerValue||n.doubleValue)}function Gk(n){return g0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class w0{constructor(e,t){this.field=e,this.transform=t}}class f2{constructor(e,t){this.version=e,this.transformResults=t}}class hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QI{}function p2(n,e,t){n instanceof b0?function(r,i,a){const u=r.value.clone(),h=Kk(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Up?function(r,i,a){if(!YI(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=Kk(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(zk(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ux(n,e,t){var i;n instanceof b0?function(r,i,a){if(!YI(r.precondition,i))return;const u=r.value.clone(),h=Zk(r.fieldTransforms,a,i);u.setAll(h),i.convertToFoundDocument(Wk(i),u).setHasLocalMutations()}(n,e,t):n instanceof Up?function(r,i,a){if(!YI(r.precondition,i))return;const u=Zk(r.fieldTransforms,a,i),h=i.data;h.setAll(zk(r)),h.setAll(u),i.convertToFoundDocument(Wk(i),h).setHasLocalMutations()}(n,e,t):YI(n.precondition,i=e)&&i.convertToNoDocument(I.min())}function g2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Bk(r.transform,i||null);null!=a&&(null==t&&(t=Zs.empty()),t.set(r.field,a))}return t||null}function qk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&p(t,r,(i,a)=>function h2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Lp&&r instanceof Lp||t instanceof Vp&&r instanceof Vp?p(t.elements,r.elements,Yu):t instanceof x_&&r instanceof x_?Yu(t.k,r.k):t instanceof A_&&r instanceof A_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Wk(n){return n.isFoundDocument()?n.version:I.min()}class b0 extends QI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Up extends QI{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function zk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Kk(n,e,t){const r=new Map;Bt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,d2(u,h,t[i]))}return r}function Zk(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,c2(a,u,e))}return r}class E0 extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class cx extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class m2{constructor(e){this.count=e}}var fi,wn;function Yk(n){switch(n){default:return pt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function Qk(n){if(void 0===n)return Er("GRPC error has no .code"),ye.UNKNOWN;switch(n){case fi.OK:return ye.OK;case fi.CANCELLED:return ye.CANCELLED;case fi.UNKNOWN:return ye.UNKNOWN;case fi.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case fi.INTERNAL:return ye.INTERNAL;case fi.UNAVAILABLE:return ye.UNAVAILABLE;case fi.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case fi.NOT_FOUND:return ye.NOT_FOUND;case fi.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case fi.ABORTED:return ye.ABORTED;case fi.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case fi.DATA_LOSS:return ye.DATA_LOSS;default:return pt()}}(wn=fi||(fi={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";class Rh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){k(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return B(this.inner)}size(){return this.innerSize}}class ni{constructor(e,t){this.comparator=e,this.root=t||vs.EMPTY}insert(e,t){return new ni(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vs.BLACK,null,null))}remove(e){return new ni(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new JI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new JI(this.root,e,this.comparator,!1)}getReverseIterator(){return new JI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new JI(this.root,e,this.comparator,!0)}}class JI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vs{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:vs.RED,this.left=null!=i?i:vs.EMPTY,this.right=null!=a?a:vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new vs(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return vs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}vs.EMPTY=null,vs.RED=!0,vs.BLACK=!1,vs.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new vs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ar{constructor(e){this.comparator=e,this.data=new ni(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jk(this.data.getIterator())}getIteratorFrom(e){return new Jk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ar(this.comparator);return t.data=e,t}}class Jk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function M_(n){return n.hasNext()?n.getNext():void 0}const _2=new ni(Ze.comparator);function gl(){return _2}const y2=new ni(Ze.comparator);function dx(){return y2}function C0(){return new Rh(n=>n.toString(),(n,e)=>n.isEqual(e))}const v2=new ni(Ze.comparator),w2=new ar(Ze.comparator);function Mn(...n){let e=w2;for(const t of n)e=e.add(t);return e}const b2=new ar(d);function XI(){return b2}class I0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,D0.createSynthesizedTargetChangeForCurrentChange(e,t)),new I0(I.min(),r,XI(),gl(),Mn())}}class D0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new D0(Ce.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class eD{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Xk{constructor(e,t){this.targetId=e,this.$=t}}class eN{constructor(e,t,r=Ce.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tN{constructor(){this.B=0,this.L=rN(),this.U=Ce.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Mn(),t=Mn(),r=Mn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new D0(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=rN()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class E2{constructor(e){this.nt=e,this.st=new Map,this.it=gl(),this.rt=nN(),this.ot=new ar(d)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(qI(a))if(0===r){const u=new Ze(a.path);this.ct(t,u,or.newNoDocument(u,I.min()))}else Bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const h=this.wt(u);if(h){if(a.current&&qI(h.target)){const _=new Ze(h.target.path);null!==this.it.get(_)||this.It(u,_)||this.ct(u,_,or.newNoDocument(_,e))}a.j&&(t.set(u,a.H()),a.J())}});let r=Mn();this.rt.forEach((a,u)=>{let h=!0;u.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const i=new I0(e,t,this.ot,this.it,r);return this.it=gl(),this.rt=nN(),this.ot=new ar(d),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new tN,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ar(d),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new tN),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function nN(){return new ni(Ze.comparator)}function rN(){return new ni(Ze.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},I2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class D2{constructor(e,t){this.databaseId=e,this.N=t}}function T0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iN(n,e){return n.N?e.toBase64():e.toUint8Array()}function T2(n,e){return T0(n,e.toTimestamp())}function Gi(n){return Bt(!!n),I.fromTimestamp(function(e){const t=Wt(e);return new E(t.seconds,t.nanos)}(n))}function hx(n,e){return(t=n,new Q(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sN(n){const e=Q.fromString(n);return Bt(pN(e)),e}function S0(n,e){return hx(n.databaseId,e.path)}function Qu(n,e){const t=sN(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(aN(t))}function fx(n,e){return hx(n.databaseId,e)}function oN(n){const e=sN(n);return 4===e.length?Q.emptyPath():aN(e)}function A0(n){return new Q(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aN(n){return Bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lN(n,e,t){return{name:S0(n,e),fields:t.value.mapValue.fields}}function uN(n,e,t){const r=Qu(n,e.name),i=Gi(e.updateTime),a=new Zs({mapValue:{fields:e.fields}}),u=or.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function x0(n,e){let t;if(e instanceof b0)t={update:lN(n,e.key,e.value)};else if(e instanceof E0)t={delete:S0(n,e.key)};else if(e instanceof Up)t={update:lN(n,e.key,e.data),updateMask:O2(e.fieldMask)};else{if(!(e instanceof cx))return pt();t={verify:S0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof A_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Lp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Vp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof x_)return{fieldPath:a.field.canonicalString(),increment:u.k};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:T2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function px(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hi.updateTime(Gi(i.updateTime)):void 0!==i.exists?hi.exists(i.exists):hi.none():hi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let h=null;"setToServerValue"in u?(Bt("REQUEST_TIME"===u.setToServerValue),h=new A_):"appendMissingElements"in u?h=new Lp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Vp(u.removeAllFromArray.values||[]):"increment"in u?h=new x_(a,u.increment):pt();const _=Fe.fromServerFormat(u.fieldPath);return new w0(_,h)}(n,i)):[];var i;if(e.update){const i=Qu(n,e.update.name),a=new Zs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new ze((e.updateMask.fieldPaths||[]).map(w=>Fe.fromServerFormat(w)));return new Up(i,a,u,t,r)}return new b0(i,a,t,r)}if(e.delete){const i=Qu(n,e.delete);return new E0(i,t)}if(e.verify){const i=Qu(n,e.verify);return new cx(i,t)}return pt()}function cN(n,e){return{documents:[fx(n,e.path)]}}function dN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=fx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=fx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(A=>function(x){if("=="===x.op){if(Ek(x.value))return{unaryFilter:{field:R_(x.field),op:"IS_NAN"}};if(bk(x.value))return{unaryFilter:{field:R_(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(Ek(x.value))return{unaryFilter:{field:R_(x.field),op:"IS_NOT_NAN"}};if(bk(x.value))return{unaryFilter:{field:R_(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:R_(x.field),op:P2(x.op),value:x.value}}}(A));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:R_((A=w).field),direction:R2(A.dir)};var A})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(w=e.limit,n.N||ru(w)?w:{value:w});var w,h,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function hN(n){let e=oN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Bt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let a=[];t.where&&(a=fN(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(A=>{return new D_(P_((x=A).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(A){let x;return x="object"==typeof A?A.value:A,ru(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new Mh((A=t.startAt).values||[],!!A.before));let w=null;return t.endAt&&(w=function(A){return new Mh(A.values||[],!A.before)}(t.endAt)),Pk(e,i,u,a,h,"F",_,w)}function fN(n){return n?void 0!==n.unaryFilter?[N2(n)]:void 0!==n.fieldFilter?[k2(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fN(e)).reduce((e,t)=>e.concat(t)):pt():[]}function R2(n){return C2[n]}function P2(n){return I2[n]}function R_(n){return{fieldPath:n.canonicalString()}}function P_(n){return Fe.fromServerFormat(n.fieldPath)}function k2(n){return ys.create(P_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function N2(n){switch(n.unaryFilter.op){case"IS_NAN":const e=P_(n.unaryFilter.field);return ys.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=P_(n.unaryFilter.field);return ys.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=P_(n.unaryFilter.field);return ys.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=P_(n.unaryFilter.field);return ys.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function O2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pN(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gN(e)),e=F2(n.get(t),e);return gN(e)}function F2(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function gN(n){return n+"\x01\x01"}function iu(n){const e=n.length;if(Bt(e>=2),2===e)return Bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Q.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&pt(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:pt()}a=u+2}return new Q(r)}const mN=["userId","batchId"];function tD(n,e){return[n,qi(e)]}function _N(n,e,t){return[n,qi(e),t]}const L2={},V2=["prefixPath","collectionGroup","readTime","documentId"],U2=["prefixPath","collectionGroup","documentId"],B2=["collectionGroup","readTime","prefixPath","documentId"],j2=["canonicalId","targetId"],H2=["targetId","path"],$2=["path","targetId"],G2=["collectionId","parent"],q2=["indexId","uid"],W2=["uid","sequenceNumber"],z2=["indexId","uid","arrayValue","directionalValue","documentKey"],K2=["indexId","uid","documentKey"],Z2=["userId","collectionPath","documentId"],Y2=["userId","collectionPath","largestBatchId"],Q2=["userId","collectionGroup","largestBatchId"],yN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],J2=[...yN,"documentOverlays"],vN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],X2=[...vN,"indexConfiguration","indexState","indexEntries"],wN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,r)=>{t(e)})}static reject(e){return new be((t,r)=>{r(e)})}static waitFor(e){return new be((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=be.resolve(!1);for(const r of e)t=t.next(i=>i?be.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class nD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ti,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new M0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=gx(r.target.error);this.At.reject(new M0(e,i))}}static open(e,t,r,i){try{return new nD(t,e.transaction(i,r))}catch(a){throw new M0(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tV(t)}}class su{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===su.Vt((0,L.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),jp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,L.hl)())return!1;if(su.St())return!0;const e=(0,L.z$)(),t=su.Vt(e),r=0<t&&t<10,i=su.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ge("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new M0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Ue(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ue(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new M0(e,h))},a.onupgradeneeded=u=>{Ge("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const _=nD.open(a.db,e,u?"readonly":"readwrite",r),w=i(_).next(A=>(_.bt(),A)).catch(A=>(_.abort(A),be.reject(A))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&h<3;if(Ge("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eV{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return jp(this.Ft.delete())}}class M0 extends Ue{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bp(n){return"IndexedDbTransactionError"===n.name}class tV{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jp(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),jp(this.store.add(e))}get(e){return jp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),jp(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),jp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(u,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new be((a,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new be((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,u,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new be((r,i)=>{t.onerror=a=>{const u=gx(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Gt(e,t){const r=[];return new be((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const _=new eV(h),w=t(h.primaryKey,h.value,_);if(w instanceof be){const A=w.catch(x=>(_.done(),be.reject(x)));r.push(A)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jp(n){return new be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=gx(r.target.error);t(i)}})}let EN=!1;function gx(n){const e=su.Vt((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EN||(EN=!0,setTimeout(()=>{throw r},0)),r}}return n}class CN extends bN{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Wi(n,e){const t=Xe(n);return su.xt(t.Ht,e)}class mx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&p2(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ux(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ux(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(I.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&p(this.mutations,e.mutations,(t,r)=>qk(t,r))&&p(this.baseMutations,e.baseMutations,(t,r)=>qk(t,r))}}class _x{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Bt(e.mutations.length===r.length);let i=v2;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new _x(e,t,r,i)}}class yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ph{constructor(e,t,r,i,a=I.min(),u=I.min(),h=Ce.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new Ph(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ph(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class IN{constructor(e){this.Jt=e}}function DN(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:S0(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:T0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Hp(e.version)}}var i,a;return r}function rD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(n){const e=new E(n.seconds,n.nanoseconds);return I.fromTimestamp(e)}function k_(n,e){const t=(e.baseMutations||[]).map(a=>px(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>px(n.Jt,a)),i=E.fromMillis(e.localWriteTimeMs);return new mx(e.batchId,i,t,r)}function R0(n){const e=$p(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$p(n.lastLimboFreeSnapshotVersion):I.min();let r;var i;return void 0!==n.query.documents?(Bt(1===(i=n.query).documents.length),r=pl(T_(oN(i.documents[0])))):r=pl(hN(n.query)),new Ph(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ce.fromBase64String(n.resumeToken))}function TN(n,e){const t=Hp(e.snapshotVersion),r=Hp(e.lastLimboFreeSnapshotVersion);let i;i=qI(e.target)?cN(n.Jt,e.target):dN(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vx(n){const e=hN({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kk(e,e.limit,"L"):e}function wx(n,e){return new yx(e.largestBatchId,px(n.Jt,e.overlayMutation))}function SN(n,e){const t=e.path.lastSegment();return[n,qi(e.path.popLast()),t]}class rV{getBundleMetadata(e,t){return AN(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return AN(e).put({bundleId:(r=t).id,createTime:Hp(Gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return xN(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:vx(i.bundledQuery),readTime:$p(i.readTime)};var i})}saveNamedQuery(e,t){return xN(e).put({name:(r=t).name,readTime:Hp(Gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AN(n){return Wi(n,"bundles")}function xN(n){return Wi(n,"namedQueries")}class bx{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new bx(e,t.uid||"")}getOverlay(e,t){return P0(e).get(SN(this.userId,t)).next(r=>r?wx(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const h=new yx(t,u);i.push(this.Xt(e,h))}),be.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(qi(u.getCollectionPath())));const a=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(P0(e).Qt("collectionPathOverlayIndex",h))}),be.waitFor(a)}getOverlaysForCollection(e,t,r){const i=C0(),a=qi(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return P0(e).qt("collectionPathOverlayIndex",u).next(h=>{for(const _ of h){const w=wx(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=C0();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return P0(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,w,A)=>{const x=wx(this.M,w);a.size()<i||x.largestBatchId===u?(a.set(x.getKey(),x),u=x.largestBatchId):A.done()}).next(()=>a)}Xt(e,t){return P0(e).put(function(r,i,a){const[u,h,_]=SN(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:x0(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function P0(n){return Wi(n,"documentOverlays")}class N_{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Mt(e.integerValue));else if("doubleValue"in e){const r=Mt(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),rd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ti(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ck(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):pt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function iV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function MN(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=iV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}N_.fe=new N_;class sV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=MN(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=MN(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oV{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class aV{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class iD{constructor(){this.De=new sV,this.Ce=new oV(this.De),this.xe=new aV(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class kh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new kh(this.indexId,this.documentKey,this.arrayValue,r)}}function Gp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=RN(n.arrayValue,e.arrayValue),0!==t?t:(t=RN(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function RN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class lV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=rx(e);if(void 0!==t&&!this.Be(t))return!1;const r=I_(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class uV{constructor(){this.qe=new Ex}addToCollectionParentIndex(e,t){return this.qe.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getFieldIndex(e,t){return be.resolve(null)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}updateCollectionGroup(e,t,r){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class Ex{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ar(Q.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ar(Q.comparator)).toArray()}}const sD=new Uint8Array(0);class cV{constructor(e){this.user=e,this.Ge=new Ex,this.Ke=new Rh(t=>Fp(t),(t,r)=>y0(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:qi(i)};return PN(e).put(a)}return be.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[v(t),""],!1,!0);return PN(e).qt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(iu(u.parent))}return r})}addFieldIndex(e,t){const r=oD(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=oD(e),i=aD(e),a=k0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=k0(e);let i=!0;const a=new Map;return be.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(h=>{i&&(i=!!h),a.set(u,h)})).next(()=>{if(i){let u=Mn();return be.forEach(a,(h,_)=>{var w;Ge("IndexedDbIndexManager",`Using index ${w=h,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Fp(t)}`);const A=function(tt,kt){const ct=rx(kt);if(void 0===ct)return null;for(const zt of WI(tt,ct.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(_,h),x=function(tt,kt){const ct=new Map;for(const zt of I_(kt))for(const Kt of WI(tt,zt.fieldPath))switch(Kt.op){case"==":case"in":ct.set(zt.fieldPath.canonicalString(),Kt.value);break;case"not-in":case"!=":return ct.set(zt.fieldPath.canonicalString(),Kt.value),Array.from(ct.values())}return null}(_,h),O=function(tt,kt){const ct=[];let zt=!0;for(const Ko of I_(kt)){let Si,cu=!0;for(const Ai of WI(tt,Ko.fieldPath)){let Rr,ly=!0;switch(Ai.op){case"<":case"<=":Rr="nullValue"in(Kt=Ai.value)?vk:"booleanValue"in Kt?{booleanValue:!1}:"integerValue"in Kt||"doubleValue"in Kt?{doubleValue:NaN}:"timestampValue"in Kt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Kt?{stringValue:""}:"bytesValue"in Kt?{bytesValue:""}:"referenceValue"in Kt?C_(Ca.empty(),Ze.empty()):"geoPointValue"in Kt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Kt?{arrayValue:{}}:"mapValue"in Kt?{mapValue:{}}:pt();break;case"==":case"in":case">=":Rr=Ai.value;break;case">":Rr=Ai.value,ly=!1;break;case"!=":case"not-in":Rr=vk}Ik(Si,Rr)===Rr&&(Si=Rr,cu=ly)}if(null!==tt.startAt)for(let Ai=0;Ai<tt.orderBy.length;++Ai)if(tt.orderBy[Ai].field.isEqual(Ko.fieldPath)){const Rr=tt.startAt.position[Ai];Ik(Si,Rr)===Rr&&(Si=Rr,cu=tt.startAt.inclusive);break}if(void 0===Si)return null;ct.push(Si),zt&&(zt=cu)}var Kt;return new Mh(ct,zt)}(_,h),$=function(tt,kt){const ct=[];let zt=!0;for(const Ko of I_(kt)){let Si,cu=!0;for(const Ai of WI(tt,Ko.fieldPath)){let Rr,ly=!0;switch(Ai.op){case">=":case">":Rr="nullValue"in(Kt=Ai.value)?{booleanValue:!1}:"booleanValue"in Kt?{doubleValue:NaN}:"integerValue"in Kt||"doubleValue"in Kt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Kt?{stringValue:""}:"stringValue"in Kt?{bytesValue:""}:"bytesValue"in Kt?C_(Ca.empty(),Ze.empty()):"referenceValue"in Kt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Kt?{arrayValue:{}}:"arrayValue"in Kt?{mapValue:{}}:"mapValue"in Kt?b_:pt(),ly=!1;break;case"==":case"in":case"<=":Rr=Ai.value;break;case"<":Rr=Ai.value,ly=!1;break;case"!=":case"not-in":Rr=b_}Dk(Si,Rr)===Rr&&(Si=Rr,cu=ly)}if(null!==tt.endAt)for(let Ai=0;Ai<tt.orderBy.length;++Ai)if(tt.orderBy[Ai].field.isEqual(Ko.fieldPath)){const Rr=tt.endAt.position[Ai];Dk(Si,Rr)===Rr&&(Si=Rr,cu=tt.endAt.inclusive);break}if(void 0===Si)return null;ct.push(Si),zt&&(zt=cu)}var Kt;return new Mh(ct,zt)}(_,h),Y=this.je(h,_,O),Ie=this.je(h,_,$),je=this.We(h,_,x),At=this.ze(h.indexId,A,Y,!!O&&O.inclusive,Ie,!!$&&$.inclusive,je);return be.forEach(At,tt=>r.Kt(tt,t.limit).next(kt=>{kt.forEach(ct=>{u=u.add(new Ze(iu(ct.documentKey)))})}))}).next(()=>u)}return be.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,u,h){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),w=_/(null!=t?t.length:1),A=[];for(let x=0;x<_;++x){const O=t?this.He(t[x/w]):sD,$=r?this.Je(e,O,r[x%w],i):this.Ye(e),Y=a?this.Xe(e,O,a[x%w],u):this.Ye(e+1);A.push(...this.createRange($,Y,h.map(Ie=>this.Je(e,O,Ie,!0))))}return A}Je(e,t,r,i){const a=new kh(e,Ze.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new kh(e,Ze.empty(),t,r);return i?a.ke():a}Ye(e){return new kh(e,Ze.empty(),sD,sD)}getFieldIndex(e,t){const r=new lV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const u=a.filter(h=>r.$e(h));return u.sort((h,_)=>_.fields.length-h.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new iD;for(const i of I_(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Ne(i.kind);N_.fe.Zt(a,u)}return r.Se()}He(e){const t=new iD;return N_.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new iD);let a=0;for(const u of I_(e)){const h=r[a++];for(const _ of i)if(this.tn(t,u.fieldPath)&&g0(h))i=this.en(i,u,h);else{const w=_.Ne(u.kind);N_.fe.Zt(h,w)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const h of i){const _=new iD;_.seed(h.Se()),N_.fe.Zt(u,_.Ne(t.kind)),a.push(_)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof ys&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=oD(e),i=aD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const u=[];return be.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{u.push(function(w,A){const x=A?new _0(A.sequenceNumber,new id($p(A.readTime),new Ze(iu(A.documentKey)),A.largestBatchId)):_0.empty(),O=w.fields.map(([$,Y])=>new GI(Fe.fromServerFormat($),Y));return new $I(w.indexId,w.collectionGroup,O,x)}(h,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:d(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=oD(e),a=aD(e);return this.sn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>be.forEach(h,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Hp((O=r).readTime),documentKey:qi(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return be.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?be.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),be.forEach(h,_=>this.rn(e,i,_).next(w=>{const A=this.on(a,_);return w.isEqual(A)?be.resolve():this.un(e,a,w,A)}))))})}an(e,t,r){return k0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:qi(t.key.path)})}cn(e,t,r){return k0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,qi(t.key.path)])}rn(e,t,r){const i=k0(e);let a=new ar(Gp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,qi(t.path)])},(u,h)=>{a=a.add(new kh(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}on(e,t){let r=new ar(Gp);const i=this.Ze(t,e);if(null==i)return r;const a=rx(t);if(null!=a){const u=e.data.field(a.fieldPath);if(g0(u))for(const h of u.arrayValue.values||[])r=r.add(new kh(t.indexId,e.key,this.He(h),i))}else r=r.add(new kh(t.indexId,e.key,sD,i));return r}un(e,t,r,i){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(u,h,_,w,A){const x=u.getIterator(),O=h.getIterator();let $=M_(x),Y=M_(O);for(;$||Y;){let Ie=!1,je=!1;if($&&Y){const At=_($,Y);At<0?je=!0:At>0&&(Ie=!0)}else null!=$?je=!0:Ie=!0;Ie?(w(Y),Y=M_(O)):je?(A($),$=M_(x)):($=M_(x),Y=M_(O))}}(r,i,Gp,u=>{a.push(this.an(e,t,u))},u=>{a.push(this.cn(e,t,u))}),be.waitFor(a)}sn(e){let t=1;return aD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Gp(u,h)).filter((u,h,_)=>!h||0!==Gp(u,_[h-1]));const i=[];i.push(e);for(const u of r){const h=Gp(u,e),_=Gp(u,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(u),i.push(u.ke());else if(_>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,""],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,""]));return a}}function PN(n){return Wi(n,"collectionParents")}function k0(n){return Wi(n,"indexEntries")}function oD(n){return Wi(n,"indexConfiguration")}function aD(n){return Wi(n,"indexState")}const kN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qo(e,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function NN(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:u},(A,x,O)=>(h++,O.delete()));a.push(_.next(()=>{Bt(1===h)}));const w=[];for(const A of t.mutations){const x=_N(e,A.key.path,t.batchId);a.push(i.delete(x)),w.push(A.key)}return be.waitFor(a).next(()=>w)}function lD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}qo.DEFAULT_COLLECTION_PERCENTILE=10,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qo.DEFAULT=new qo(41943040,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qo.DISABLED=new qo(-1,0,0);class Cx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Bt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Cx(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).Wt({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=O_(e),u=Nh(e);return u.add({}).next(h=>{Bt("number"==typeof h);const _=new mx(h,t,r,i),w=function(O,$,Y){const Ie=Y.baseMutations.map(At=>x0(O.Jt,At)),je=Y.mutations.map(At=>x0(O.Jt,At));return{userId:$,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:Ie,mutations:je}}(this.M,this.userId,_),A=[];let x=new ar((O,$)=>d(O.canonicalString(),$.canonicalString()));for(const O of i){const $=_N(this.userId,O.key.path,h);x=x.add(O.key.path.popLast()),A.push(u.put(w)),A.push(a.put($,L2))}return x.forEach(O=>{A.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.hn[h]=_.keys()}),be.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Nh(e).get(t).next(r=>r?(Bt(r.userId===this.userId),k_(this.M,r)):null)}ln(e,t){return this.hn[t]?be.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Nh(e).Wt({index:"userMutationsIndex",range:i},(u,h,_)=>{h.userId===this.userId&&(Bt(h.batchId>=r),a=k_(this.M,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).qt("userMutationsIndex",t).next(r=>r.map(i=>k_(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return O_(e).Wt({range:i},(u,h,_)=>{const[w,A,x]=u,O=iu(A);if(w===this.userId&&t.path.isEqual(O))return Nh(e).get(x).next($=>{if(!$)throw pt();Bt($.userId===this.userId),a.push(k_(this.M,$))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ar(d);const i=[];return t.forEach(a=>{const u=tD(this.userId,a.path),h=IDBKeyRange.lowerBound(u),_=O_(e).Wt({range:h},(w,A,x)=>{const[O,$,Y]=w,Ie=iu($);O===this.userId&&a.path.isEqual(Ie)?r=r.add(Y):x.done()});i.push(_)}),be.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=tD(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new ar(d);return O_(e).Wt({range:u},(_,w,A)=>{const[x,O,$]=_,Y=iu(O);x===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(h=h.add($)):A.done()}).next(()=>this.fn(e,h))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Nh(e).get(a).next(u=>{if(null===u)throw pt();Bt(u.userId===this.userId),r.push(k_(this.M,u))}))}),be.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return NN(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return O_(e).Wt({range:r},(a,u,h)=>{if(a[0]===this.userId){const _=iu(a[1]);i.push(_)}else h.done()}).next(()=>{Bt(0===i.length)})})}containsKey(e,t){return ON(e,this.userId,t)}_n(e){return FN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ON(n,e,t){const r=tD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return O_(n).Wt({range:a,jt:!0},(h,_,w)=>{const[A,x,O]=h;A===e&&x===i&&(u=!0),w.done()}).next(()=>u)}function Nh(n){return Wi(n,"mutations")}function O_(n){return Wi(n,"documentMutations")}function FN(n){return Wi(n,"mutationQueues")}class qp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new qp(0)}static gn(){return new qp(-1)}}class dV{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new qp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>I.fromTimestamp(new E(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>F_(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Bt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return F_(e).Wt((u,h)=>{const _=R0(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>be.waitFor(a)).next(()=>i)}forEachTarget(e,t){return F_(e).Wt((r,i)=>{const a=R0(i);t(a)})}yn(e){return LN(e).get("targetGlobalKey").next(t=>(Bt(null!==t),t))}pn(e,t){return LN(e).put("targetGlobalKey",t)}In(e,t){return F_(e).put(TN(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return F_(e).Wt({range:i,index:"queryTargetsIndex"},(u,h,_)=>{const w=R0(h);y0(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Oh(e);return t.forEach(u=>{const h=qi(u.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),be.waitFor(i)}removeMatchingKeys(e,t,r){const i=Oh(e);return be.forEach(t,a=>{const u=qi(a.path);return be.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Oh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Oh(e);let a=Mn();return i.Wt({range:r,jt:!0},(u,h,_)=>{const w=iu(u[1]),A=new Ze(w);a=a.add(A)}).next(()=>a)}containsKey(e,t){const r=qi(t.path),i=IDBKeyRange.bound([r],[v(r)],!1,!0);let a=0;return Oh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,h],_,w)=>{0!==u&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return F_(e).get(t).next(r=>r?R0(r):null)}}function F_(n){return Wi(n,"targets")}function LN(n){return Wi(n,"targetGlobal")}function Oh(n){return Wi(n,"targetDocuments")}function Wp(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,Ee.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==wN)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}),Ix.apply(this,arguments)}function VN([n,e],[t,r]){const i=d(n,t);return 0===i?d(e,r):i}class hV{constructor(e){this.En=e,this.buffer=new ar(VN),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fV{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Ge("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Bp(i)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Wp(i)}yield t.vn(e)}))}}class pV{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return be.resolve(o.A);const r=new hV(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(kN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kN):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,u,h,_,w;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,u=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),kp()<=ya.in.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-A}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${x} documents in `+(w-_)+`ms\nTotal Duration: ${w-A}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class gV{constructor(e,t){this.db=e,this.garbageCollector=new pV(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return uD(e,r)}removeReference(e,t,r){return uD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uD(e,t)}Mn(e,t){return function(r,i){let a=!1;return FN(r).zt(u=>ON(r,u,i).next(h=>(h&&(a=!0),be.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(u,h)=>{if(h<=t){const _=this.Mn(e,u).next(w=>{if(!w)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,I.min()),Oh(e).delete([0,qi(u.path)])))});i.push(_)}}).next(()=>be.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uD(e,t)}kn(e,t){const r=Oh(e);let i,a=o.A;return r.Wt({index:"documentTargetsIndex"},([u,h],{path:_,sequenceNumber:w})=>{0===u?(a!==o.A&&t(new Ze(iu(i)),a),a=w,i=_):a=o.A}).next(()=>{a!==o.A&&t(new Ze(iu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uD(n,e){return Oh(n).put((r=n.currentSequenceNumber,{targetId:0,path:qi(e.path),sequenceNumber:r}));var r}class UN{constructor(){this.changes=new Rh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mV{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zp(e).put(r)}removeEntry(e,t,r){return zp(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],rD(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=or.newInvalidDocument(t);return zp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(N0(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:or.newInvalidDocument(t)};return zp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(N0(t))},(i,a)=>{r={document:this.Fn(t,a),size:lD(a)}}).next(()=>r)}getEntries(e,t){let r=gl();return this.Bn(e,t,(i,a)=>{const u=this.Fn(i,a);r=r.insert(i,u)}).next(()=>r)}Ln(e,t){let r=gl(),i=new ni(Ze.comparator);return this.Bn(e,t,(a,u)=>{const h=this.Fn(a,u);r=r.insert(a,h),i=i.insert(a,lD(u))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return be.resolve();let i=new ar(HN);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(N0(i.first()),N0(i.last())),u=i.getIterator();let h=u.getNext();return zp(e).Wt({index:"documentKeyIndex",range:a},(_,w,A)=>{const x=Ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&HN(h,x)<0;)r(h,null),h=u.getNext();h&&h.isEqual(x)&&(r(h,w),h=u.hasNext()?u.getNext():null),h?A.Ut(N0(h)):A.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),rD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zp(e).qt(IDBKeyRange.bound(i,a,!0)).next(u=>{let h=gl();for(const _ of u){const w=this.Fn(Ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=gl();const u=jN(t,r),h=jN(t,id.max());return zp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(_,w,A)=>{const x=this.Fn(Ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&A.done()}).next(()=>a)}newChangeBuffer(e){return new _V(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BN(e).get("remoteDocumentGlobalKey").next(t=>(Bt(!!t),t))}On(e,t){return BN(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function nV(n,e){let t;if(e.document)t=uN(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=$p(e.noDocument.readTime);t=or.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=Ze.fromSegments(e.unknownDocument.path),i=$p(e.unknownDocument.version);t=or.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new E(r[0],r[1]);return I.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(I.min()))return r}return or.newInvalidDocument(e)}}class _V extends UN{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Rh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ar((a,u)=>d(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,h.readTime)),u.isValidDocument()){const _=DN(this.qn.M,u);i=i.add(a.path.popLast()),r+=lD(_)-h.size,t.push(this.qn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=DN(this.qn.M,u.convertToNoDocument(I.min()));t.push(this.qn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),be.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,u)=>{this.Gn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function BN(n){return Wi(n,"remoteDocumentGlobal")}function zp(n){return Wi(n,"remoteDocumentsV14")}function N0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jN(n,e){const t=e.documentKey.path.toArray();return[n,rD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HN(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ze.comparator(n,e)}class yV{constructor(e){this.M=e}kt(e,t,r,i){const a=new nD("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mN,{unique:!0}),h.createObjectStore("documentMutations"),$N(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=be.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),$N(e)),u=u.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:I.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,_){return _.store("mutations").qt().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mN,{unique:!0});const A=_.store("mutations"),x=w.map(O=>A.put(O));return be.waitFor(x)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Kn(a))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(u=u.next(()=>this.jn(a))),r<8&&i>=8&&(u=u.next(()=>this.Wn(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.zn(a))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Z2});_.createIndex("collectionPathOverlayIndex",Y2,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Q2,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:V2});_.createIndex("documentKeyIndex",U2),_.createIndex("collectionGroupIndex",B2)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:q2}).createIndex("sequenceNumberIndex",W2,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:z2}).createIndex("documentKeyIndex",K2,{unique:!1})}(e)})),u}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=lD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>be.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(h=>be.forEach(h,_=>{Bt(_.userId===a.userId);const w=k_(this.M,_);return NN(e,a.userId,w).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((u,h)=>{const _=new Q(u),w=[0,qi(_)];a.push(t.get(w).next(A=>A?be.resolve():t.put({targetId:0,path:qi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>be.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:G2});const r=t.store("collectionParents"),i=new Ex,a=u=>{if(i.add(u)){const h=u.lastSegment(),_=u.popLast();return r.put({collectionId:h,parent:qi(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const _=new Q(u);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,h,_],w)=>{const A=iu(h);return a(A.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=R0(i),u=TN(this.M,a);return t.put(u)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,u)=>{const h=t.store("remoteDocumentsV14"),_=(w=u,w.document?new Ze(Q.fromString(w.document.name).popFirst(5)):w.noDocument?Ze.fromSegments(w.noDocument.path):w.unknownDocument?Ze.fromSegments(w.unknownDocument.path):pt()).path.toArray();var w;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(A))}).next(()=>be.waitFor(i))}}function $N(n){n.createObjectStore("targetDocuments",{keyPath:H2}).createIndex("documentTargetsIndex",$2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j2,{unique:!0}),n.createObjectStore("targetGlobal")}const Dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Tx{constructor(e,t,r,i,a,u,h,_,w,A,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=u,this.document=h,this.Yn=w,this.Xn=A,this.Zn=x,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=O=>Promise.resolve(),!Tx.vt())throw new Ue(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gV(this,i),this.cs=t+"main",this.M=new IN(_),this.hs=new su(this.cs,this.Zn,new yV(this.M)),this.ls=new dV(this.referenceDelegate,this.M),this.fs=new mV(this.M),this.ds=new rV,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===A&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,Dx);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new o(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Bp(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return O0(e).get("owner").next(t=>be.resolve(this.bs(t)))}Ps(e){return cD(e).delete(this.clientId)}Vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Wi(r,"clientMetadata");return i.qt().next(a=>{const u=e.Ss(a,18e5),h=a.filter(_=>-1===u.indexOf(_));return be.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?be.resolve(!0):O0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,Dx);return!1}}return!(!this.networkEnabled||!this.inForeground)||cD(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ge("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CN(t,o.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>cD(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Cx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new cV(e)}getDocumentOverlayCache(e){return bx.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(u=this.Zn)?X2:13===u?vN:12===u?J2:11===u?yN:void pt();var u;let h;return this.hs.runTransaction(e,i,a,_=>(h=new CN(_,this.ts?this.ts.next():o.A),"readwrite-primary"===t?this.Ts(h).next(w=>!!w||this.Es(h)).next(w=>{if(!w)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ue(ye.FAILED_PRECONDITION,wN);return r(h)}).next(w=>this.Rs(h).next(()=>w)):this.Fs(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Fs(e){return O0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ye.FAILED_PRECONDITION,Dx)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return O0(e).put("owner",t)}static vt(){return su.vt()}As(e){const t=O0(e);return t.get("owner").next(r=>this.bs(r)?(Ge("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):be.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function O0(n){return Wi(n,"owner")}function cD(n){return Wi(n,"clientMetadata")}function Sx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vV{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):ox(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ze(t)).next(r=>{let i=dx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=dx();return this.indexManager.getCollectionParents(e,i).next(u=>be.forEach(u,h=>{const _=(w=t,A=h.child(i),new sd(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,A;return this.Ws(e,_,r).next(w=>{w.forEach((A,x)=>{a=a.insert(A,x)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const h of u.mutations){const _=h.key;let w=i.get(_);null==w&&(w=or.newInvalidDocument(_),i=i.insert(_,w)),ux(h,w,u.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,u)=>{lx(t,u)||(i=i.remove(a))}),i))}}class Ax{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=Mn(),i=Mn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ax(e,t.fromCache,r,i)}}class GN{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(I.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const u=this.ti(t,a);return(zI(t)||KI(t))&&this.ei(t.limitType,u,i,r)?this.Zs(e,t):(kp()<=ya.in.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ax(t)),this.Xs.Ks(e,t,Sk(r,-1)).next(h=>(u.forEach(_=>{h=h.insert(_.key,_)}),h)))});var a}ti(e,t){let r=new ar(Fk(e));return t.forEach((i,a)=>{lx(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return kp()<=ya.in.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",ax(t)),this.Xs.Ks(e,t,id.min())}}class wV{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ni(d),this.ii=new Rh(a=>Fp(a),y0),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new vV(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function qN(n,e,t,r){return new wV(n,e,t,r)}function WN(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,Ee.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const u=[],h=[];let _=Mn();for(const w of i){u.push(w.batchId);for(const A of w.mutations)_=_.add(A.key)}for(const w of a){h.push(w.batchId);for(const A of w.mutations)_=_.add(A.key)}return t.ai.qs(r,_).next(w=>({ci:w,removedBatchIds:u,addedBatchIds:h}))})})}),xx.apply(this,arguments)}function bV(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(u,h,_,w){const A=_.batch,x=A.keys();let O=be.resolve();return x.forEach($=>{O=O.next(()=>w.getEntry(h,$)).next(Y=>{const Ie=_.docVersions.get($);Bt(null!==Ie),Y.version.compareTo(Ie)<0&&(A.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),O.next(()=>u.$s.removeMutationBatch(h,A))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function zN(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function EV(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const h=[];e.targetChanges.forEach((w,A)=>{const x=i.get(A);if(!x)return;h.push(t.ls.removeMatchingKeys(a,w.removedDocuments,A).next(()=>t.ls.addMatchingKeys(a,w.addedDocuments,A)));let O=x.withSequenceNumber(a.currentSequenceNumber);var $,Y,Ie;e.targetMismatches.has(A)?O=O.withResumeToken(Ce.EMPTY_BYTE_STRING,I.min()).withLastLimboFreeSnapshotVersion(I.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,r)),i=i.insert(A,O),Y=O,Ie=w,(0===($=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&h.push(t.ls.updateTargetData(a,O))});let _=gl();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(KN(a,u,e.documentUpdates).next(w=>{_=w})),!r.isEqual(I.min())){const w=t.ls.getLastRemoteSnapshotVersion(a).next(A=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return be.waitFor(h).next(()=>u.apply(a)).next(()=>t.ai.Gs(a,_)).next(()=>_)}).then(a=>(t.si=i,a))}function KN(n,e,t){let r=Mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=gl();return t.forEach((u,h)=>{const _=i.get(u);h.isNoDocument()&&h.version.isEqual(I.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):Ge("LocalStore","Ignoring outdated watch update for ",u,". Current version:",_.version," Watch version:",h.version)}),a})}function CV(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function L_(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,be.resolve(i)):t.ls.allocateTargetId(r).next(u=>(i=new Ph(e,u,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function V_(n,e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Bp(u))throw u;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Mx.apply(this,arguments)}function dD(n,e,t){const r=Xe(n);let i=I.min(),a=Mn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,_,w){const A=Xe(h),x=A.ii.get(w);return void 0!==x?be.resolve(A.si.get(x)):A.ls.getTargetData(_,w)}(r,u,pl(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(u,h.targetId).next(_=>{a=_})}).next(()=>r.ni.Ks(u,e,t?i:I.min(),t?a:Mn())).next(h=>(QN(r,Ok(e),h),{documents:h,hi:a})))}function ZN(n,e){const t=Xe(n),r=Xe(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function YN(n,e){const t=Xe(n),r=t.ri.get(e)||I.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,Sk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QN(t,e,i),i))}function QN(n,e,t){let r=I.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function Rx(){return Rx=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);let a=Mn(),u=gl();for(const w of t){const A=e.li(w.metadata.name);w.document&&(a=a.add(A));const x=e.fi(w);x.setReadTime(e.di(w.metadata.readTime)),u=u.insert(A,x)}const h=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield L_(i,(w=r,pl(T_(Q.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>KN(w,h,u).next(A=>(h.apply(w),A)).next(A=>i.ls.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.ls.addMatchingKeys(w,a,_.targetId)).next(()=>i.ai.Gs(w,A)).next(()=>A)))}),Rx.apply(this,arguments)}function DV(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,Ee.Z)(function*(n,e,t=Mn()){const r=yield L_(n,pl(vx(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Gi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.ds.saveNamedQuery(a,e);const h=r.withResumeToken(Ce.EMPTY_BYTE_STRING,u);return i.si=i.si.insert(h.targetId,h),i.ls.updateTargetData(a,h).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),Px.apply(this,arguments)}class TV{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return be.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Gi(r.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:vx(r.bundledQuery),readTime:Gi(r.readTime)}),be.resolve();var r}}class SV{constructor(){this.overlays=new ni(Ze.comparator),this.mi=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),be.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),be.resolve()}getOverlaysForCollection(e,t,r){const i=C0(),a=t.length+1,u=new Ze(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return be.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ni((w,A)=>w-A);const u=this.overlays.getIterator();for(;u.hasNext();){const w=u.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let A=a.get(w.largestBatchId);null===A&&(A=C0(),a=a.insert(w.largestBatchId,A)),A.set(w.getKey(),w)}}const h=C0(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,A)=>h.set(w,A)),!(h.size()>=i)););return be.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new yx(t,r));let a=this.mi.get(t);void 0===a&&(a=Mn(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class kx{constructor(){this.gi=new ar(zi.yi),this.pi=new ar(zi.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new zi(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new zi(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ze(new Q([])),r=new zi(t,e),i=new zi(t,e+1),a=[];return this.pi.forEachInRange([r,i],u=>{this.Ei(u),a.push(u.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ze(new Q([])),r=new zi(t,e),i=new zi(t,e+1);let a=Mn();return this.pi.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new zi(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zi{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ze.comparator(e.key,t.key)||d(e.Vi,t.Vi)}static Ii(e,t){return d(e.Vi,t.Vi)||Ze.comparator(e.key,t.key)}}class AV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new ar(zi.yi)}checkEmpty(e){return be.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const u=new mx(a,t,r,i);this.$s.push(u);for(const h of i)this.Si=this.Si.add(new zi(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return be.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return be.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zi(t,0),i=new zi(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],u=>{const h=this.Di(u.Vi);a.push(h)}),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ar(d);return t.forEach(i=>{const a=new zi(i,0),u=new zi(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,u],h=>{r=r.add(h.Vi)})}),be.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const u=new zi(new Ze(a),0);let h=new ar(d);return this.Si.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.Vi)),!0)},u),be.resolve(this.xi(h))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Bt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return be.forEach(t.mutations,i=>{const a=new zi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new zi(t,0),i=this.Si.firstAfterOrEqual(r);return be.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return be.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class xV{constructor(e){this.ki=e,this.docs=new ni(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return be.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=gl();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():or.newInvalidDocument(i))}),be.resolve(r)}getAllFromCollection(e,t,r){let i=gl();const a=new Ze(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:_}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||JL(QL(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}Mi(e,t){return be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MV(this)}getSize(e){return be.resolve(this.size)}}class MV extends UN{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),be.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class RV{constructor(e){this.persistence=e,this.Oi=new Rh(t=>Fp(t),y0),this.lastRemoteSnapshotVersion=I.min(),this.highestTargetId=0,this.Fi=0,this.$i=new kx,this.targetCount=0,this.Bi=qp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),be.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.In(t),be.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),be.waitFor(a).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return be.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),be.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),be.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return be.resolve(r)}containsKey(e,t){return be.resolve(this.$i.containsKey(t))}}class PV{constructor(e,t){this.Li={},this.overlays={},this.ts=new o(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new RV(this),this.indexManager=new uV,this.fs=new xV(r=>this.referenceDelegate.Ui(r)),this.M=new IN(t),this.ds=new TV(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new AV(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new kV(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return be.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class kV extends bN{constructor(e){super(),this.currentSequenceNumber=e}}class Nx{constructor(e){this.persistence=e,this.Qi=new kx,this.ji=null}static Wi(e){return new Nx(e)}get zi(){if(this.ji)return this.ji;throw pt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),be.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.zi,r=>{const i=Ze.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,I.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return be.or([()=>be.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function JN(n,e){return`firestore_clients_${n}_${e}`}function XN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ox(n,e){return`firestore_targets_${n}_${e}`}class hD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ue(i.error.code,i.error.message))),u?new hD(e,t,i.state,a):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class F0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new F0(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=XI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=w_(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new fD(e,a):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fx(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lx{constructor(){this.activeTargetIds=XI()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vx{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ni(d),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=JN(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Lx),this.ar=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(JN(e.persistenceKey,i));if(a){const u=fD.Ji(i,a);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ox(this.persistenceKey,e));if(r){const i=F0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ox(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ge("SharedClientState","READ",e,t),t}setItem(e,t){Ge("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let u=o.A;if(null!=a)try{const h=JSON.parse(a);Bt("number"==typeof h),u=h}catch(h){Er("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==o.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new hD(this.currentUser,e,t,r),a=XN(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=XN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=Ox(this.persistenceKey,e),a=new F0(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return fD.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return hD.Ji(new Di(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return F0.Ji(i,t)}wr(e){return Fx.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),u=[],h=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Or(u,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=XI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class eO{constructor(){this.Fr=new Lx,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Lx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NV{Br(e){}shutdown(){}}class tO{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const OV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class FV{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class LV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const u=this.oo(e,t);Ge("RestConnection","Sending: ",u,r);const h={};return this.uo(h,i,a),this.ao(e,u,h,r).then(_=>(Ge("RestConnection","Received: ",_),_),_=>{throw Np("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ah,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${OV[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,u)=>{const h=new jI;h.listenOnce(ZA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case y_.NO_ERROR:const w=h.getResponseJson();Ge("Connection","XHR received:",JSON.stringify(w)),a(w);break;case y_.TIMEOUT:Ge("Connection",'RPC "'+e+'" timed out'),u(new Ue(ye.DEADLINE_EXCEEDED,"Request time out"));break;case y_.HTTP_ERROR:const A=h.getStatus();if(Ge("Connection",'RPC "'+e+'" failed with status:',A,"response text:",h.getResponseText()),A>0){const x=h.getResponseJson().error;if(x&&x.status&&x.message){const O=function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Y)>=0?Y:ye.UNKNOWN}(x.status);u(new Ue(O,x.message))}else u(new Ue(ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Ue(ye.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ge("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ck(),u=dk(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new QA({})),this.uo(h.initMessageHeaders,t,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Ge("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let A=!1,x=!1;const O=new FV({jr:Y=>{x?Ge("Connection","Not sending because WebChannel is closed:",Y):(A||(Ge("Connection","Opening WebChannel transport."),w.open(),A=!0),Ge("Connection","WebChannel sending:",Y),w.send(Y))},Wr:()=>w.close()}),$=(Y,Ie,je)=>{Y.listen(Ie,At=>{try{je(At)}catch(tt){setTimeout(()=>{throw tt},0)}})};return $(w,Pp.EventType.OPEN,()=>{x||Ge("Connection","WebChannel transport opened.")}),$(w,Pp.EventType.CLOSE,()=>{x||(x=!0,Ge("Connection","WebChannel transport closed"),O.eo())}),$(w,Pp.EventType.ERROR,Y=>{x||(x=!0,Np("Connection","WebChannel transport errored:",Y),O.eo(new Ue(ye.UNAVAILABLE,"The operation could not be completed")))}),$(w,Pp.EventType.MESSAGE,Y=>{var Ie;if(!x){const je=Y.data[0];Bt(!!je);const At=je,tt=At.error||(null===(Ie=At[0])||void 0===Ie?void 0:Ie.error);if(tt){Ge("Connection","WebChannel received error:",tt);const kt=tt.status;let ct=function(Kt){const Ko=fi[Kt];if(void 0!==Ko)return Qk(Ko)}(kt),zt=tt.message;void 0===ct&&(ct=ye.INTERNAL,zt="Unknown error status: "+kt+" with message "+tt.message),x=!0,O.eo(new Ue(ct,zt)),w.close()}else Ge("Connection","WebChannel received:",je),O.no(je)}}),$(u,YA.STAT_EVENT,Y=>{Y.stat===BI.PROXY?Ge("Connection","Detected buffering proxy"):Y.stat===BI.NOPROXY&&Ge("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function nO(){return"undefined"!=typeof window?window:null}function pD(){return"undefined"!=typeof document?document:null}function L0(n){return new D2(n,!0)}class Ux{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class rO{constructor(e,t,r,i,a,u,h,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Ux(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Ee.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ue(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Ee.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VV extends rO{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function A2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:pt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(Bt(void 0===w||"string"==typeof w),Ce.fromBase64String(w||"")):(Bt(void 0===w||w instanceof Uint8Array),Ce.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(_){const w=void 0===_.code?ye.UNKNOWN:Qk(_.code);return new Ue(w,_.message||"")}(u);t=new eN(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Qu(n,r.document.name),a=Gi(r.document.updateTime),u=new Zs({mapValue:{fields:r.document.fields}}),h=or.newFoundDocument(i,a,u);t=new eD(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Qu(n,r.document),a=r.readTime?Gi(r.readTime):I.min(),u=or.newNoDocument(i,a);t=new eD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Qu(n,r.document);t=new eD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,a=new m2(r.count||0);t=new Xk(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return I.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?I.min():a.readTime?Gi(a.readTime):I.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=A0(this.M),t.addTarget=function(i,a){let u;const h=a.target;return u=qI(h)?{documents:cN(i,h)}:{query:dN(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=iN(i,a.resumeToken):a.snapshotVersion.compareTo(I.min())>0&&(u.readTime=T0(i,a.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function M2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=A0(this.M),t.removeTarget=e,this.Oo(t)}}class UV extends rO{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function x2(n,e){return n&&n.length>0?(Bt(void 0!==e),n.map(t=>function(r,i){let a=Gi(r.updateTime?r.updateTime:i);return a.isEqual(I.min())&&(a=Gi(i)),new f2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.Jo(r,t)}return Bt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=A0(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>x0(this.M,r))};this.Oo(t)}}class BV extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ye.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ye.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class jV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Er(t),this.su=!1):Ge("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class HV{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;Fh(u)&&(Ge("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(w){const A=Xe(w);A.lu.add(4),yield U_(A),A._u.set("Unknown"),A.lu.delete(4),yield V0(A)}),function(w){return _.apply(this,arguments)})(u))}))}),this._u=new jV(r,i)}}function V0(n){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ee.Z)(function*(n){if(Fh(n))for(const e of n.fu)yield e(!0)}),Bx.apply(this,arguments)}function U_(n){return jx.apply(this,arguments)}function jx(){return jx=(0,Ee.Z)(function*(n){for(const e of n.fu)yield e(!1)}),jx.apply(this,arguments)}function gD(n,e){const t=Xe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Gx(t)?$x(t):j_(t).Co()&&Hx(t,e))}function U0(n,e){const t=Xe(n),r=j_(t);t.hu.delete(e),r.Co()&&iO(t,e),0===t.hu.size&&(r.Co()?r.ko():Fh(t)&&t._u.set("Unknown"))}function Hx(n,e){n.wu.Z(e.targetId),j_(n).Qo(e)}function iO(n,e){n.wu.Z(e),j_(n).jo(e)}function $x(n){n.wu=new E2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),j_(n).start(),n._u.iu()}function Gx(n){return Fh(n)&&!j_(n).Do()&&n.hu.size>0}function Fh(n){return 0===Xe(n).lu.size}function sO(n){n.wu=void 0}function $V(n){return qx.apply(this,arguments)}function qx(){return qx=(0,Ee.Z)(function*(n){n.hu.forEach((e,t)=>{Hx(n,e)})}),qx.apply(this,arguments)}function GV(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Ee.Z)(function*(n,e){sO(n),Gx(n)?(n._u.uu(e),$x(n)):n._u.set("Unknown")}),Wx.apply(this,arguments)}function qV(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,Ee.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof eN&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mD(n,r)}else if(e instanceof eD?n.wu.ut(e):e instanceof Xk?n.wu._t(e):n.wu.ht(e),!t.isEqual(I.min()))try{const r=yield zN(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.wu.yt(a);return u.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.hu.get(_);w&&i.hu.set(_,w.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const _=i.hu.get(h);if(!_)return;i.hu.set(h,_.withResumeToken(Ce.EMPTY_BYTE_STRING,_.snapshotVersion)),iO(i,h);const w=new Ph(_.target,h,1,_.sequenceNumber);Hx(i,w)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),yield mD(n,r)}var r}),zx.apply(this,arguments)}function mD(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ee.Z)(function*(n,e,t){if(!Bp(e))throw e;n.lu.add(1),yield U_(n),n._u.set("Offline"),t||(t=()=>zN(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ge("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield V0(n)}))}),Kx.apply(this,arguments)}function oO(n,e){return e().catch(t=>mD(n,t,e))}function B_(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ee.Z)(function*(n){const e=Xe(n),t=Lh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;WV(e);)try{const i=yield CV(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,zV(e,i)}catch(i){yield mD(e,i)}aO(e)&&lO(e)}),Zx.apply(this,arguments)}function WV(n){return Fh(n)&&n.cu.length<10}function zV(n,e){n.cu.push(e);const t=Lh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function aO(n){return Fh(n)&&!Lh(n).Do()&&n.cu.length>0}function lO(n){Lh(n).start()}function KV(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Ee.Z)(function*(n){Lh(n).Xo()}),Yx.apply(this,arguments)}function ZV(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,Ee.Z)(function*(n){const e=Lh(n);for(const t of n.cu)e.Ho(t.mutations)}),Qx.apply(this,arguments)}function YV(n,e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Ee.Z)(function*(n,e,t){const r=n.cu.shift(),i=_x.from(r,e,t);yield oO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield B_(n)}),Jx.apply(this,arguments)}function QV(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Ee.Z)(function*(n,e){var t;e&&Lh(n).zo&&(yield(t=(0,Ee.Z)(function*(r,i){if(Yk(a=i.code)&&a!==ye.ABORTED){const u=r.cu.shift();Lh(r).No(),yield oO(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield B_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),aO(n)&&lO(n)}),Xx.apply(this,arguments)}function uO(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Ee.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=Fh(t);t.lu.add(3),yield U_(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield V0(t)}),eM.apply(this,arguments)}function tM(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,Ee.Z)(function*(n,e){const t=Xe(n);e?(t.lu.delete(2),yield V0(t)):e||(t.lu.add(2),yield U_(t),t._u.set("Unknown"))}),nM.apply(this,arguments)}function j_(n){return n.mu||(n.mu=function(e,t,r){const i=Xe(e);return i.tu(),new VV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:$V.bind(null,n),Jr:GV.bind(null,n),Ko:qV.bind(null,n)}),n.fu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.mu.No(),Gx(n)?$x(n):n._u.set("Unknown")):(yield n.mu.stop(),sO(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Lh(n){return n.gu||(n.gu=function(e,t,r){const i=Xe(e);return i.tu(),new UV(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:KV.bind(null,n),Jr:QV.bind(null,n),Yo:ZV.bind(null,n),Jo:YV.bind(null,n)}),n.fu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.gu.No(),yield B_(n)):(yield n.gu.stop(),n.cu.length>0&&(Ge("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class rM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new rM(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Bp(n))return new Ue(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class $_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=dx(),this.sortedSet=new ni(this.comparator)}static emptySet(e){return new $_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cO{constructor(){this.yu=new ni(Ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):pt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class G_{constructor(e,t,r,i,a,u,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new G_(e,t,$_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class JV{constructor(){this.Iu=void 0,this.listeners=[]}}class XV{constructor(){this.queries=new Rh(e=>Nk(e),v0),this.onlineState="Unknown",this.Tu=new Set}}function iM(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new JV),i)try{a.Iu=yield t.onListen(r)}catch(u){const h=H_(u,`Initialization of query '${ax(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&lM(t)}),sM.apply(this,arguments)}function oM(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),aM.apply(this,arguments)}function eU(n,e){const t=Xe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Au(i)&&(r=!0);u.Iu=i}}r&&lM(t)}function tU(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function lM(n){n.Tu.forEach(e=>{e.next()})}class uM{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new G_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class nU{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class dO{constructor(e){this.M=e}li(e){return Qu(this.M,e)}fi(e){return e.metadata.exists?uN(this.M,e.document,!1):or.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Gi(e)}}class rU{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hO(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Q.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new dO(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Mn()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function IV(n,e,t,r){return Rx.apply(this,arguments)}(e.localStore,new dO(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield DV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function hO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fO{constructor(e){this.key=e}}class pO{constructor(e){this.key=e}}class gO{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Mn(),this.mutatedKeys=Mn(),this.Lu=Fk(e),this.Uu=new $_(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new cO,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const _=zI(this.query)&&i.size===this.query.limit?i.last():null,w=KI(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const O=i.get(A),$=lx(this.query,x)?x:null,Y=!!O&&this.mutatedKeys.has(O.key),Ie=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let je=!1;O&&$?O.data.isEqual($.data)?Y!==Ie&&(r.track({type:3,doc:$}),je=!0):this.Qu(O,$)||(r.track({type:2,doc:$}),je=!0,(_&&this.Lu($,_)>0||w&&this.Lu($,w)<0)&&(h=!0)):!O&&$?(r.track({type:0,doc:$}),je=!0):O&&!$&&(r.track({type:1,doc:O}),je=!0,(_||w)&&(h=!0)),je&&($?(u=u.add($),a=Ie?a.add(A):a.delete(A)):(u=u.delete(A),a=a.delete(A)))}),zI(this.query)||KI(this.query))for(;u.size>this.query.limit;){const A=zI(this.query)?u.last():u.first();u=u.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{Uu:u,Ku:r,ei:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((w,A)=>function(x,O){const $=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return $(x)-$(O)}(w.type,A.type)||this.Lu(w.doc,A.doc)),this.ju(r);const u=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,_=h!==this.$u;return this.$u=h,0!==a.length||_?{snapshot:new G_(this.query,e.Uu,i,a,e.mutatedKeys,0===h,_,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new cO,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Mn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new pO(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new fO(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=Mn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return G_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class iU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class sU{constructor(e){this.key=e,this.Xu=!1}}class oU{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new Rh(h=>Nk(h),v0),this.ea=new Map,this.na=new Set,this.sa=new ni(Ze.comparator),this.ia=new Map,this.ra=new kx,this.oa={},this.ua=new Map,this.aa=qp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function aU(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,Ee.Z)(function*(n,e){const t=kM(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const u=yield L_(t.localStore,pl(e));t.isPrimaryClient&&gD(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield dM(t,e,r,"current"===h)}return i}),cM.apply(this,arguments)}function dM(n,e,t,r){return hM.apply(this,arguments)}function hM(){return hM=(0,Ee.Z)(function*(n,e,t,r){n.ha=(A,x,O)=>{return($=(0,Ee.Z)(function*(Y,Ie,je,At){let tt=Ie.view.Gu(je);tt.ei&&(tt=yield dD(Y.localStore,Ie.query,!1).then(({documents:zt})=>Ie.view.Gu(zt,tt)));const kt=At&&At.targetChanges.get(Ie.targetId),ct=Ie.view.applyChanges(tt,Y.isPrimaryClient,kt);return EM(Y,Ie.targetId,ct.zu),ct.snapshot}),function(Y,Ie,je,At){return $.apply(this,arguments)})(n,A,x,O);var $};const i=yield dD(n.localStore,e,!0),a=new gO(e,i.hi),u=a.Gu(i.documents),h=D0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,h);EM(n,t,_.zu);const w=new iU(e,t,a);return n.ta.set(e,w),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),hM.apply(this,arguments)}function lU(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!v0(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield V_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),U0(t.remoteStore,r.targetId),q_(t,r.targetId)}).catch(Wp))):(q_(t,r.targetId),yield V_(t.localStore,r.targetId,!0))}),fM.apply(this,arguments)}function pM(){return pM=(0,Ee.Z)(function*(n,e,t){const r=NM(n);try{const i=yield function(a,u){const h=Xe(a),_=E.now(),w=u.reduce((x,O)=>x.add(O.key),Mn());let A;return h.persistence.runTransaction("Locally write mutations","readwrite",x=>h.ai.qs(x,w).next(O=>{A=O;const $=[];for(const Y of u){const Ie=g2(Y,A.get(Y.key));null!=Ie&&$.push(new Up(Y.key,Ie,Tk(Ie.value.mapValue),hi.exists(!0)))}return h.$s.addMutationBatch(x,_,$,u)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let _=a.oa[a.currentUser.toKey()];_||(_=new ni(d)),_=_.insert(u,h),a.oa[a.currentUser.toKey()]=_}(r,i.batchId,t),yield od(r,i.changes),yield B_(r.remoteStore)}catch(i){const a=H_(i,"Failed to persist write");t.reject(a)}}),pM.apply(this,arguments)}function mO(n,e){return gM.apply(this,arguments)}function gM(){return gM=(0,Ee.Z)(function*(n,e){const t=Xe(n);try{const r=yield EV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ia.get(a);u&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Bt(u.Xu):i.removedDocuments.size>0&&(Bt(u.Xu),u.Xu=!1))}),yield od(t,r,e)}catch(r){yield Wp(r)}}),gM.apply(this,arguments)}function _O(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,u)=>{const h=u.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=Xe(a);h.onlineState=u;let _=!1;h.queries.forEach((w,A)=>{for(const x of A.listeners)x.Eu(u)&&(_=!0)}),_&&lM(h)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cU(n,e,t){return mM.apply(this,arguments)}function mM(){return mM=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let u=new ni(Ze.comparator);u=u.insert(a,or.newNoDocument(a,I.min()));const h=Mn().add(a),_=new I0(I.min(),new Map,new ar(d),u,h);yield mO(r,_),r.sa=r.sa.remove(a),r.ia.delete(e),CM(r)}else yield V_(r.localStore,e,!1).then(()=>q_(r,e,t)).catch(Wp)}),mM.apply(this,arguments)}function dU(n,e){return _M.apply(this,arguments)}function _M(){return _M=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield bV(t.localStore,e);bM(t,r,null),wM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,i)}catch(i){yield Wp(i)}}),_M.apply(this,arguments)}function hU(n,e,t){return yM.apply(this,arguments)}function yM(){return yM=(0,Ee.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(a,u){const h=Xe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.$s.lookupMutationBatch(_,u).next(A=>(Bt(null!==A),w=A.keys(),h.$s.removeMutationBatch(_,A))).next(()=>h.$s.performConsistencyCheck(_)).next(()=>h.ai.qs(_,w))})}(r.localStore,e);bM(r,e,t),wM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,i)}catch(i){yield Wp(i)}}),yM.apply(this,arguments)}function vM(){return vM=(0,Ee.Z)(function*(n,e){const t=Xe(n);Fh(t.remoteStore)||Ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Xe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.$s.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=H_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),vM.apply(this,arguments)}function wM(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function bM(n,e,t){const r=Xe(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function q_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||yO(n,r)})}function yO(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(U0(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),CM(n))}function EM(n,e,t){for(const r of t)r instanceof fO?(n.ra.addReference(r.key,e),pU(n,r)):r instanceof pO?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||yO(n,r.key)):pt()}function pU(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.na.add(r),CM(n))}function CM(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ze(Q.fromString(e)),r=n.aa.next();n.ia.set(r,new sU(t)),n.sa=n.sa.insert(t,r),gD(n.remoteStore,new Ph(pl(T_(t.path)),r,2,o.A))}}function od(n,e,t){return IM.apply(this,arguments)}function IM(){return IM=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[],u=[];var h;r.ta.isEmpty()||(r.ta.forEach((h,_)=>{u.push(r.ha(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const A=Ax.Js(_.targetId,w);a.push(A)}}))}),yield Promise.all(u),r.Zu.Ko(i),yield(h=(0,Ee.Z)(function*(_,w){const A=Xe(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>be.forEach(w,O=>be.forEach(O.zs,$=>A.persistence.referenceDelegate.addReference(x,O.targetId,$)).next(()=>be.forEach(O.Hs,$=>A.persistence.referenceDelegate.removeReference(x,O.targetId,$)))))}catch(x){if(!Bp(x))throw x;Ge("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const O=x.targetId;if(!x.fromCache){const $=A.si.get(O),Ie=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);A.si=A.si.insert(O,Ie)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),IM.apply(this,arguments)}function gU(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=yield WN(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(u=>{u.forEach(h=>{h.reject(new Ue(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.ci)}var i}),DM.apply(this,arguments)}function mU(n,e){const t=Xe(n),r=t.ia.get(e);if(r&&r.Xu)return Mn().add(r.key);{let i=Mn();const a=t.ea.get(e);if(!a)return i;for(const u of a){const h=t.ta.get(u);i=i.unionWith(h.view.qu)}return i}}function _U(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Ee.Z)(function*(n,e){const t=Xe(n),r=yield dD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&EM(t,e.targetId,i.zu),i}),TM.apply(this,arguments)}function yU(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,Ee.Z)(function*(n,e){const t=Xe(n);return YN(t.localStore,e).then(r=>od(t,r))}),SM.apply(this,arguments)}function vU(n,e,t,r){return AM.apply(this,arguments)}function AM(){return AM=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n),a=yield function(u,h){const _=Xe(u),w=Xe(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>w.ln(A,h).next(x=>x?_.ai.qs(A,x):be.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield B_(i.remoteStore):"acknowledged"===t||"rejected"===t?(bM(i,e,r||null),wM(i,e),h=e,Xe(Xe(i.localStore).$s).dn(h)):pt(),yield od(i,a)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}),AM.apply(this,arguments)}function xM(){return xM=(0,Ee.Z)(function*(n,e){const t=Xe(n);if(kM(t),NM(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield vO(t,r.toArray());t.ca=!0,yield tM(t.remoteStore,!0);for(const a of i)gD(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(q_(t,u),V_(t.localStore,u,!0))),U0(t.remoteStore,u)}),yield i,yield vO(t,r),function(a){const u=Xe(a);u.ia.forEach((h,_)=>{U0(u.remoteStore,_)}),u.ra.bi(),u.ia=new Map,u.sa=new ni(Ze.comparator)}(t),t.ca=!1,yield tM(t.remoteStore,!1)}}),xM.apply(this,arguments)}function vO(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,Ee.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[];for(const u of e){let h;const _=r.ea.get(u);if(_&&0!==_.length){h=yield L_(r.localStore,pl(_[0]));for(const w of _){const A=r.ta.get(w),x=yield _U(r,A);x.snapshot&&a.push(x.snapshot)}}else{const w=yield ZN(r.localStore,u);h=yield L_(r.localStore,w),yield dM(r,wO(w),u,!1)}i.push(h)}return r.Zu.Ko(a),i}),MM.apply(this,arguments)}function wO(n){return Pk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bU(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).Os()}function EU(n,e,t,r){return RM.apply(this,arguments)}function RM(){return RM=(0,Ee.Z)(function*(n,e,t,r){const i=Xe(n);if(i.ca)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield YN(i.localStore,Ok(a[0])),h=I0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield od(i,u,h);break}case"rejected":yield V_(i.localStore,e,!0),q_(i,e,r);break;default:pt()}}),RM.apply(this,arguments)}function CU(n,e,t){return PM.apply(this,arguments)}function PM(){return PM=(0,Ee.Z)(function*(n,e,t){const r=kM(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const a=yield ZN(r.localStore,i),u=yield L_(r.localStore,a);yield dM(r,wO(a),u.targetId,!1),gD(r.remoteStore,u)}for(const i of t)r.ea.has(i)&&(yield V_(r.localStore,i,!1).then(()=>{U0(r.remoteStore,i),q_(r,i)}).catch(Wp))}}),PM.apply(this,arguments)}function kM(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cU.bind(null,e),e.Zu.Ko=eU.bind(null,e.eventManager),e.Zu.la=tU.bind(null,e.eventManager),e}function NM(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hU.bind(null,e),e}class bO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=L0(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return qN(this.persistence,new GN,e.initialUser,this.M)}_a(e){return new PV(Nx.Wi,this.M)}da(e){return new eO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class EO extends bO{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield NM(r.ga.syncEngine),yield B_(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return qN(this.persistence,new GN,e.initialUser,this.M)}wa(e){return new fV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new Tx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nO(),pD(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new eO}}class DU extends EO{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof Vx&&(r.sharedClientState.syncEngine={kr:vU.bind(null,i),Mr:EU.bind(null,i),Or:CU.bind(null,i),Os:bU.bind(null,i),Nr:yU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,Ee.Z)(function*(u){yield function wU(n,e){return xM.apply(this,arguments)}(r.ga.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}da(e){const t=nO();if(!Vx.vt(t))throw new Ue(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Sx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class OM{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_O(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=gU.bind(null,r.syncEngine),yield tM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new XV}createDatastore(e){const t=L0(e.databaseInfo.databaseId),r=new LV(e.databaseInfo);return new BV(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>_O(this.syncEngine,h,0),u=tO.vt()?new tO:new NV,new HV(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,_,w){const A=new oU(r,i,a,u,h,_);return w&&(A.ca=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Xe(t);Ge("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield U_(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function CO(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _D{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TU{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new nU(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,Ee.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class SU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,u){const h=Xe(a),_=A0(h.M)+"/documents",w={documents:u.map($=>S0(h.M,$))},A=yield h.co("BatchGetDocuments",_,w),x=new Map;A.forEach($=>{const Y=function S2(n,e){return"found"in e?function(t,r){Bt(!!r.found);const i=Qu(t,r.found.name),a=Gi(r.found.updateTime),u=new Zs({mapValue:{fields:r.found.fields}});return or.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Bt(!!r.missing),Bt(!!r.readTime);const i=Qu(t,r.missing),a=Gi(r.readTime);return or.newNoDocument(i,a)}(n,e):pt()}(h.M,$);x.set(Y.key.toString(),Y)});const O=[];return u.forEach($=>{const Y=x.get($.toString());Bt(!!Y),O.push(Y)}),O}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new E0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new cx(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const u=Xe(i),h=A0(u.M)+"/documents",_={writes:a.map(w=>x0(u.M,w))};yield u.ro("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=I.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?hi.updateTime(t):hi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(I.min()))throw new Ue(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hi.updateTime(t)}return hi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class AU{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Ux(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,Ee.Z)(function*(){const t=new SU(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yk(t)}return!1}}class xU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Di.UNAUTHENTICATED,this.clientId=c.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ee.Z)(function*(h){Ge("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=H_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function IO(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield WN(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),FM.apply(this,arguments)}function DO(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VM(n);Ge("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>uO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>uO(e.remoteStore,a)),n.onlineComponents=e}),LM.apply(this,arguments)}function VM(n){return UM.apply(this,arguments)}function UM(){return UM=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ge("FirestoreClient","Using default OfflineComponentProvider"),yield IO(n,new bO)),n.offlineComponents}),UM.apply(this,arguments)}function yD(n){return BM.apply(this,arguments)}function BM(){return BM=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ge("FirestoreClient","Using default OnlineComponentProvider"),yield DO(n,new OM)),n.onlineComponents}),BM.apply(this,arguments)}function TO(n){return VM(n).then(e=>e.persistence)}function jM(n){return VM(n).then(e=>e.localStore)}function SO(n){return yD(n).then(e=>e.remoteStore)}function HM(n){return yD(n).then(e=>e.syncEngine)}function W_(n){return $M.apply(this,arguments)}function $M(){return $M=(0,Ee.Z)(function*(n){const e=yield yD(n),t=e.eventManager;return t.onListen=aU.bind(null,e.syncEngine),t.onUnlisten=lU.bind(null,e.syncEngine),t}),$M.apply(this,arguments)}function AO(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,h,_){const w=new _D({next:x=>{a.enqueueAndForget(()=>oM(i,A));const O=x.docs.has(u);!O&&x.fromCache?_.reject(new Ue(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&x.fromCache&&h&&"server"===h.source?_.reject(new Ue(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new uM(T_(u.path),w,{includeMetadataChanges:!0,Du:!0});return iM(i,A)}(yield W_(n),n.asyncQueue,e,t,r)})),r.promise}function xO(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,h,_){const w=new _D({next:x=>{a.enqueueAndForget(()=>oM(i,A)),x.fromCache&&"server"===h.source?_.reject(new Ue(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new uM(u,w,{includeMetadataChanges:!0,Du:!0});return iM(i,A)}(yield W_(n),n.asyncQueue,e,t,r)})),r.promise}const MO=new Map;function GM(n,e,t){if(!t)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RO(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PO(n){if(!Ze.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kO(n){if(Ze.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vD(n);throw new Ue(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NO(n,e){if(e<=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class OO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,RO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OO({}),this._settingsFrozen=!1,e instanceof Ca?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ue(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ue(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pk;switch(t.type){case"gapi":const r=t.client;return Bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new _k(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ue(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=MO.get(e);t&&(Ge("ComponentProvider","Removing Datastore"),MO.delete(e),t.terminate())}(this),Promise.resolve()}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class Ys{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Ju extends Ys{constructor(e,t,r){super(e,t,T_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new Ze(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function FO(n,e,...t){if(n=(0,L.m9)(n),GM("collection","path",e),n instanceof B0){const r=Q.fromString(e,...t);return kO(r),new Ju(n,null,r)}{if(!(n instanceof lr||n instanceof Ju))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Q.fromString(e,...t));return kO(r),new Ju(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=c.R()),GM("doc","path",e),n instanceof B0){const r=Q.fromString(e,...t);return PO(r),new lr(n,null,new Ze(r))}{if(!(n instanceof lr||n instanceof Ju))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Q.fromString(e,...t));return PO(r),new lr(n.firestore,n instanceof Ju?n.converter:null,new Ze(r))}}function LO(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof lr||n instanceof Ju)&&(e instanceof lr||e instanceof Ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VO(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ys&&e instanceof Ys&&n.firestore===e.firestore&&v0(n._query,e._query)&&n.converter===e.converter}class BU{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Ux(this,"async_queue_retry"),this.Ua=()=>{const t=pD();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=pD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=pD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Ti;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Bp(t))throw t;Ge("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Er("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=rM.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&pt()}verifyOperationInProgress(){}ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function qM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class jU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cr extends B0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new BU,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||UO(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||UO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new f0(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new xU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function BO(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield IO(n,t),yield DO(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ye.FAILED_PRECONDITION||a.code===ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function jO(n){if(n._initialized||n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Ce.fromBase64String(e))}catch(t){throw new Ue(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kp{constructor(e){this._methodName=e}}class bD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return d(this._lat,e._lat)||d(this._long,e._long)}}const QU=/^__.*__$/;class JU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Up(e,this.data,this.fieldMask,t,this.fieldTransforms):new b0(e,this.data,t,this.fieldTransforms)}}class HO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Up(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $O(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class ED{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new ED(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return DD(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if($O(this.Ya)&&QU.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class XU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||L0(e)}uc(e,t,r,i=!1){return new ED({Ya:e,methodName:t,oc:r,path:Fe.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Zp(n){const e=n._freezeSettings(),t=L0(n._databaseId);return new XU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CD(n,e,t,r,i,a={}){const u=n.uc(a.merge||a.mergeFields?2:0,e,t,i);ZM("Data must be an object, but it was:",u,r);const h=WO(r,u);let _,w;if(a.merge)_=new ze(u.fieldMask),w=u.fieldTransforms;else if(a.mergeFields){const A=[];for(const x of a.mergeFields){const O=YM(e,x,t);if(!u.contains(O))throw new Ue(ye.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);KO(A,O)||A.push(O)}_=new ze(A),w=u.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,w=u.fieldTransforms;return new JU(new Zs(h),_,w)}class j0 extends Kp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j0}}function GO(n,e,t){return new ED({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class WM extends Kp{_toFieldTransform(e){return new w0(e.path,new A_)}isEqual(e){return e instanceof WM}}class eB extends Kp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=GO(this,e,!0),r=this.ac.map(a=>Yp(a,t)),i=new Lp(r);return new w0(e.path,i)}isEqual(e){return this===e}}class tB extends Kp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=GO(this,e,!0),r=this.ac.map(a=>Yp(a,t)),i=new Vp(r);return new w0(e.path,i)}isEqual(e){return this===e}}class nB extends Kp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new x_(e.M,Uk(e.M,this.cc));return new w0(e.path,t)}isEqual(e){return this===e}}function zM(n,e,t,r){const i=n.uc(1,e,t);ZM("Data must be an object, but it was:",i,r);const a=[],u=Zs.empty();k(r,(_,w)=>{const A=ID(e,_,t);w=(0,L.m9)(w);const x=i.nc(A);if(w instanceof j0)a.push(A);else{const O=Yp(w,x);null!=O&&(a.push(A),u.set(A,O))}});const h=new ze(a);return new HO(u,h,i.fieldTransforms)}function KM(n,e,t,r,i,a){const u=n.uc(1,e,t),h=[YM(e,r,t)],_=[i];if(a.length%2!=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)h.push(YM(e,a[O])),_.push(a[O+1]);const w=[],A=Zs.empty();for(let O=h.length-1;O>=0;--O)if(!KO(w,h[O])){const $=h[O];let Y=_[O];Y=(0,L.m9)(Y);const Ie=u.nc($);if(Y instanceof j0)w.push($);else{const je=Yp(Y,Ie);null!=je&&(w.push($),A.set($,je))}}const x=new ze(w);return new HO(A,x,u.fieldTransforms)}function qO(n,e,t,r=!1){return Yp(t,n.uc(r?4:3,e))}function Yp(n,e){if(zO(n=(0,L.m9)(n)))return ZM("Unsupported field value:",e,n),WO(n,e);if(n instanceof Kp)return function(t,r){if(!$O(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=Yp(u,r.sc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Uk(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=E.fromDate(t);return{timestampValue:T0(r.M,i)}}if(t instanceof E){const i=new E(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:T0(r.M,i)}}if(t instanceof bD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:iN(r.M,t._byteString)};if(t instanceof lr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${vD(t)}`)}(n,e)}function WO(n,e){const t={};return B(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):k(n,(r,i)=>{const a=Yp(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function zO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof E||n instanceof bD||n instanceof Xu||n instanceof lr||n instanceof Kp)}function ZM(n,e,t){if(!zO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vD(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function YM(n,e,t){if((e=(0,L.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return ID(n,e);throw DD("Field path arguments must be of type string or ",n,!1,void 0,t)}const rB=new RegExp("[~\\*/\\[\\]]");function ID(n,e,t){if(e.search(rB)>=0)throw DD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch(r){throw DD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DD(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Ue(ye.INVALID_ARGUMENT,h+n+_)}function KO(n,e){return n.some(t=>t.isEqual(e))}class H0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iB extends H0{data(){return super.data()}}function TD(n,e){return"string"==typeof e?ID(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ld extends H0{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $0 extends ld{data(e={}){return super.data(e)}}class Vh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $0(this._firestore,this._userDataWriter,r.key,r,new Qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new $0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new $0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Qp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),w=a.indexOf(u.doc.key)),{type:sB(u.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function ZO(n,e){return n instanceof ld&&e instanceof ld?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vh&&e instanceof Vh&&n._firestore===e._firestore&&VO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function YO(n){if(KI(n)&&0===n.explicitOrderBy.length)throw new Ue(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G0{}function Uh(n,...e){for(const t of e)n=t._apply(n);return n}class oB extends G0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Zp(e.firestore),r=function(i,a,u,h,_,w,A){let x;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){n1(A,w);const $=[];for(const Y of A)$.push(t1(h,i,Y));x={arrayValue:{values:$}}}else x=t1(h,i,A)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||n1(A,w),x=qO(u,"where",A,"in"===w||"not-in"===w);const O=ys.create(_,w,x);return function($,Y){if(Y.S()){const je=sx($);if(null!==je&&!je.isEqual(Y.field))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${je.toString()}' and '${Y.field.toString()}'`);const At=ix($);null!==At&&r1(0,Y.field,At)}const Ie=function(je,At){for(const tt of je.filters)if(At.indexOf(tt.op)>=0)return tt.op;return null}($,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Ie)throw new Ue(ye.INVALID_ARGUMENT,Ie===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Ie.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ys(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new sd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class lB extends G0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new D_(i,a);return function(h,_){if(null===ix(h)){const w=sx(h);null!==w&&r1(0,w,_.field)}}(r,u),u}(e._query,this.hc,this.dc);return new Ys(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new sd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QO extends G0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Ys(e.firestore,e.converter,kk(e._query,this._c,this.wc))}}class JO extends G0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=e1(e,this.type,this.mc,this.gc);return new Ys(e.firestore,e.converter,(i=t,new sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XO extends G0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=e1(e,this.type,this.mc,this.gc);return new Ys(e.firestore,e.converter,(i=t,new sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function e1(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof H0)return function(i,a,u,h,_){if(!h)throw new Ue(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const A of S_(i))if(A.field.isKeyField())w.push(C_(a,h.key));else{const x=h.data.field(A.field);if(nu(x))throw new Ue(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const O=A.field.canonicalString();throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}w.push(x)}return new Mh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zp(n.firestore);return function(a,u,h,_,w,A){const x=a.explicitOrderBy;if(w.length>x.length)throw new Ue(ye.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let $=0;$<w.length;$++){const Y=w[$];if(x[$].field.isKeyField()){if("string"!=typeof Y)throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!ox(a)&&-1!==Y.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const Ie=a.path.child(Q.fromString(Y));if(!Ze.isDocumentKey(Ie))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ie}' is not because it contains an odd number of segments.`);const je=new Ze(Ie);O.push(C_(u,je))}else{const Ie=qO(h,_,Y);O.push(Ie)}}return new Mh(O,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function t1(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ox(e)&&-1!==t.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Q.fromString(t));if(!Ze.isDocumentKey(r))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return C_(n,new Ze(r))}if(t instanceof lr)return C_(n,t._key);throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vD(t)}.`)}function n1(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function r1(n,e,t){if(!t.isEqual(e))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QM{convertValue(e,t="none"){switch(Op(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return k(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bD(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=v_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const t=Wt(e);return new E(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Q.fromString(e);Bt(pN(r));const i=new Ca(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||Er(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function SD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mB extends QM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}class i1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zp(e)}set(e,t,r){this._verifyNotCommitted();const i=Bh(e,this._firestore),a=SD(i.converter,t,r),u=CD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,hi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Bh(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof ad?KM(this._dataReader,"WriteBatch.update",a._key,t,r,i):zM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bh(e,this._firestore);return this._mutations=this._mutations.concat(new E0(t._key,hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ue(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jp extends QM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function s1(n,e,t){n=gn(n,lr);const r=gn(n.firestore,Cr),i=SD(n.converter,e,t);return z_(r,[CD(Zp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hi.none())])}function o1(n,e,t,...r){n=gn(n,lr);const i=gn(n.firestore,Cr),a=Zp(i);let u;return u="string"==typeof(e=(0,L.m9)(e))||e instanceof ad?KM(a,"updateDoc",n._key,e,t,r):zM(a,"updateDoc",n._key,e),z_(i,[u.toMutation(n._key,hi.exists(!0))])}function a1(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||qM(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(qM(e[u])){const x=e[u];e[u]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[u+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[u+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,w,A;if(n instanceof lr)w=gn(n.firestore,Cr),A=T_(n._key.path),_={next:x=>{e[u]&&e[u](JM(w,n,x))},error:e[u+1],complete:e[u+2]};else{const x=gn(n,Ys);w=gn(x.firestore,Cr),A=x._query;const O=new Jp(w);_={next:$=>{e[u]&&e[u](new Vh(w,O,x,$))},error:e[u+1],complete:e[u+2]},YO(n._query)}return function(x,O,$,Y){const Ie=new _D(Y),je=new uM(O,Ie,$);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return iM(yield W_(x),je)})),()=>{Ie.pa(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return oM(yield W_(x),je)}))}}(pi(w),A,h,_)}function z_(n,e){return function(t,r){const i=new Ti;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function uU(n,e,t){return pM.apply(this,arguments)}(yield HM(t),r,i)})),i.promise}(pi(n),e)}function JM(n,e,t){const r=t.docs.get(e._key),i=new Jp(n);return new ld(n,i,e._key,r,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}class TB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zp(e)}get(e){const t=Bh(e,this._firestore),r=new mB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const a=i[0];if(a.isFoundDocument())return new H0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new H0(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=Bh(e,this._firestore),a=SD(i.converter,t,r),u=CD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Bh(e,this._firestore);let u;return u="string"==typeof(t=(0,L.m9)(t))||t instanceof ad?KM(this._dataReader,"Transaction.update",a._key,t,r,i):zM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bh(e,this._firestore),r=new Jp(this._firestore);return super.get(e).then(i=>new ld(this._firestore,r,t._key,i._document,new Qp(!1,!1),t.converter))}}function XM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function u1(){if("undefined"==typeof Uint8Array)throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function c1(){if(!function ut(){return"undefined"!=typeof atob}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ah=ps.SDK_VERSION,(0,ps._registerComponent)(new _a.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Cr(i,new XA(t.getProvider("auth-internal")),new yk(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ps.registerVersion)(d0,"3.4.7",n),(0,ps.registerVersion)(d0,"3.4.7","esm2017")}();class q0{constructor(e){this._delegate=e}static fromBase64String(e){return c1(),new q0(Xu.fromBase64String(e))}static fromUint8Array(e){return u1(),new q0(Xu.fromUint8Array(e))}toBase64(){return c1(),this._delegate.toBase64()}toUint8Array(){return u1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eR(n){return function OB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class FB{enableIndexedDbPersistence(e,t){return function $U(n,e){jO(n=gn(n,Cr));const t=pi(n),r=n._freezeSettings(),i=new OM;return BO(t,i,new EO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GU(n){jO(n=gn(n,Cr));const e=pi(n),t=n._freezeSettings(),r=new OM;return BO(e,r,new DU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qU(n){if(n._initialized&&!n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!su.vt())return Promise.resolve();const i=r+"main";yield su.delete(i)}),function(r){return t.apply(this,arguments)})(Sx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class d1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ca||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function VU(n,e,t,r={}){var i;const a=(n=gn(n,B0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Np("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Di.MOCK_USER;else{u=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ue(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Di(_)}n._authCredentials=new gk(new JA(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function zU(n){return function MU(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield TO(n),t=yield SO(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.lu.delete(0),V0(i)}(t)}))}(pi(n=gn(n,Cr)))}(this._delegate)}disableNetwork(){return function KU(n){return function RU(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield TO(n),t=yield SO(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=Xe(i);a.lu.add(0),yield U_(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(pi(n=gn(n,Cr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,RO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function WU(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function fU(n,e){return vM.apply(this,arguments)}(yield HM(e),t)})),t.promise}(pi(n=gn(n,Cr)))}(this._delegate)}onSnapshotsInSync(e){return function DB(n,e){return function NU(n,e){const t=new _D(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield W_(n),i=t,Xe(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield W_(n),i=t,void Xe(r).Tu.delete(i);var r,i}))}}(pi(n=gn(n,Cr)),qM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new K_(this,FO(this._delegate,e))}catch(t){throw _o(t,"collection()","Firestore.collection()")}}doc(e){try{return new ml(this,wD(this._delegate,e))}catch(t){throw _o(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yo(this,function UU(n,e){if(n=gn(n,B0),GM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ys(n,null,(t=e,new sd(Q.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw _o(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SB(n,e){return function OU(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(i=n,yD(i).then(a=>a.datastore));var i;new AU(n.asyncQueue,r,e,t).run()})),t.promise}(pi(n=gn(n,Cr)),t=>e(new TB(n,t)))}(this._delegate,t=>e(new h1(this,t)))}batch(){return pi(this._delegate),new f1(new i1(this._delegate,e=>z_(this._delegate,e)))}loadBundle(e){return function ZU(n,e){const t=pi(n=gn(n,Cr)),r=new jU;return function FU(n,e,t,r){const i=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return CO(_,w);if(_ instanceof ArrayBuffer)return CO(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new TU(_,u);var _}(t,L0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function IU(n,e,t){const r=Xe(n);var i;(i=(0,Ee.Z)(function*(a,u,h){try{const _=yield u.getMetadata();if(yield function(O,$){const Y=Xe(O),Ie=Gi($.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",je=>Y.ds.getBundleMetadata(je,$.id)).then(je=>!!je&&je.createTime.compareTo(Ie)>=0)}(a.localStore,_))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(O=_).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);h._updateProgress(hO(_));const w=new rU(_,a.localStore,u.M);let A=yield u.fa();for(;A;){const O=yield w.Nu(A);O&&h._updateProgress(O),A=yield u.fa()}const x=yield w.complete();return yield od(a,x.Ou,void 0),yield function(O,$){const Y=Xe(O);return Y.persistence.runTransaction("Save bundle","readwrite",Ie=>Y.ds.saveBundleMetadata(Ie,$))}(a.localStore,_),h._completeWith(x.progress),Promise.resolve(x.Mu)}catch(_){return Np("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var O}),function(a,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield HM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function YU(n,e){return function LU(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield jM(n),e)}))}(pi(n=gn(n,Cr)),e).then(t=>t?new Ys(n,null,t.query):null)}(this._delegate,e).then(t=>t?new yo(this,t):null)}}class AD extends QM{constructor(e){super(),this.firestore=e}convertBytes(e){return new q0(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ml.forKey(t,this.firestore,null)}}class h1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}get(e){const t=eg(e);return this._delegate.get(t).then(r=>new W0(this._firestore,new ld(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eg(e);return r?(XM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}}class f1{constructor(e){this._delegate=e}set(e,t,r){const i=eg(e);return r?(XM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=eg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new z0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Xp(e,new AD(e),t),i.set(t,a)),a}}Xp.INSTANCES=new WeakMap;class ml{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ml(t,new lr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ml(t,new lr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new K_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new K_(this.firestore,FO(this._delegate,e))}catch(t){throw _o(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof lr&&LO(this._delegate,e)}set(e,t){t=XM("DocumentReference.set",t);try{return t?s1(this._delegate,e,t):s1(this._delegate,e)}catch(r){throw _o(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?o1(this._delegate,e):o1(this._delegate,e,t,...r)}catch(i){throw _o(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CB(n){return z_(gn(n.firestore,Cr),[new E0(n._key,hi.none())])}(this._delegate)}onSnapshot(...e){const t=p1(e),r=g1(e,i=>new W0(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return a1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yB(n){n=gn(n,lr);const e=gn(n.firestore,Cr),t=pi(e),r=new Jp(e);return function PU(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const h=yield function(_,w){const A=Xe(_);return A.persistence.runTransaction("read document","readonly",x=>A.ai.Bs(x,w))}(i,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Ue(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=H_(h,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield jM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ld(e,r,n._key,i,new Qp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function vB(n){n=gn(n,lr);const e=gn(n.firestore,Cr);return AO(pi(e),n._key,{source:"server"}).then(t=>JM(e,n,t))}(this._delegate):function _B(n){n=gn(n,lr);const e=gn(n.firestore,Cr);return AO(pi(e),n._key).then(t=>JM(e,n,t))}(this._delegate),t.then(r=>new W0(this.firestore,new ld(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ml(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function _o(n,e,t){return n.message=n.message.replace(e,t),n}function p1(n){for(const e of n)if("object"==typeof e&&!eR(e))return e;return{}}function g1(n,e){var t,r;let i;return i=eR(n[0])?n[0]:eR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class W0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ZO(this._delegate,e._delegate)}}class z0 extends W0{data(e){const t=this._delegate.data(e);return function fk(n,e){n||pt()}(void 0!==t),t}}class yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}where(e,t,r){try{return new yo(this.firestore,Uh(this._delegate,function aB(n,e,t){const r=e,i=TD("where",n);return new oB(i,r,t)}(e,t,r)))}catch(i){throw _o(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new yo(this.firestore,Uh(this._delegate,function uB(n,e="asc"){const t=e,r=TD("orderBy",n);return new lB(r,t)}(e,t)))}catch(r){throw _o(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yo(this.firestore,Uh(this._delegate,function cB(n){return NO("limit",n),new QO("limit",n,"F")}(e)))}catch(t){throw _o(t,"limit()","Query.limit()")}}limitToLast(e){try{return new yo(this.firestore,Uh(this._delegate,function dB(n){return NO("limitToLast",n),new QO("limitToLast",n,"L")}(e)))}catch(t){throw _o(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new yo(this.firestore,Uh(this._delegate,function hB(...n){return new JO("startAt",n,!0)}(...e)))}catch(t){throw _o(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new yo(this.firestore,Uh(this._delegate,function fB(...n){return new JO("startAfter",n,!1)}(...e)))}catch(t){throw _o(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new yo(this.firestore,Uh(this._delegate,function pB(...n){return new XO("endBefore",n,!1)}(...e)))}catch(t){throw _o(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new yo(this.firestore,Uh(this._delegate,function gB(...n){return new XO("endAt",n,!0)}(...e)))}catch(t){throw _o(t,"endAt()","Query.endAt()")}}isEqual(e){return VO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function bB(n){n=gn(n,Ys);const e=gn(n.firestore,Cr),t=pi(e),r=new Jp(e);return function kU(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const h=yield dD(i,a,!0),_=new gO(a,h.hi),w=_.Gu(h.documents),A=_.applyChanges(w,!1);u.resolve(A.snapshot)}catch(h){const _=H_(h,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield jM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function EB(n){n=gn(n,Ys);const e=gn(n.firestore,Cr),t=pi(e),r=new Jp(e);return xO(t,n._query,{source:"server"}).then(i=>new Vh(e,r,n,i))}(this._delegate):function wB(n){n=gn(n,Ys);const e=gn(n.firestore,Cr),t=pi(e),r=new Jp(e);return YO(n._query),xO(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate),t.then(r=>new tR(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=p1(e),r=g1(e,i=>new tR(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return a1(this._delegate,t,r)}withConverter(e){return new yo(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class VB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new z0(this._firestore,r))})}isEqual(e){return ZO(this._delegate,e._delegate)}}class K_ extends yo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ml(this.firestore,e):null}doc(e){try{return new ml(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw _o(t,"doc()","CollectionReference.doc()")}}add(e){return function IB(n,e){const t=gn(n.firestore,Cr),r=wD(n),i=SD(n.converter,e);return z_(t,[CD(Zp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ml(this.firestore,t))}isEqual(e){return LO(this._delegate,e._delegate)}withConverter(e){return new K_(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function eg(n){return gn(n,lr)}class nR{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new nR(Fe.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xB(){return new WM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tg(e)}static delete(){const e=function AB(){return new j0("deleteField")}();return e._methodName="FieldValue.delete",new tg(e)}static arrayUnion(...e){const t=function MB(...n){return new eB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tg(t)}static arrayRemove(...e){const t=function RB(...n){return new tB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tg(t)}static increment(e){const t=function PB(n){return new nB("increment",n)}(e);return t._methodName="FieldValue.increment",new tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const UB={Firestore:d1,GeoPoint:bD,Timestamp:E,Blob:q0,Transaction:h1,WriteBatch:f1,DocumentReference:ml,DocumentSnapshot:W0,Query:yo,QueryDocumentSnapshot:z0,QuerySnapshot:tR,CollectionReference:K_,FieldPath:nR,FieldValue:tg,setLogLevel:function LB(n){!function hk(n){tu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function m1(n,e){return function HB(n,e=Ho.z){return new H.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function rR(n,e){return m1(n,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function xD(n,e){return rR(n,e).pipe(ls(void 0),zc(),(0,Nt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const _=i.find(A=>A.doc.ref.isEqual(u.ref)),w=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function _1(n,e,t){return xD(n,t).pipe(xr((r,i)=>function GB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),KC(),(0,Nt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function iR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function y1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function jB(n){(function BB(n,e){n.INTERNAL.registerComponent(new _a.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},UB)))})(n,(e,t)=>new d1(e,t,new FB)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Tm.Z);class v1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=xD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Nt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ls(void 0),zc(),uo(([r,i])=>i.length>0||!r),(0,Nt.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=y1(e);return _1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new w1(this.ref.doc(e),this.afs)}}class w1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=C1(r,t);return new v1(i,a,this.afs)}snapshotChanges(){return function $B(n,e){return m1(n,e).pipe(ls(void 0),zc(),(0,Nt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(Cn.iC)}}class WB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?xD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),uo(t=>t.length>0),Cn.iC):xD(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=y1(e);return _1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Cn.iC)}}const b1=new m.OlP("angularfire2.enableFirestorePersistence"),E1=new m.OlP("angularfire2.firestore.persistenceSettings"),zB=new m.OlP("angularfire2.firestore.settings"),KB=new m.OlP("angularfire2.firestore.use-emulator");function C1(n,e=(t=>t)){return{query:e(n),ref:n}}let ZB=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,O,$,Y,Ie,je,At,tt){this.schedulers=_;const kt=(0,ci.on)(t,h,r),ct=A;x&&$v(kt,h,O,Y,Ie,je,$,At),[this.firestore,this.persistenceEnabled$]=(0,ci.cc)(`${kt.name}.firestore`,"AngularFirestore",kt.name,()=>{const zt=h.runOutsideAngular(()=>kt.firestore());if(a&&zt.settings(a),ct&&zt.useEmulator(...ct),i&&!gr(u)){const Kt=()=>{try{return(0,Dn.D)(zt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ko){return"undefined"!=typeof console&&console.warn(Ko),C(!1)}};return[zt,h.runOutsideAngular(Kt)]}return[zt,C(!1)]},[a,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=C1(i,r),h=this.schedulers.ngZone.run(()=>a);return new v1(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new WB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new w1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ci.Dh),m.LFG(ci.xv,8),m.LFG(b1,8),m.LFG(zB,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Cn.HU),m.LFG(E1,8),m.LFG(KB,8),m.LFG(nh,8),m.LFG(bm,8),m.LFG(Em,8),m.LFG(Cm,8),m.LFG(Im,8),m.LFG(eC,8),m.LFG(Hv,8),m.LFG(th,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YB=(()=>{class n{constructor(){Yf.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:b1,useValue:!0},{provide:E1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[ZB]}),n})();var QB=U(5032);const I1="@firebase/database";let sR="";function T1(n){sR=n}class ej{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class tj{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const S1=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ej(e)}}catch(e){}return new tj},ng=S1("localStorage"),oR=S1("sessionStorage"),Z_=new ya.Yd("@firebase/database"),A1=function(){let n=1;return function(){return n++}}(),x1=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},K0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=K0.apply(null,r):e+="object"==typeof r?(0,L.Pz)(r):r,e+=" "}return e};let rg=null,M1=!0;const R1=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Z_.logLevel=ya.in.VERBOSE,rg=Z_.log.bind(Z_),e&&oR.set("logging_enabled",!0)):"function"==typeof n?rg=n:(rg=null,oR.remove("logging_enabled"))},Ki=function(...n){if(!0===M1&&(M1=!1,null===rg&&!0===oR.get("logging_enabled")&&R1(!0)),rg){const e=K0.apply(null,n);rg(e)}},Z0=function(n){return function(...e){Ki(n,...e)}},aR=function(...n){const e="FIREBASE INTERNAL ERROR: "+K0(...n);Z_.error(e)},ec=function(...n){const e=`FIREBASE FATAL ERROR: ${K0(...n)}`;throw Z_.error(e),new Error(e)},vo=function(...n){const e="FIREBASE WARNING: "+K0(...n);Z_.warn(e)},MD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ud="[MIN_NAME]",tc="[MAX_NAME]",ig=function(n,e){if(n===e)return 0;if(n===ud||e===tc)return-1;if(e===ud||n===tc)return 1;{const t=RD(n),r=RD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},ij=function(n,e){return n===e?0:n<e?-1:1},Y0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(e))},lR=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Pz)(e[r]),t+=":",t+=lR(n[e[r]]);return t+="}",t},P1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const k1=function(n){(0,L.hu)(!MD(n),"Invalid JSON number");const r=1023;let i,a,u,h,_;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const A=w.join("");let x="";for(_=0;_<64;_+=8){let O=parseInt(A.substr(_,8),2).toString(16);1===O.length&&(O="0"+O),x+=O}return x.toLowerCase()},lj=new RegExp("^-?(0*)\\d{1,10}$"),N1=-2147483648,uR=2147483647,RD=function(n){if(lj.test(n)){const e=Number(n);if(e>=N1&&e<=uR)return e}return null},Y_=function(n){try{n()}catch(e){setTimeout(()=>{throw vo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class cj{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dj{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vo(e)}}let J0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const U1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,j1="websocket",H1="long_polling";class dR{constructor(e,t,r,i,a=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ng.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ng.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function $1(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===j1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==H1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function fj(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Zi(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class pj{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const hR={},fR={};function pR(n){const e=n.toString();return hR[e]||(hR[e]=new pj),hR[e]}class mj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Y_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Q_{constructor(e,t,r,i,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Z0(e),this.stats_=pR(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),$1(t,H1,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new mj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gR((...a)=>{const[u,h,_,w,A]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Q_.forceAllow_=!0}static forceDisallow(){Q_.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Q_.forceAllow_&&(Q_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=P1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=A1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Ki("frame writing exception"),h.stack&&Ki(h.stack),Ki(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ki("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ki("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let X0=null;"undefined"!=typeof MozWebSocket?X0=MozWebSocket:"undefined"!=typeof WebSocket&&(X0=WebSocket);let eb=(()=>{class n{constructor(t,r,i,a,u,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Z0(this.connId),this.stats_=pR(r),this.connURL=n.connectionURL_(r,h,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),$1(t,j1,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ng.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${sR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new X0(this.connURL,[],a)}else this.mySock=new X0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==X0&&!n.forceDisallow_}static previouslyFailed(){return ng.isInMemoryStorage||!0===ng.get("previous_websocket_failure")}markConnectionHealthy(){ng.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=P1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class mR{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Q_,eb]}initTransports_(e){const t=eb&&eb.isAvailable();let r=t&&!eb.previouslyFailed();if(e.webSocketOnly&&(t||vo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[eb];else{const i=this.transports_=[];for(const a of mR.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class nF{constructor(e,t,r,i,a,u,h,_,w,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Z0("c:"+this.id+":"),this.transportManager_=new mR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Y0("t",e),r=Y0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Y0("t",e),r=Y0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Y0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?aR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Q0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ng.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class iF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class kD extends iF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kD}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sn(){return new Rn("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jh(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rn(n.pieces_,e)}function yR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function aF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rn(e,0)}function Ir(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Rn(t,0)}function un(n){return n.pieceNum_>=n.pieces_.length}function wo(n,e){const t=ln(n),r=ln(e);if(null===t)return e;if(t===r)return wo(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Vj(n,e){const t=tb(n,0),r=tb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=ig(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function vR(n,e){if(jh(n)!==jh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _l(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jh(n)>jh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Uj{constructor(e,t){this.errorPrefix_=t,this.parts_=tb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);lF(this)}}function lF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sg(n))}function sg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class wR extends iF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new wR}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const nb=1e3;let OD,og=(()=>{class n extends rF{constructor(t,r,i,a,u,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Z0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&kD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,L.Pz)(u)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||a!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const w=_.d,A=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==A&&this.removeListen_(i,a),t.onComplete&&t.onComplete(A,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();vo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):aR("Unrecognized action received from server: "+(0,L.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const A=function(){w?w.close():(_=!0,a())};t.realtime_={close:A,sendRequest:function($){(0,L.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest($)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,Y]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);_?Ki("getToken() completed but was canceled"):(Ki("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=Y&&Y.token,w=new nF(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ie=>{vo(Ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch($){t.log_("Failed to get token: "+$),_||(t.repoInfo_.nodeAdmin&&vo($),A())}}})()}interrupt(t){Ki("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ki("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=nb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>lR(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Rn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ki("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ki("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sR.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=kD.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class ND{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(ud,e),i=new cn(ud,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class dF extends ND{static get __EMPTY_NODE(){return OD}static set __EMPTY_NODE(e){OD=e}compare(e,t){return ig(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(tc,OD)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,OD)}toString(){return".key"}}const nc=new dF;class FD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ER,ou=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Wo.EMPTY_NODE,this.right=null!=u?u:Wo.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Wo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Wo{constructor(e,t=Wo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ou.BLACK,null,null))}remove(e){return new Wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ou.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new FD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new FD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new FD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new FD(this.root_,null,this.comparator_,!0,e)}}function Kj(n,e){return ig(n.name,e.name)}function bR(n,e){return ig(n,e)}Wo.EMPTY_NODE=new class zj{copy(e,t,r,i,a){return this}insert(e,t,r){return new ou(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hF=function(n){return"number"==typeof n?"number:"+k1(n):"string:"+n},fF=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===ER||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===ER||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pF,gF,mF,J_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),fF(this.priorityNode_)}static set __childrenNodeConstructor(t){pF=t}static get __childrenNodeConstructor(){return pF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return un(t)?this:".priority"===ln(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ln(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===jh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?k1(this.value_):this.value_,this.lazyHash_=x1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class Jj extends ND{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ig(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(tc,new J_("[PRIORITY-POST]",mF))}makePost(e,t){const r=gF(e);return new cn(t,new J_("[PRIORITY-POST]",r))}toString(){return".priority"}},Xj=Math.log(2);class eH{constructor(e){this.count=parseInt(Math.log(e+1)/Xj,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const LD=function(n,e,t,r){n.sort(e);const i=function(_,w){const A=w-_;let x,O;if(0===A)return null;if(1===A)return x=n[_],O=t?t(x):x,new ou(O,x.node,ou.BLACK,null,null);{const $=parseInt(A/2,10)+_,Y=i(_,$),Ie=i($+1,w);return x=n[$],O=t?t(x):x,new ou(O,x.node,ou.BLACK,Y,Ie)}},h=function(_){let w=null,A=null,x=n.length;const O=function(Y,Ie){const je=x-Y,At=x;x-=Y;const tt=i(je+1,At),kt=n[je],ct=t?t(kt):kt;$(new ou(ct,kt.node,Ie,null,tt))},$=function(Y){w?(w.left=Y,w=Y):(A=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const Ie=_.nextBitIsOne(),je=Math.pow(2,_.count-(Y+1));Ie?O(je,ou.BLACK):(O(je,ou.BLACK),O(je,ou.RED))}return A}(new eH(n.length));return new Wo(r||e,h)};let CR;const X_={};class cd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(X_&&er,"ChildrenNode.ts has not been loaded"),CR=CR||new cd({".priority":X_},{".priority":er}),CR}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wo?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==nc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(cn.Wrap);let h,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();h=i?LD(r,e.getCompare()):X_;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const A=Object.assign({},this.indexes_);return A[_]=h,new cd(A,w)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const u=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(u,"Missing index implementation for "+a),i===X_){if(u.isDefinedOn(e.node)){const h=[],_=t.getIterator(cn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),LD(h,u.getCompare())}return X_}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new cn(e.name,h))),_.insert(e,e.node)}});return new cd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===X_)return i;{const a=t.get(e.name);return a?i.remove(new cn(e.name,a)):i}});return new cd(r,this.indexSet_)}}let rb,en=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fF(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rb||(rb=new n(new Wo(bR),null,cd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?rb:r}}getChild(t){const r=ln(t);return null===r?this:this.getImmediateChild(r).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?rb:this.priorityNode_;return new n(a,h,u)}}updateChild(t,r){const i=ln(t);if(null===i)return r;{(0,L.hu)(".priority"!==ln(t)||1===jh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Yn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(er,(h,_)=>{r[h]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+hF(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":x1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new cn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,cn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ib?-1:0}withIndex(t){if(t===nc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===nc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),a=r.getIterator(er);let u=i.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===nc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ib=new class tH extends en{constructor(){super(new Wo(bR),en.EMPTY_NODE,cd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}};function Mr(n,e=null){if(null===n)return en.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new J_(n,Mr(e));if(n instanceof Array){let t=en.EMPTY_NODE;return Zi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Mr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Mr(e))}{const t=[];let r=!1;if(Zi(n,(u,h)=>{if("."!==u.substring(0,1)){const _=Mr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new cn(u,_)))}}),0===t.length)return en.EMPTY_NODE;const a=LD(t,Kj,u=>u.name,bR);if(r){const u=LD(t,er.getCompare());return new en(a,Mr(e),new cd({".priority":u},{".priority":er}))}return new en(a,Mr(e),cd.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(ud,en.EMPTY_NODE)},MAX:{value:new cn(tc,ib)}}),dF.__EMPTY_NODE=en.EMPTY_NODE,J_.__childrenNodeConstructor=en,function Zj(n){ER=n}(ib),function Qj(n){mF=n}(ib),function Yj(n){gF=n}(Mr);class IR extends ND{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!un(e)&&".priority"!==ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ig(e.name,t.name):a}makePost(e,t){const r=Mr(e),i=en.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,ib);return new cn(tc,e)}toString(){return tb(this.indexPath_,0).join("/")}}const DR=new class rH extends ND{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ig(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Mr(e);return new cn(t,r)}toString(){return".value"}},ey="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",iH=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=ey.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=ey.charAt(e[i]);return(0,L.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),vF=function(n){if(n===""+uR)return"-";const e=RD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return tc;const a=ey.charAt(ey.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},wF=function(n){if(n===""+N1)return ud;const e=RD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+uR:(delete t[t.length-1],t.join("")):(t[t.length-1]=ey.charAt(ey.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function bF(n){return{type:"value",snapshotNode:n}}function ty(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ob(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(sb(t,h)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(ty(t,r)):u.trackChildChange(ob(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,a)=>{t.hasChild(i)||r.trackChildChange(sb(i,a))}),t.isLeafNode()||t.forEachChild(er,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(ob(i,a,u))}else r.trackChildChange(ty(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ab{constructor(e){this.indexedFilter_=new SR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ab.getStartPost_(e),this.endPost_=ab.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new cn(t,r))||(r=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=en.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(en.EMPTY_NODE);const a=this;return t.forEachChild(er,(u,h)=>{a.matches(new cn(u,h))||(i=i.updateImmediateChild(u,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oH{constructor(e){this.rangedFilter_=new ab(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new cn(t,r))||(r=en.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=en.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=en.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(en.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();h=(O,$)=>x($,O)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,A=!1;for(;_.hasNext();){const x=_.getNext();!A&&h(a,x)<=0&&(A=!0),A&&w<this.limit_&&h(x,u)<=0?w++:i=i.updateImmediateChild(x.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const x=this.index_.getCompare();u=(O,$)=>x($,O)}else u=this.index_.getCompare();const h=e;(0,L.hu)(h.numChildren()===this.limit_,"");const _=new cn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),A=this.rangedFilter_.matches(_);if(h.hasChild(t)){const x=h.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=O&&(O.name===t||h.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const $=null==O?1:u(O,_);if(A&&!r.isEmpty()&&$>=0)return null!=a&&a.trackChildChange(ob(t,r,x)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(sb(t,x));const Ie=h.updateImmediateChild(t,en.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=a&&a.trackChildChange(ty(O.name,O.node)),Ie.updateImmediateChild(O.name,O.node)):Ie}}return r.isEmpty()?e:A&&u(w,_)>=0?(null!=a&&(a.trackChildChange(sb(w.name,w.node)),a.trackChildChange(ty(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,en.EMPTY_NODE)):e}}class VD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new VD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function xR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function UD(n,e){const t=n.copy();return t.index_=e,t}function EF(n){const e={};if(n.isDefault())return e;let t;return n.index_===er?t="$priority":n.index_===DR?t="$value":n.index_===nc?t="$key":((0,L.hu)(n.index_ instanceof IR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Pz)(t),n.startSet_&&(e.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function CF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class BD extends rF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Z0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=BD.getListenId_(e,r),h={};this.listens_[u]=h;const _=EF(e._queryParams);this.restRequest_(a+".json",_,(w,A)=>{let x=A;if(404===w&&(x=null,w=null),null===w&&this.onDataUpdate_(a,x,!1,r),(0,L.DV)(this.listens_,u)===h){let O;O=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(O,null)}})}unlisten(e,t){const r=BD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=EF(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,L.cI)(h.responseText)}catch(w){vo("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&vo("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class hH{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function jD(){return{value:null,children:new Map}}function ny(n,e,t){if(un(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ln(e);n.children.has(r)||n.children.set(r,jD()),ny(n.children.get(r),e=Yn(e),t)}}function MR(n,e){if(un(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{ny(n,new Rn(r),i)}),MR(n,e)}}if(n.children.size>0){const t=ln(e);return e=Yn(e),n.children.has(t)&&MR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function RR(n,e,t){null!==n.value?t(e,n.value):function fH(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{RR(i,new Rn(e.toString()+"/"+r),t)})}class pH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _H{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pH(e);const r=1e4+2e4*Math.random();Q0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Zi(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Q0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yl||(yl={})),yl))();function NR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class HD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=yl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(un(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rn(e));return new HD(Sn(),t,this.revert)}}return(0,L.hu)(ln(this.path)===e,"operationForChild called for unrelated child."),new HD(Yn(this.path),this.affectedTree,this.revert)}}class lb{constructor(e,t){this.source=e,this.path=t,this.type=yl.LISTEN_COMPLETE}operationForChild(e){return un(this.path)?new lb(this.source,Sn()):new lb(this.source,Yn(this.path))}}class ag{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=yl.OVERWRITE}operationForChild(e){return un(this.path)?new ag(this.source,Sn(),this.snap.getImmediateChild(e)):new ag(this.source,Yn(this.path),this.snap)}}class ry{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=yl.MERGE}operationForChild(e){if(un(this.path)){const t=this.children.subtree(new Rn(e));return t.isEmpty()?null:t.value?new ag(this.source,Sn(),t.value):new ry(this.source,Sn(),t)}return(0,L.hu)(ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ry(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(un(e))return this.isFullyInitialized()&&!this.filtered_;const t=ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ub(n,e,t,r,i,a){const u=r.filter(h=>h.type===t);u.sort((h,_)=>function bH(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),u.forEach(h=>{const _=function wH(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function $D(n,e){return{eventCache:n,serverCache:e}}function cb(n,e,t,r){return $D(new Hh(e,t,r),n.serverCache)}function DF(n,e,t,r){return $D(n.eventCache,new Hh(e,t,r))}function GD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function lg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let OR;class tr{constructor(e,t=(()=>(OR||(OR=new Wo(ij)),OR))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return Zi(e,(r,i)=>{t=t.set(new Rn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sn(),value:this.value};if(un(e))return null;{const r=ln(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Yn(e),t);return null!=a?{path:Ir(new Rn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(un(e))return this;{const t=ln(e),r=this.children.get(t);return null!==r?r.subtree(Yn(e)):new tr(null)}}set(e,t){if(un(e))return new tr(t,this.children);{const r=ln(e),a=(this.children.get(r)||new tr(null)).set(Yn(e),t),u=this.children.insert(r,a);return new tr(this.value,u)}}remove(e){if(un(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=ln(e),r=this.children.get(t);if(r){const i=r.remove(Yn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new tr(null):new tr(this.value,a)}return this}}get(e){if(un(e))return this.value;{const t=ln(e),r=this.children.get(t);return r?r.get(Yn(e)):null}}setTree(e,t){if(un(e))return t;{const r=ln(e),a=(this.children.get(r)||new tr(null)).setTree(Yn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new tr(this.value,u)}}fold(e){return this.fold_(Sn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ir(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Sn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(un(e))return null;{const a=ln(e),u=this.children.get(a);return u?u.findOnPath_(Yn(e),Ir(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sn(),t)}foreachOnPath_(e,t,r){if(un(e))return this;{this.value&&r(t,this.value);const i=ln(e),a=this.children.get(i);return a?a.foreachOnPath_(Yn(e),Ir(t,i),r):new tr(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ir(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class au{constructor(e){this.writeTree_=e}static empty(){return new au(new tr(null))}}function db(n,e,t){if(un(e))return new au(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=wo(i,e);return a=a.updateChild(u,t),new au(n.writeTree_.set(i,a))}{const i=new tr(t),a=n.writeTree_.setTree(e,i);return new au(a)}}}function FR(n,e,t){let r=n;return Zi(t,(i,a)=>{r=db(r,Ir(e,i),a)}),r}function TF(n,e){if(un(e))return au.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new au(t)}}function LR(n,e){return null!=ug(n,e)}function ug(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(wo(t.path,e)):null}function SF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function $h(n,e){if(un(e))return n;{const t=ug(n,e);return new au(null!=t?new tr(t):n.writeTree_.subtree(e))}}function VR(n){return n.writeTree_.isEmpty()}function iy(n,e){return AF(Sn(),n.writeTree_,e)}function AF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=AF(Ir(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ir(n,".priority"),r)),t}}function qD(n,e){return kF(e,n)}function SH(n,e){if(n.snap)return _l(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_l(Ir(n.path,t),e))return!0;return!1}function xH(n){return n.visible}function xF(n,e,t){let r=au.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let h;if(a.snap)_l(t,u)?(h=wo(t,u),r=db(r,h,a.snap)):_l(u,t)&&(h=wo(u,t),r=db(r,Sn(),a.snap.getChild(h)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(_l(t,u))h=wo(t,u),r=FR(r,h,a.children);else if(_l(u,t))if(h=wo(u,t),un(h))r=FR(r,Sn(),a.children);else{const _=(0,L.DV)(a.children,ln(h));if(_){const w=_.getChild(Yn(h));r=db(r,Sn(),w)}}}}}return r}function MF(n,e,t,r,i){if(r||i){const a=$h(n.visibleWrites,e);return!i&&VR(a)?t:i||null!=t||LR(a,Sn())?iy(xF(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(_l(w.path,e)||_l(e,w.path))},e),t||en.EMPTY_NODE):null}{const a=ug(n.visibleWrites,e);if(null!=a)return a;{const u=$h(n.visibleWrites,e);return VR(u)?t:null!=t||LR(u,Sn())?iy(u,t||en.EMPTY_NODE):null}}}function WD(n,e,t,r){return MF(n.writeTree,n.treePath,e,t,r)}function UR(n,e){return function MH(n,e,t){let r=en.EMPTY_NODE;const i=ug(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=$h(n.visibleWrites,e);return t.forEachChild(er,(u,h)=>{const _=iy($h(a,new Rn(u)),h);r=r.updateImmediateChild(u,_)}),SF(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return SF($h(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function RF(n,e,t,r){return function RH(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ir(e,t);if(LR(n.visibleWrites,a))return null;{const u=$h(n.visibleWrites,a);return VR(u)?i.getChild(t):iy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function zD(n,e){return function kH(n,e){return ug(n.visibleWrites,e)}(n.writeTree,Ir(n.treePath,e))}function BR(n,e,t){return function PH(n,e,t,r){const i=Ir(e,t),a=ug(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?iy($h(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function PF(n,e){return kF(Ir(n.treePath,e),n.writeTree)}function kF(n,e){return{treePath:n,writeTree:e}}class LH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ob(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,sb(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ty(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ob(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const NF=new class VH{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class jR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lg(this.viewCache_),a=function FH(n,e,t,r,i,a){return function NH(n,e,t,r,i,a,u){let h;const _=$h(n.visibleWrites,e),w=ug(_,Sn());if(null!=w)h=w;else{if(null==t)return[];h=iy(_,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const A=[],x=u.getCompare(),O=a?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let $=O.getNext();for(;$&&A.length<i;)0!==x($,r)&&A.push($),$=O.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function OF(n,e,t,r,i,a){const u=e.eventCache;if(null!=zD(r,t))return e;{let h,_;if(un(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=lg(e),x=UR(r,w instanceof en?w:en.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const w=WD(r,lg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=ln(t);if(".priority"===w){(0,L.hu)(1===jh(t),"Can't have a priority with additional path components");const A=u.getNode();_=e.serverCache.getNode();const x=RF(r,t,A,_);h=null!=x?n.filter.updatePriority(A,x):u.getNode()}else{const A=Yn(t);let x;if(u.isCompleteForChild(w)){_=e.serverCache.getNode();const O=RF(r,t,u.getNode(),_);x=null!=O?u.getNode().getImmediateChild(w).updateChild(A,O):u.getNode().getImmediateChild(w)}else x=BR(r,w,e.serverCache);h=null!=x?n.filter.updateChild(u.getNode(),w,x,A,i,a):u.getNode()}}return cb(e,h,u.isFullyInitialized()||un(t),n.filter.filtersNodes())}}function KD(n,e,t,r,i,a,u,h){const _=e.serverCache;let w;const A=u?n.filter:n.filter.getIndexedFilter();if(un(t))w=A.updateFullNode(_.getNode(),r,null);else if(A.filtersNodes()&&!_.isFiltered()){const $=_.getNode().updateChild(t,r);w=A.updateFullNode(_.getNode(),$,null)}else{const $=ln(t);if(!_.isCompleteForPath(t)&&jh(t)>1)return e;const Y=Yn(t),je=_.getNode().getImmediateChild($).updateChild(Y,r);w=".priority"===$?A.updatePriority(_.getNode(),je):A.updateChild(_.getNode(),$,je,Y,NF,null)}const x=DF(e,w,_.isFullyInitialized()||un(t),A.filtersNodes());return OF(n,x,t,i,new jR(i,x,a),h)}function HR(n,e,t,r,i,a,u){const h=e.eventCache;let _,w;const A=new jR(i,e,a);if(un(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=cb(e,w,!0,n.filter.filtersNodes());else{const x=ln(t);if(".priority"===x)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=cb(e,w,h.isFullyInitialized(),h.isFiltered());else{const O=Yn(t),$=h.getNode().getImmediateChild(x);let Y;if(un(O))Y=r;else{const Ie=A.getCompleteChild(x);Y=null!=Ie?".priority"===yR(O)&&Ie.getChild(aF(O)).isEmpty()?Ie:Ie.updateChild(O,r):en.EMPTY_NODE}_=$.equals(Y)?e:cb(e,n.filter.updateChild(h.getNode(),x,Y,O,A,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function FF(n,e){return n.eventCache.isCompleteForChild(e)}function LF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $R(n,e,t,r,i,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=un(t)?r:new tr(null).setTree(t,r);const A=e.serverCache.getNode();return w.children.inorderTraversal((x,O)=>{if(A.hasChild(x)){const Y=LF(0,e.serverCache.getNode().getImmediateChild(x),O);_=KD(n,_,new Rn(x),Y,i,a,u,h)}}),w.children.inorderTraversal((x,O)=>{const $=!e.serverCache.isCompleteForChild(x)&&void 0===O.value;if(!A.hasChild(x)&&!$){const Ie=LF(0,e.serverCache.getNode().getImmediateChild(x),O);_=KD(n,_,new Rn(x),Ie,i,a,u,h)}}),_}class zH{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new SR(r.getIndex()),a=function aH(n){return n.loadsAllData()?new SR(n.getIndex()):n.hasLimit()?new oH(n):new ab(n)}(r);this.processor_=function UH(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,_=i.updateFullNode(en.EMPTY_NODE,u.getNode(),null),w=a.updateFullNode(en.EMPTY_NODE,h.getNode(),null),A=new Hh(_,u.isFullyInitialized(),i.filtersNodes()),x=new Hh(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=$D(x,A),this.eventGenerator_=new yH(this.query_)}get query(){return this.query_}}function YH(n,e){const t=lg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!un(e)&&!t.getImmediateChild(ln(e)).isEmpty())?t.getChild(e):null}function VF(n){return 0===n.eventRegistrations_.length}function UF(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function BF(n,e,t,r){e.type===yl.MERGE&&null!==e.source.queryId&&((0,L.hu)(lg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(GD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function jH(n,e,t,r,i){const a=new LH;let u,h;if(t.type===yl.OVERWRITE){const w=t;w.source.fromUser?u=HR(n,e,w.path,w.snap,r,i,a):((0,L.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!un(w.path),u=KD(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===yl.MERGE){const w=t;w.source.fromUser?u=function $H(n,e,t,r,i,a,u){let h=e;return r.foreach((_,w)=>{const A=Ir(t,_);FF(e,ln(A))&&(h=HR(n,h,A,w,i,a,u))}),r.foreach((_,w)=>{const A=Ir(t,_);FF(e,ln(A))||(h=HR(n,h,A,w,i,a,u))}),h}(n,e,w.path,w.children,r,i,a):((0,L.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),u=$R(n,e,w.path,w.children,r,i,h,a))}else if(t.type===yl.ACK_USER_WRITE){const w=t;u=w.revert?function WH(n,e,t,r,i,a){let u;if(null!=zD(r,t))return e;{const h=new jR(r,e,i),_=e.eventCache.getNode();let w;if(un(t)||".priority"===ln(t)){let A;if(e.serverCache.isFullyInitialized())A=WD(r,lg(e));else{const x=e.serverCache.getNode();(0,L.hu)(x instanceof en,"serverChildren would be complete if leaf node"),A=UR(r,x)}A=A,w=n.filter.updateFullNode(_,A,a)}else{const A=ln(t);let x=BR(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=_.getImmediateChild(A)),w=null!=x?n.filter.updateChild(_,A,x,Yn(t),h,a):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(_,A,en.EMPTY_NODE,Yn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=WD(r,lg(e)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=zD(r,Sn()),cb(e,w,u,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function GH(n,e,t,r,i,a,u){if(null!=zD(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(un(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return KD(n,e,t,_.getNode().getChild(t),i,a,h,u);if(un(t)){let w=new tr(null);return _.getNode().forEachChild(nc,(A,x)=>{w=w.set(new Rn(A),x)}),$R(n,e,t,w,i,a,h,u)}return e}{let w=new tr(null);return r.foreach((A,x)=>{const O=Ir(t,A);_.isCompleteForPath(O)&&(w=w.set(A,_.getNode().getChild(O)))}),$R(n,e,t,w,i,a,h,u)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==yl.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);u=function qH(n,e,t,r,i){const a=e.serverCache;return OF(n,DF(e,a.getNode(),a.isFullyInitialized()||un(t),a.isFiltered()),t,r,NF,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function HH(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=GD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(bF(GD(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function BH(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,jF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function jF(n,e,t,r){return function vH(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function sH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),ub(n,i,"child_removed",e,r,t),ub(n,i,"child_added",e,r,t),ub(n,i,"child_moved",a,r,t),ub(n,i,"child_changed",e,r,t),ub(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ZD,QD;class HF{constructor(){this.views=new Map}}function GR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),BF(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(BF(u,e,t,r));return a}}function $F(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=WD(t,i?r:null),_=!1;h?_=!0:r instanceof en?(h=UR(t,r),_=!1):(h=en.EMPTY_NODE,_=!1);const w=$D(new Hh(h,_,!1),new Hh(r,i,!1));return new zH(e,w)}return u}function GF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gh(n,e){let t=null;for(const r of n.views.values())t=t||YH(r,e);return t}function qF(n,e){return e._queryParams.loadsAllData()?YD(n):n.views.get(e._queryIdentifier)}function WF(n,e){return null!=qF(n,e)}function qh(n){return null!=YD(n)}function YD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let o$=1;class zF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function OH(){return{visibleWrites:au.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qR(n,e,t,r,i){return function CH(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=db(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sy(n,new ag({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wh(n,e,t=!1){const r=function DH(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function TH(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&SH(h,r.path)?i=!1:_l(r.path,h.path)&&(a=!0)),u--}return!!i&&(a?(function AH(n){n.visibleWrites=xF(n.allWrites,xH,Sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=TF(n.visibleWrites,r.path):Zi(r.children,_=>{n.visibleWrites=TF(n.visibleWrites,Ir(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new tr(null);return null!=r.snap?a=a.set(Sn(),!0):Zi(r.children,u=>{a=a.set(new Rn(u),!0)}),sy(n,new HD(r.path,a,t))}return[]}function hb(n,e,t){return sy(n,new ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function WR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||WF(a,e))){const h=function r$(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const h=qh(n);if("default"===i)for(const[_,w]of n.views.entries())u=u.concat(UF(w,t,r)),VF(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(u=u.concat(UF(_,t,r)),VF(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!qh(n)&&a.push(new(function e$(){return(0,L.hu)(ZD,"Reference.ts has not been loaded"),ZD}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function t$(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=h.removed;u=h.events;const w=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(x,O)=>qh(O));if(w&&!A){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const O=function p$(n){return n.fold((e,t,r)=>{if(t&&qh(t))return[YD(t)];{let i=[];return t&&(i=GF(t)),Zi(r,(a,u)=>{i=i.concat(u)}),i}})}(x);for(let $=0;$<O.length;++$){const Y=O[$],Ie=Y.query,je=QF(n,Y);n.listenProvider_.startListening(fb(Ie),XD(n,Ie),je.hashFn,je.onComplete)}}}!A&&_.length>0&&!r&&(w?n.listenProvider_.stopListening(fb(e),null):_.forEach(x=>{const O=n.queryToTagMap.get(eT(x));n.listenProvider_.stopListening(fb(x),O)})),function g$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=eT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return u}function KF(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const $=wo(x,r);i=i||Gh(O,$),a=a||qh(O)});let h,u=n.syncPointTree_.get(r);u?(a=a||qh(u),i=i||Gh(u,Sn())):(u=new HF,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=en.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,$)=>{const Y=Gh($,Sn());Y&&(i=i.updateImmediateChild(O,Y))}));const _=WF(u,e);if(!_&&!e._queryParams.loadsAllData()){const x=eT(e);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=function m$(){return o$++}();n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let A=function n$(n,e,t,r,i,a){const u=$F(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function QH(n,e){n.eventRegistrations_.push(e)}(u,t),function JH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(a,u)=>{r.push(ty(a,u))}),t.isFullyInitialized()&&r.push(bF(t.getNode())),jF(n,r,t.getNode(),e)}(u,t)}(u,e,t,qD(n.pendingWriteTree_,r),i,h);if(!_&&!a){const x=qF(u,e);A=A.concat(function _$(n,e,t){const r=e._path,i=XD(n,e),a=QF(n,t),u=n.listenProvider_.startListening(fb(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!qh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,A,x)=>{if(!un(w)&&A&&qh(A))return[YD(A).query];{let O=[];return A&&(O=O.concat(GF(A).map($=>$.query))),Zi(x,($,Y)=>{O=O.concat(Y)}),O}});for(let w=0;w<_.length;++w){const A=_[w];n.listenProvider_.stopListening(fb(A),XD(n,A))}}return u}(n,e,x))}return A}function JD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const w=Gh(h,wo(u,e));if(w)return w});return MF(i,e,a,t,!0)}function sy(n,e){return ZF(e,n.syncPointTree_,null,qD(n.pendingWriteTree_,Sn()))}function ZF(n,e,t,r){if(un(n.path))return YF(n,e,t,r);{const i=e.get(Sn());null==t&&null!=i&&(t=Gh(i,Sn()));let a=[];const u=ln(n.path),h=n.operationForChild(u),_=e.children.get(u);if(_&&h){const w=t?t.getImmediateChild(u):null,A=PF(r,u);a=a.concat(ZF(h,_,w,A))}return i&&(a=a.concat(GR(i,n,r,t))),a}}function YF(n,e,t,r){const i=e.get(Sn());null==t&&null!=i&&(t=Gh(i,Sn()));let a=[];return e.children.inorderTraversal((u,h)=>{const _=t?t.getImmediateChild(u):null,w=PF(r,u),A=n.operationForChild(u);A&&(a=a.concat(YF(A,h,_,w)))}),i&&(a=a.concat(GR(i,n,r,t))),a}function QF(n,e){const t=e.query,r=XD(n,t);return{hashFn:()=>(function KH(n){return n.viewCache_.serverCache.getNode()}(e)||en.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function c$(n,e,t){const r=zR(n,t);if(r){const i=KR(r),a=i.path,u=i.queryId,h=wo(a,e);return ZR(n,a,new lb(NR(u),h))}return[]}(n,t._path,r):function u$(n,e){return sy(n,new lb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function aj(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return WR(n,t,null,a)}}}}function XD(n,e){const t=eT(e);return n.queryToTagMap.get(t)}function eT(n){return n._path.toString()+"$"+n._queryIdentifier}function zR(n,e){return n.tagToQueryMap.get(e)}function KR(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rn(n.substr(0,e))}}function ZR(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),GR(r,t,qD(n.pendingWriteTree_,e),null)}function fb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function s$(){return(0,L.hu)(QD,"Reference.ts has not been loaded"),QD}())(n._repo,n._path):n}class YR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new YR(t)}node(){return this.node_}}class QR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ir(this.path_,e);return new QR(this.syncTree_,t)}node(){return JD(this.syncTree_,this.path_)}}const JF=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?v$(n[".sv"],e,t):"object"==typeof n[".sv"]?w$(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},v$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},w$=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},XF=function(n,e,t,r){return XR(e,new QR(t,n),r)},JR=function(n,e,t){return XR(n,new YR(e),t)};function XR(n,e,t){const r=n.getPriority().val(),i=JF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=JF(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new J_(h,Mr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new J_(i))),u.forEachChild(er,(h,_)=>{const w=XR(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class eP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function tT(n,e){let t=e instanceof Rn?e:new Rn(e),r=n,i=ln(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new eP(i,r,a),t=Yn(t),i=ln(t)}return r}function cg(n){return n.node.value}function tP(n,e){n.node.value=e,nP(n)}function eL(n){return n.node.childCount>0}function nT(n,e){Zi(n.node.children,(t,r)=>{e(new eP(t,n,r))})}function tL(n,e,t,r){t&&!r&&e(n),nT(n,i=>{tL(i,e,!0,r)}),t&&r&&e(n)}function pb(n){return new Rn(null===n.parent?n.name:pb(n.parent)+"/"+n.name)}function nP(n){null!==n.parent&&function C$(n,e,t){const r=function b$(n){return void 0===cg(n)&&!eL(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,nP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,nP(n))}(n.parent,n.name,n)}const I$=/[\[\].#$\/\u0000-\u001F\u007F]/,D$=/[\[\].#$\u0000-\u001F\u007F]/,rP=10485760,rT=function(n){return"string"==typeof n&&0!==n.length&&!I$.test(n)},nL=function(n){return"string"==typeof n&&0!==n.length&&!D$.test(n)},gb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!MD(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},rc=function(n,e,t,r){r&&void 0===e||mb((0,L.gK)(n,"value"),e,t)},mb=function(n,e,t){const r=t instanceof Rn?new Uj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+sg(r));if("function"==typeof e)throw new Error(n+"contains a function "+sg(r)+" with contents = "+e.toString());if(MD(e))throw new Error(n+"contains "+e.toString()+" "+sg(r));if("string"==typeof e&&e.length>rP/3&&(0,L.ug)(e)>rP)throw new Error(n+"contains a string greater than "+rP+" utf8 bytes "+sg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Zi(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!rT(u)))throw new Error(n+" contains an invalid key ("+u+") "+sg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Bj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),lF(n)})(r,u),mb(n,h,r),function jj(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+sg(r)+" in addition to actual children.")}},rL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Zi(e,(u,h)=>{const _=new Rn(u);if(mb(i,h,Ir(t,_)),".priority"===yR(_)&&!gb(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=tb(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!rT(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Vj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&_l(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},iP=function(n,e,t){if(!t||void 0!==e){if(MD(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!gb(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_b=function(n,e,t,r){if(!(r&&void 0===t||rT(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yb=function(n,e,t,r){if(!(r&&void 0===t||nL(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vl=function(n,e){if(".info"===ln(e))throw new Error(n+" failed = Can't modify data under /.info/")},iL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!rT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nL(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class x${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function iT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!vR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function sP(n,e,t){iT(n,t),sL(n,r=>vR(r,e))}function wl(n,e,t){iT(n,t),sL(n,r=>_l(r,e)||_l(e,r))}function sL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(M$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function M$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();rg&&Ki("event: "+t.toString()),Y_(r)}}}const oL="repo_interrupt";class P${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new x$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jD(),this.transactionQueueTree_=new eP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aL(n){const t=n.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:aL(n)})}function lL(n,e,t,r,i){n.dataUpdateCount++;const a=new Rn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,L.UI)(t,w=>Mr(w));u=function h$(n,e,t,r){const i=zR(n,r);if(i){const a=KR(i),u=a.path,h=a.queryId,_=wo(u,e),w=tr.fromObject(t);return ZR(n,u,new ry(NR(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Mr(t);u=function d$(n,e,t,r){const i=zR(n,r);if(null!=i){const a=KR(i),u=a.path,h=a.queryId,_=wo(u,e);return ZR(n,u,new ag(NR(h),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,L.UI)(t,w=>Mr(w));u=function l$(n,e,t){const r=tr.fromObject(t);return sy(n,new ry({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Mr(t);u=hb(n.serverSyncTree_,a,_)}let h=a;u.length>0&&(h=ay(n,a)),wl(n.eventQueue_,h,u)}function uL(n,e){oP(n,"connected",e),!1===e&&function L$(n){oy(n,"onDisconnectEvents");const e=vb(n),t=jD();RR(n.onDisconnect_,Sn(),(i,a)=>{const u=XF(i,a,n.serverSyncTree_,e);ny(t,i,u)});let r=[];RR(t,Sn(),(i,a)=>{r=r.concat(hb(n.serverSyncTree_,i,a));const u=cP(n,i);ay(n,u)}),n.onDisconnect_=jD(),wl(n.eventQueue_,Sn(),r)}(n)}function oP(n,e,t){const r=new Rn("/.info/"+e),i=Mr(t);n.infoData_.updateSnapshot(r,i);const a=hb(n.infoSyncTree_,r,i);wl(n.eventQueue_,r,a)}function sT(n){return n.nextWriteId_++}function aP(n,e,t,r,i){oy(n,"set",{path:e.toString(),value:t,priority:r});const a=vb(n),u=Mr(t,r),h=JD(n.serverSyncTree_,e),_=JR(u,h,a),w=sT(n),A=qR(n.serverSyncTree_,e,_,w,!0);iT(n.eventQueue_,A),n.server_.put(e.toString(),u.val(!0),(O,$)=>{const Y="ok"===O;Y||vo("set at "+e+" failed: "+O);const Ie=Wh(n.serverSyncTree_,w,!Y);wl(n.eventQueue_,e,Ie),zh(0,i,O,$)});const x=cP(n,e);ay(n,x),wl(n.eventQueue_,x,[])}function V$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&MR(n.onDisconnect_,e),zh(0,t,r,i)})}function cL(n,e,t,r){const i=Mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&ny(n.onDisconnect_,e,i),zh(0,r,a,u)})}function lP(n,e,t){let r;r=".info"===ln(e._path)?WR(n.infoSyncTree_,e,t):WR(n.serverSyncTree_,e,t),sP(n.eventQueue_,e._path,r)}function dL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(oL)}function oy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ki(t,...e)}function zh(n,e,t,r){e&&Y_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function uP(n,e,t){return JD(n.serverSyncTree_,e,t)||en.EMPTY_NODE}function oT(n,e=n.transactionQueueTree_){if(e||aT(n,e),cg(e)){const t=fL(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function G$(n,e,t){const r=t.map(w=>w.currentWriteId),i=uP(n,e,r);let a=i;const u=i.hash();for(let w=0;w<t.length;w++){const A=t[w];(0,L.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=wo(e,A.path);a=a.updateChild(x,A.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{oy(n,"transaction put response",{path:_.toString(),status:w});let A=[];if("ok"===w){const x=[];for(let O=0;O<t.length;O++)t[O].status=2,A=A.concat(Wh(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&x.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();aT(n,tT(n.transactionQueueTree_,e)),oT(n,n.transactionQueueTree_),wl(n.eventQueue_,e,A);for(let O=0;O<x.length;O++)Y_(x[O])}else{if("datastale"===w)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{vo("transaction at "+_.toString()+" failed: "+w);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=w}ay(n,e)}},u)}(n,pb(e),t)}else eL(e)&&nT(e,t=>{oT(n,t)})}function ay(n,e){const t=hL(n,e),r=pb(t);return function q$(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=wo(t,_.path);let x,A=!1;if((0,L.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)A=!0,x=_.abortReason,i=i.concat(Wh(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)A=!0,x="maxretry",i=i.concat(Wh(n.serverSyncTree_,_.currentWriteId,!0));else{const O=uP(n,_.path,u);_.currentInputSnapshot=O;const $=e[h].update(O.val());if(void 0!==$){mb("transaction failed: Data returned ",$,_.path);let Y=Mr($);"object"==typeof $&&null!=$&&(0,L.r3)($,".priority")||(Y=Y.updatePriority(O.getPriority()));const je=_.currentWriteId,At=vb(n),tt=JR(Y,O,At);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=tt,_.currentWriteId=sT(n),u.splice(u.indexOf(je),1),i=i.concat(qR(n.serverSyncTree_,_.path,tt,_.currentWriteId,_.applyLocally)),i=i.concat(Wh(n.serverSyncTree_,je,!0))}else A=!0,x="nodata",i=i.concat(Wh(n.serverSyncTree_,_.currentWriteId,!0))}wl(n.eventQueue_,t,i),i=[],A&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}aT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Y_(r[h]);oT(n,n.transactionQueueTree_)}(n,fL(n,t),r),r}function hL(n,e){let t,r=n.transactionQueueTree_;for(t=ln(e);null!==t&&void 0===cg(r);)r=tT(r,t),t=ln(e=Yn(e));return r}function fL(n,e){const t=[];return pL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function pL(n,e,t){const r=cg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);nT(e,i=>{pL(n,i,t)})}function aT(n,e){const t=cg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,tP(e,t.length>0?t:void 0)}nT(e,r=>{aT(n,r)})}function cP(n,e){const t=pb(hL(n,e)),r=tT(n.transactionQueueTree_,e);return function E$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{dP(n,i)}),dP(n,r),tL(r,i=>{dP(n,i)}),t}function dP(n,e){const t=cg(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,L.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,L.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Wh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?tP(e,void 0):t.length=a+1,wl(n.eventQueue_,pb(e),i);for(let u=0;u<r.length;u++)Y_(r[u])}}const hP=function(n,e){const t=K$(n),r=t.namespace;return"firebase.com"===t.domain&&ec(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ec("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dR(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Rn(t.pathString)}},K$=function(n){let e="",t="",r="",i="",a="",u=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function W$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(A,x)));const O=function z$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));w=e.indexOf(":"),w>=0?(u="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const $=e.slice(0,w);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:a}};class gL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class mL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _L{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class yL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return V$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vl("OnDisconnect.remove",this._path);const e=new L.BH;return cL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vl("OnDisconnect.set",this._path),rc("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return cL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){vl("OnDisconnect.setWithPriority",this._path),rc("OnDisconnect.setWithPriority",e,this._path,!1),iP("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function U$(n,e,t,r,i){const a=Mr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&ny(n.onDisconnect_,e,a),zh(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){vl("OnDisconnect.update",this._path),rL("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function B$(n,e,t,r){if((0,L.xb)(t))return Ki("onDisconnect().update() called with empty data.  Don't do anything."),void zh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Zi(t,(u,h)=>{const _=Mr(h);ny(n.onDisconnect_,Ir(e,u),_)}),zh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class zo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return un(this._path)?null:yR(this._path)}get ref(){return new bl(this._repo,this._path)}get _queryIdentifier(){const e=CF(this._queryParams),t=lR(e);return"{}"===t?"default":t}get _queryObject(){return CF(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof zo))return!1;const t=this._repo===e._repo,r=vR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Lj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function lT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Kh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===nc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ud)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==tc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!gb(e)||null!=t&&!gb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof IR||n.getIndex()===DR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function uT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class bl extends zo{constructor(e,t){super(e,t,new VD,!1)}get parent(){const e=aF(this._path);return null===e?null:new bl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Rn(e),r=hg(this.ref,e);return new dg(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new dg(i,hg(this.ref,r),er)))}hasChild(e){const t=new Rn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vL(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?hg(n._root,e):n._root}function wL(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=hP(e,n._repo.repoInfo_.nodeAdmin);iL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ec("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),vL(n,t.path.toString())}function hg(n,e){return null===ln((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yb("child","path",t,!1)):yb("child","path",e,!1),new bl(n._repo,Ir(n._path,e));var t}function fP(n,e){n=(0,L.m9)(n),vl("set",n._path),rc("set",e,n._path,!1);const t=new L.BH;return aP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function X$(n,e){rL("update",e,n._path,!1);const t=new L.BH;return function F$(n,e,t,r){oy(n,"update",{path:e.toString(),value:t});let i=!0;const a=vb(n),u={};if(Zi(t,(h,_)=>{i=!1,u[h]=XF(Ir(e,h),Mr(_),n.serverSyncTree_,a)}),i)Ki("update() called with empty data.  Don't do anything."),zh(0,r,"ok",void 0);else{const h=sT(n),_=function a$(n,e,t,r){!function IH(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=FR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return sy(n,new ry({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);iT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,A)=>{const x="ok"===w;x||vo("update at "+e+" failed: "+w);const O=Wh(n.serverSyncTree_,h,!x),$=O.length>0?ay(n,e):e;wl(n.eventQueue_,$,O),zh(0,r,w,A)}),Zi(t,w=>{const A=cP(n,Ir(e,w));ay(n,A)}),wl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function eG(n){return function O$(n,e){const t=function f$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,A)=>{const x=wo(w,t);r=r||Gh(A,x)});let i=n.syncPointTree_.get(t);i?r=r||Gh(i,Sn()):(i=new HF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Hh(r,!0,!1):null;return function ZH(n){return GD(n.viewCache_)}($F(i,e,qD(n.pendingWriteTree_,e._path),a?u.getNode():en.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Mr(r).withIndex(e._queryParams.getIndex()),a=hb(n.serverSyncTree_,e._path,i);return sP(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(oy(n,"get for query "+(0,L.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(e=>new dg(e,new bl(n._repo,n._path),n._queryParams.getIndex()))}class cT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new gL("value",this,new dg(e.snapshotNode,new bl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new mL(this,e,t):null}matches(e){return e instanceof cT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new mL(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=hg(new bl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new gL(e.type,this,new dg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wb(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(A,x)=>{lP(n._repo,n,h),_(A,x)};w.userCallback=t.userCallback,w.context=t.context,t=w}const u=new _L(t,a||void 0),h="value"===e?new cT(u):new dT(e,u);return function j$(n,e,t){let r;r=".info"===ln(e._path)?KF(n.infoSyncTree_,e,t):KF(n.serverSyncTree_,e,t),sP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>lP(n._repo,n,h)}function pP(n,e,t,r){return wb(n,"value",e,t,r)}function bL(n,e,t,r){return wb(n,"child_added",e,t,r)}function EL(n,e,t,r){return wb(n,"child_changed",e,t,r)}function CL(n,e,t,r){return wb(n,"child_moved",e,t,r)}function IL(n,e,t,r){return wb(n,"child_removed",e,t,r)}function DL(n,e,t){let r=null;const i=t?new _L(t):null;"value"===e?r=new cT(i):e&&(r=new dT(e,i)),lP(n._repo,n,r)}class lu{}class TL extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("endAt",this._value,e._path,!0);const t=xR(e._queryParams,this._value,this._key);if(uT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class nG extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("endBefore",this._value,e._path,!1);const t=function dH(n,e,t){let r,i;return n.index_===nc?("string"==typeof e&&(e=wF(e)),i=xR(n,e,t)):(r=null==t?ud:wF(t),i=xR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(uT(t),Kh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class SL extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("startAt",this._value,e._path,!0);const t=AR(e._queryParams,this._value,this._key);if(uT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class sG extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){rc("startAfter",this._value,e._path,!1);const t=function cH(n,e,t){let r;if(n.index_===nc)"string"==typeof e&&(e=vF(e)),r=AR(n,e,t);else{let i;i=null==t?tc:vF(t),r=AR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(uT(t),Kh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class aG extends lu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function lH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class uG extends lu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function uH(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class dG extends lu{constructor(e){super(),this._path=e}_apply(e){lT(e,"orderByChild");const t=new Rn(this._path);if(un(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new IR(t),i=UD(e._queryParams,r);return Kh(i),new zo(e._repo,e._path,i,!0)}}class fG extends lu{_apply(e){lT(e,"orderByKey");const t=UD(e._queryParams,nc);return Kh(t),new zo(e._repo,e._path,t,!0)}}class gG extends lu{_apply(e){lT(e,"orderByPriority");const t=UD(e._queryParams,er);return Kh(t),new zo(e._repo,e._path,t,!0)}}class _G extends lu{_apply(e){lT(e,"orderByValue");const t=UD(e._queryParams,DR);return Kh(t),new zo(e._repo,e._path,t,!0)}}class vG extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(rc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new TL(this._value,this._key)._apply(new SL(this._value,this._key)._apply(e))}}function uu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function XH(n){(0,L.hu)(!ZD,"__referenceConstructor has already been defined"),ZD=n})(bl),function i$(n){(0,L.hu)(!QD,"__referenceConstructor has already been defined"),QD=n}(bl);const gP={};function xL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ec("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ki("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,u=hP(a,i),h=u.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,u=hP(a,i),h=u.repoInfo):_=!u.repoInfo.secure;const A=i&&_?new J0(J0.OWNER):new dj(n.name,n.options,e);iL("Invalid Firebase Database URL",u),un(u.path)||ec("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function IG(n,e,t,r){let i=gP[e.name];i||(i={},gP[e.name]=i);let a=i[n.toURLString()];return a&&ec("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new P$(n,false,t,r),i[n.toURLString()]=a,a}(h,n,A,new cj(n.name,t));return new TG(x,n)}class TG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function k$(n,e,t){if(n.stats_=pR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new BD(n.repoInfo_,(r,i,a,u)=>{lL(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>uL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new og(n.repoInfo_,e,(r,i,a,u)=>{lL(n,r,i,a,u)},r=>{uL(n,r)},r=>{!function N$(n,e){Zi(e,(t,r)=>{oP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function gj(n,e){const t=n.toString();return fR[t]||(fR[t]=e()),fR[t]}(n.repoInfo_,()=>new _H(n.stats_,n.server_)),n.infoData_=new hH,n.infoSyncTree_=new zF({startListening:(r,i,a,u)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=hb(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),oP(n,"connected",!1),n.serverSyncTree_=new zF({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(h,_)=>{const w=u(h,_);wl(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bl(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CG(n,e){const t=gP[e];(!t||t[n.key]!==n)&&ec(`Database ${e}(${n.repoInfo_}) has already been deleted.`),dL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ec("Cannot call "+e+" on a deleted database.")}}function MG(n,e){R1(n,e)}const PG={".sv":"timestamp"};class OG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}og.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},og.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function RG(n){T1(ps.SDK_VERSION),(0,ps._registerComponent)(new _a.wA("database",(e,{instanceIdentifier:t})=>xL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(I1,"0.12.7",n),(0,ps.registerVersion)(I1,"0.12.7","esm2017")}();const UG=new ya.Yd("@firebase/database-compat"),ML=function(n){UG.warn("FIREBASE WARNING: "+n)};class HG{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ML("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class $G{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),yb("DataSnapshot.child","path",e,!1),new Zh(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),yb("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Zh(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ws{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const u=ws.getCancelAndContextArgs_("Query.on",r,i),h=(w,A)=>{t.call(u.context,new Zh(this.database,w),A)};h.userCallback=t,h.context=u.context;const _=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return pP(this._delegate,h,_),t;case"child_added":return bL(this._delegate,h,_),t;case"child_removed":return IL(this._delegate,h,_),t;case"child_changed":return EL(this._delegate,h,_),t;case"child_moved":return CL(this._delegate,h,_),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,DL(this._delegate,e,i)}else DL(this._delegate,e)}get(){return eG(this._delegate).then(e=>new Zh(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=ws.getCancelAndContextArgs_("Query.once",r,i),u=new L.BH,h=(w,A)=>{const x=new Zh(this.database,w);t&&t.call(a.context,x,A),u.resolve(x)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),u.reject(w)};switch(e){case"value":pP(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":bL(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":IL(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":EL(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":CL(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ws(this.database,uu(this._delegate,function lG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new aG(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ws(this.database,uu(this._delegate,function cG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uG(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ws(this.database,uu(this._delegate,function hG(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return yb("orderByChild","path",n,!1),new dG(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ws(this.database,uu(this._delegate,function pG(){return new fG}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ws(this.database,uu(this._delegate,function mG(){return new gG}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ws(this.database,uu(this._delegate,function yG(){return new _G}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ws(this.database,uu(this._delegate,function iG(n=null,e){return _b("startAt","key",e,!0),new SL(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ws(this.database,uu(this._delegate,function oG(n,e){return _b("startAfter","key",e,!0),new sG(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ws(this.database,uu(this._delegate,function tG(n,e){return _b("endAt","key",e,!0),new TL(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ws(this.database,uu(this._delegate,function rG(n,e){return _b("endBefore","key",e,!0),new nG(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ws(this.database,uu(this._delegate,function wG(n,e){return _b("equalTo","key",e,!0),new vG(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ws))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ia(this.database,new bl(this._delegate._repo,this._delegate._path))}}class Ia extends ws{constructor(e,t){super(e,new zo(t._repo,t._path,new VD,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ia(this.database,hg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ia(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Ia(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=fP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,ML("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vl("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=X$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function J$(n,e,t){if(vl("setWithPriority",n._path),rc("setWithPriority",e,n._path,!1),iP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return aP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function Y$(n){return vl("remove",n._path),fP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function FG(n,e,t){var r;if(n=(0,L.m9)(n),vl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new L.BH,h=pP(n,()=>{});return function $$(n,e,t,r,i,a){oy(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:A1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=uP(n,e,void 0);u.currentInputSnapshot=h;const _=u.update(h.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{mb("transaction failed: Data returned ",_,u.path),u.status=0;const w=tT(n.transactionQueueTree_,e),A=cg(w)||[];let x;A.push(u),tP(w,A),"object"==typeof _&&null!==_&&(0,L.r3)(_,".priority")?(x=(0,L.DV)(_,".priority"),(0,L.hu)(gb(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(JD(n.serverSyncTree_,e)||en.EMPTY_NODE).getPriority().val();const O=vb(n),$=Mr(_,x),Y=JR($,h,O);u.currentOutputSnapshotRaw=$,u.currentOutputSnapshotResolved=Y,u.currentWriteId=sT(n);const Ie=qR(n.serverSyncTree_,e,Y,u.currentWriteId,u.applyLocally);wl(n.eventQueue_,e,Ie),oT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,A)=>{let x=null;_?a.reject(_):(x=new dg(A,new bl(n._repo,n._path),er),a.resolve(new OG(w,x)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new $G(a.committed,new Zh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Q$(n,e){n=(0,L.m9)(n),vl("setPriority",n._path),iP("setPriority",e,!1);const t=new L.BH;return aP(n._repo,Ir(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function Z$(n,e){n=(0,L.m9)(n),vl("push",n._path),rc("push",e,n._path,!0);const t=aL(n._repo),r=iH(t),i=hg(n,r),a=hg(n,r);let u;return u=null!=e?fP(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Ia(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new Ia(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return vl("Reference.onDisconnect",this._delegate._path),new HG(new yL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function SG(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ec("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ec('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new J0(J0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new J0(u)}!function EG(n,e,t,r){n.repoInfo_=new dR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Ia){const t=wL(this._delegate,e.toString());return new Ia(this,t)}{const t=vL(this._delegate,e);return new Ia(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=wL(this._delegate,e);return new Ia(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function AG(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),dL(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function xG(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function H$(n){n.persistentConnection_&&n.persistentConnection_.resume(oL)}(n._repo)}(this._delegate)}}bb.ServerValue={TIMESTAMP:function kG(){return PG}(),increment:n=>function NG(n){return{".sv":{increment:n}}}(n)};var qG=Object.freeze({__proto__:null,initStandalone:function GG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){T1(t);const u=new _a.zt("auth-internal",new _a.H0("database-standalone"));return u.setComponent(new _a.wA("auth-internal",()=>r,"PRIVATE")),{instance:new bb(xL(n,u,void 0,e,a),n),namespace:i}}});const WG=bb.ServerValue;function RL(n){return null==n}function PL(n){return"function"==typeof n.set}function kL(n,e){return PL(e)?e:n.ref(e)}function NL(n,e){if(function KG(n){return"string"==typeof n}(n))return e.stringCase();if(PL(n))return e.firebaseCase();if(function ZG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Eb(n,e,t="on",r=Ho.z){return new H.y(i=>{let a=null;return a=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Nt.U)(i=>{const{snapshot:a,prevKey:u}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,GT.B)())}function OL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function JG(n,e){const{payload:t,prevKey:r,key:i}=e,a=OL(n,i),u=function QG(n,e){if(RL(e))return 0;{const t=OL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function FL(n){return(RL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function LL(n,e,t){return function YG(n,e,t){return Eb(n,"value","once",t).pipe(Ln(r=>{const i=[C(r)];return e.forEach(a=>i.push(Eb(n,a,"on",t))),(0,wv.T)(...i).pipe(xr(JG,[]))}),KC())}(n,e=FL(e),t)}function VL(n,e,t){const r=(e=FL(e)).map(i=>Eb(n,i,"on",t));return(0,wv.T)(...r)}function UL(n,e){return function(r,i){return NL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function n3(n){return function(t){return t?NL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function BL(n,e){return function(){return Eb(n,"value","on",e)}}!function zG(n){n.INTERNAL.registerComponent(new _a.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new bb(i,r)},"PUBLIC").setServiceProps({Reference:Ia,Query:ws,Database:bb,DataSnapshot:Zh,enableLogging:MG,INTERNAL:qG,ServerValue:WG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(Tm.Z);const s3=new m.OlP("angularfire2.realtimeDatabaseURL"),o3=new m.OlP("angularfire2.database.use-emulator");let a3=(()=>{class n{constructor(t,r,i,a,u,h,_,w,A,x,O,$,Y,Ie,je){this.schedulers=h;const At=_,tt=(0,ci.on)(t,u,r);w&&$v(tt,u,A,O,$,Y,x,Ie),this.database=(0,ci.cc)(`${tt.name}.database.${i}`,"AngularFireDatabase",tt.name,()=>{const kt=u.runOutsideAngular(()=>tt.database(i||void 0));return At&&kt.useEmulator(...At),kt},[At])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>kL(this.database,t));let a=i;return r&&(a=r(i)),function r3(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:UL(r,"update"),set:UL(r,"set"),push:i=>r.push(i),remove:n3(r),snapshotChanges:i=>LL(n,i,t).pipe(Cn.iC),stateChanges:i=>VL(n,i,t).pipe(Cn.iC),auditTrail:i=>function XG(n,e,t){return function t3(n,e,t){return function e3(n,e){return Eb(n,"value","on",e).pipe((0,Nt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function JB(...n){const e=(0,Tn.jO)(n);return(0,Ar.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,oa.Xf)(n[_]).subscribe((0,Fn.x)(r,w=>{a[_]=w,!h&&!u[_]&&(u[_]=!0,(h=u.every(Sr.y))&&(u=null))},QB.Z));t.subscribe((0,Fn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,Nt.U)(([i,a])=>{const u=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),function XB(n){return(0,Ar.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Nt.U)(i=>i.actions))}(n,VL(n,e).pipe(xr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,a)=>LL(n,i,t).pipe((0,Nt.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Cn.iC)}}(a,this)}object(t){return function i3(n,e){return{query:n,snapshotChanges:()=>BL(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>BL(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,Nt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>kL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ci.Dh),m.LFG(ci.xv,8),m.LFG(s3,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Cn.HU),m.LFG(o3,8),m.LFG(nh,8),m.LFG(bm,8),m.LFG(Em,8),m.LFG(Cm,8),m.LFG(Im,8),m.LFG(eC,8),m.LFG(Hv,8),m.LFG(th,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l3=(()=>{class n{constructor(){Yf.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[a3]}),n})();const jL_firebaseConfig={apiKey:"AIzaSyA_rodTSFm1QEoW2Bw9udvfy1c_r6HbX38",authDomain:"saladejuegos-43468.firebaseapp.com",projectId:"saladejuegos-43468",storageBucket:"saladejuegos-43468.appspot.com",messagingSenderId:"458668032808",appId:"1:458668032808:web:7c7ffbfb04c37676f1061d",measurementId:"G-0Z5V5ZBP5K"};let u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[gT]}),n.\u0275inj=m.cJS({providers:[],imports:[[ta,Gv,ma,nm,ci.hO.initializeApp(jL_firebaseConfig),fS,YB,ch,l3]]}),n})();(0,m.G48)(),Rl().bootstrapModule(u3).catch(n=>console.error(n))},5867:(gt,Me,U)=>{"use strict";U.d(Me,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=U(9681);(0,m.registerVersion)("firebase","9.6.10","app")},127:(gt,Me,U)=>{"use strict";U.d(Me,{Z:()=>m.Z});var m=U(3942);m.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(gt,Me,U)=>{"use strict";U.r(Me);var m=U(5861),te=U(3942),V=U(2090),ce=U(9681),oe=U(655),we=U(1877),de=U(4859);const He=function Je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qe=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new we.Yd("@firebase/auth");function et(y,...f){rt.logLevel<=we.in.ERROR&&rt.error(`Auth (${ce.SDK_VERSION}): ${y}`,...f)}function Pe(y,...f){throw Z(y,...f)}function Te(y,...f){return Z(y,...f)}function Se(y,f,g){const b=Object.assign(Object.assign({},qe()),{[f]:g});return new V.LL("auth","Firebase",b).create(f,{appName:y.name})}function Ye(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Pe(y,"argument-error"),Se(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z(y,...f){if("string"!=typeof y){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return ve.create(y,...f)}function ae(y,f,...g){if(!y)throw Z(f,...g)}function X(y){const f="INTERNAL ASSERTION FAILED: "+y;throw et(f),new Error(f)}function ue(y,f){y||X(f)}const he=new Map;function re(y){ue(y instanceof Function,"Expected a class definition");let f=he.get(y);return f?(ue(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,he.set(y,f),f)}function Dt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function on(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(f,g){this.shortDelay=f,this.longDelay=g,ue(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function dt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(on()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(y,f){ue(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class ur{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void X("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void X("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void X("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pr=new tn(3e4,6e4);function an(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function $t(y,f,g,b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(y,f,g,b,M={}){return jr(y,M,(0,m.Z)(function*(){let F={},ee={};b&&("GET"===f?ee=b:F={body:JSON.stringify(b)});const pe=(0,V.xO)(Object.assign({key:y.config.apiKey},ee)).slice(1),Ke=yield y._getAdditionalHeaders();return Ke["Content-Type"]="application/json",y.languageCode&&(Ke["X-Firebase-Locale"]=y.languageCode),ur.fetch()(kr(y,y.config.apiHost,g,pe),Object.assign({method:f,headers:Ke,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function jr(y,f,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(y,f,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Jt),f);try{const M=new Nr(y),F=yield Promise.race([g(),M.promise]);M.clearNetworkTimeout();const ee=yield F.json();if("needConfirmation"in ee)throw bn(y,"account-exists-with-different-credential",ee);if(F.ok&&!("errorMessage"in ee))return ee;{const pe=F.ok?ee.errorMessage:ee.error.message,[Ke,st]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw bn(y,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Ke)throw bn(y,"email-already-in-use",ee);const St=b[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Se(y,St,st);Pe(y,St)}}catch(M){if(M instanceof V.ZR)throw M;Pe(y,"network-request-failed")}})).apply(this,arguments)}function cr(y,f,g,b){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(y,f,g,b,M={}){const F=yield $t(y,f,g,b,M);return"mfaPendingCredential"in F&&Pe(y,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function kr(y,f,g,b){const M=`${f}${g}?${b}`;return y.config.emulator?fn(y.config,M):`${y.config.apiScheme}://${M}`}class Nr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Te(this.auth,"network-request-failed")),Pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(y,f,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const M=Te(y,f,b);return M.customData._tokenResponse=g,M}function $r(){return($r=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function dn(y,f){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gr(y,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ft(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Mi(){return(Mi=(0,m.Z)(function*(y,f=!1){const g=(0,V.m9)(y),b=yield g.getIdToken(f),M=Qe(b);ae(M&&M.exp&&M.auth_time&&M.iat,g.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,ee=null==F?void 0:F.sign_in_provider;return{claims:M,token:b,authTime:ft(bt(M.auth_time)),issuedAtTime:ft(bt(M.iat)),expirationTime:ft(bt(M.exp)),signInProvider:ee||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function bt(y){return 1e3*Number(y)}function Qe(y){const[f,g,b]=y.split(".");if(void 0===f||void 0===g||void 0===b)return et("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,V.tV)(g);return M?JSON.parse(M):(et("Failed to decode base64 JWT payload"),null)}catch(M){return et("Caught error parsing JWT payload as JSON",M),null}}function jn(y,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof V.ZR&&Xt(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function Xt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class bs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class hr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ft(this.lastLoginAt),this.creationTime=ft(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(y){return vt.apply(this,arguments)}function vt(){return(vt=(0,m.Z)(function*(y){var f;const g=y.auth,b=yield y.getIdToken(),M=yield jn(y,Gr(g,{idToken:b}));ae(null==M?void 0:M.users.length,g,"internal-error");const F=M.users[0];y._notifyReloadListener(F);const ee=(null===(f=F.providerUserInfo)||void 0===f?void 0:f.length)?Ne(F.providerUserInfo):[],pe=ke(y.providerData,ee),St=!!y.isAnonymous&&!(y.email&&F.passwordHash||(null==pe?void 0:pe.length)),_t={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:pe,metadata:new hr(F.createdAt,F.lastLoginAt),isAnonymous:St};Object.assign(y,_t)})).apply(this,arguments)}function Zt(){return(Zt=(0,m.Z)(function*(y){const f=(0,V.m9)(y);yield Jn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ke(y,f){return[...y.filter(b=>!f.some(M=>M.providerId===b.providerId)),...f]}function Ne(y){return y.map(f=>{var{providerId:g}=f,b=(0,oe._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function wt(){return(wt=(0,m.Z)(function*(y,f){const g=yield jr(y,{},(0,m.Z)(function*(){const b=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:M,apiKey:F}=y.config,ee=kr(y,M,"/v1/token",`key=${F}`),pe=yield y._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",ur.fetch()(ee,{method:"POST",headers:pe,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ae(f.idToken,"internal-error"),ae(void 0!==f.idToken,"internal-error"),ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Tt(y){const f=Qe(y);return ae(f,"internal-error"),ae(void 0!==f.exp,"internal-error"),ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,m.Z)(function*(){return ae(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,m.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:ee}=yield function nt(y,f){return wt.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(M,F,Number(ee))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:M,expirationTime:F}=g,ee=new Qt;return b&&(ae("string"==typeof b,"internal-error",{appName:f}),ee.refreshToken=b),M&&(ae("string"==typeof M,"internal-error",{appName:f}),ee.accessToken=M),F&&(ae("number"==typeof F,"internal-error",{appName:f}),ee.expirationTime=F),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Qt,this.toJSON())}_performRefresh(){return X("not implemented")}}function Rt(y,f){ae("string"==typeof y||void 0===y,"internal-error",{appName:f})}class W{constructor(f){var{uid:g,auth:b,stsTokenManager:M}=f,F=(0,oe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new hr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const b=yield jn(g,g.stsTokenManager.getToken(g.auth,f));return ae(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function dr(y){return Mi.apply(this,arguments)}(this,f)}reload(){return function fr(y){return Zt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new W(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,m.Z)(function*(){let M=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),M=!0),g&&(yield Jn(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield jn(f,function ot(y,f){return $r.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,M,F,ee,pe,Ke,st,St;const _t=null!==(b=g.displayName)&&void 0!==b?b:void 0,Zn=null!==(M=g.email)&&void 0!==M?M:void 0,qs=null!==(F=g.phoneNumber)&&void 0!==F?F:void 0,Nc=null!==(ee=g.photoURL)&&void 0!==ee?ee:void 0,ku=null!==(pe=g.tenantId)&&void 0!==pe?pe:void 0,Nu=null!==(Ke=g._redirectEventId)&&void 0!==Ke?Ke:void 0,Sf=null!==(st=g.createdAt)&&void 0!==st?st:void 0,Fy=null!==(St=g.lastLoginAt)&&void 0!==St?St:void 0,{uid:rl,emailVerified:Fd,isAnonymous:Ld,providerData:Af,stsTokenManager:Vd}=g;ae(rl&&Vd,f,"internal-error");const Lr=Qt.fromJSON(this.name,Vd);ae("string"==typeof rl,f,"internal-error"),Rt(_t,f.name),Rt(Zn,f.name),ae("boolean"==typeof Fd,f,"internal-error"),ae("boolean"==typeof Ld,f,"internal-error"),Rt(qs,f.name),Rt(Nc,f.name),Rt(ku,f.name),Rt(Nu,f.name),Rt(Sf,f.name),Rt(Fy,f.name);const xf=new W({uid:rl,auth:f,email:Zn,emailVerified:Fd,displayName:_t,isAnonymous:Ld,photoURL:Nc,phoneNumber:qs,tenantId:ku,stsTokenManager:Lr,createdAt:Sf,lastLoginAt:Fy});return Af&&Array.isArray(Af)&&(xf.providerData=Af.map(Pg=>Object.assign({},Pg))),Nu&&(xf._redirectEventId=Nu),xf}static _fromIdTokenResponse(f,g,b=!1){return(0,m.Z)(function*(){const M=new Qt;M.updateFromServerResponse(g);const F=new W({uid:g.localId,auth:f,stsTokenManager:M,isAnonymous:b});return yield Jn(F),F})()}}const J=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,b){var M=this;return(0,m.Z)(function*(){M.storage[g]=b})()}_get(g){var b=this;return(0,m.Z)(function*(){const M=b.storage[g];return void 0===M?null:M})()}_remove(g){var b=this;return(0,m.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function _e(y,f,g){return`firebase:${y}:${f}:${g}`}class se{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:M,name:F}=this.auth;this.fullUserKey=_e(this.userKey,M.apiKey,F),this.fullPersistenceKey=_e("persistence",M.apiKey,F),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?W._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,m.Z)(function*(){if(!g.length)return new se(re(J),f,b);const M=(yield Promise.all(g.map(function(){var st=(0,m.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return st.apply(this,arguments)}}()))).filter(st=>st);let F=M[0]||re(J);const ee=_e(b,f.config.apiKey,f.name);let pe=null;for(const st of g)try{const St=yield st._get(ee);if(St){const _t=W._fromJSON(f,St);st!==F&&(pe=_t),F=st;break}}catch(St){}const Ke=M.filter(st=>st._shouldAllowMigration);return F._shouldAllowMigration&&Ke.length?(F=Ke[0],pe&&(yield F._set(ee,pe.toJSON())),yield Promise.all(g.map(function(){var st=(0,m.Z)(function*(St){if(St!==F)try{yield St._remove(ee)}catch(_t){}});return function(St){return st.apply(this,arguments)}}())),new se(F,f,b)):new se(F,f,b)})()}}function We(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(nn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ct(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Vt(f))return"Blackberry";if(_n(f))return"Webos";if(rn(f))return"Safari";if((f.includes("chrome/")||Hn(f))&&!f.includes("edge/"))return"Chrome";if(kn(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Ct(y=(0,V.z$)()){return/firefox\//i.test(y)}function rn(y=(0,V.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Hn(y=(0,V.z$)()){return/crios\//i.test(y)}function nn(y=(0,V.z$)()){return/iemobile/i.test(y)}function kn(y=(0,V.z$)()){return/android/i.test(y)}function Vt(y=(0,V.z$)()){return/blackberry/i.test(y)}function _n(y=(0,V.z$)()){return/webos/i.test(y)}function $n(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)}function Qi(y=(0,V.z$)()){return $n(y)||kn(y)||_n(y)||Vt(y)||/windows phone/i.test(y)||nn(y)}function Yo(y,f=[]){let g;switch(y){case"Browser":g=We((0,V.z$)());break;case"Worker":g=`${We((0,V.z$)())}-${y}`;break;default:g=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${b}`}class ri{constructor(f,g,b){this.app=f,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jt(this),this.idTokenSubscription=new jt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=re(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var M,F;if(!b._deleted&&(b.persistenceManager=yield se.create(b,f),!b._deleted)){if(null===(M=b._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(ee){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(F=b.currentUser)||void 0===F?void 0:F.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var b;let M=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const F=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,ee=null==M?void 0:M._redirectEventId,pe=yield g.tryRedirectSignIn(f);(!F||F===ee)&&(null==pe?void 0:pe.user)&&(M=pe.user)}return M?M._redirectEventId?(ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)):g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(M){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield Jn(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function at(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const b=f?(0,V.m9)(f):null;return b&&ae(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){if(!g._deleted)return f&&ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,m.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(re(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,m.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(g);return null===f?M.removeCurrentUser():M.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&re(f)||g._popupRedirectResolver;ae(b,g,"argument-error"),g.redirectPersistenceManager=yield se.create(g,[re(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var b,M;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(M=g.redirectUser)||void 0===M?void 0:M._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,M){if(this._deleted)return()=>{};const F="function"==typeof g?g:g.next.bind(g),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(ee,this,"internal-error"),ee.then(()=>F(this.currentUser)),"function"==typeof g?f.addObserver(g,b,M):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Yo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const M=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return M&&(b["X-Firebase-Client"]=M),b})()}}function $e(y){return(0,V.m9)(y)}class jt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function An(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Ft{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return X("not implemented")}_getIdTokenResponse(f){return X("not implemented")}_linkToIdToken(f,g){return X("not implemented")}_getReauthenticationResolver(f){return X("not implemented")}}function Un(y,f){return Es.apply(this,arguments)}function Es(){return(Es=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:resetPassword",an(y,f))})).apply(this,arguments)}function Lt(y,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Cs(y,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:update",an(y,f))})).apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithPassword",an(y,f))})).apply(this,arguments)}function Pi(y,f){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:sendOobCode",an(y,f))})).apply(this,arguments)}function Or(y,f){return hn.apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(y,f){return Pi(y,f)})).apply(this,arguments)}function Ta(y,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(y,f){return Pi(y,f)})).apply(this,arguments)}function mi(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,m.Z)(function*(y,f){return Pi(y,f)})).apply(this,arguments)}function du(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,m.Z)(function*(y,f){return Pi(y,f)})).apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithEmailLink",an(y,f))})).apply(this,arguments)}function El(){return(El=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithEmailLink",an(y,f))})).apply(this,arguments)}class Xo extends Ft{constructor(f,g,b,M=null){super("password",b),this._email=f,this._password=g,this._tenantId=M}static _fromEmailAndPassword(f,g){return new Xo(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Xo(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Is(y,f){return Dr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Jo(y,f){return Xn.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Pe(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,m.Z)(function*(){switch(b.signInMethod){case"password":return Lt(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function ic(y,f){return El.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:Pe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Gn(y,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithIdp",an(y,f))})).apply(this,arguments)}class Xi extends Ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Xi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Pe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:M}=g,F=(0,oe._T)(g,["providerId","signInMethod"]);if(!b||!M)return null;const ee=new Xi(b,M);return ee.idToken=F.idToken||void 0,ee.accessToken=F.accessToken||void 0,ee.secret=F.secret,ee.nonce=F.nonce,ee.pendingToken=F.pendingToken||null,ee}_getIdTokenResponse(f){return Gn(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Gn(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Gn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,V.xO)(g)}return f}}function hd(y,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:sendVerificationCode",an(y,f))})).apply(this,arguments)}function Ts(){return(Ts=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,f))})).apply(this,arguments)}function Il(){return(Il=(0,m.Z)(function*(y,f){const g=yield cr(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,f));if(g.temporaryProof)throw bn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const fd={USER_NOT_FOUND:"user-not-found"};function pu(){return(pu=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),fd)})).apply(this,arguments)}class Co extends Ft{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Co({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Co({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Cl(y,f){return Ts.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Eo(y,f){return Il.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function pd(y,f){return pu.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:M}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:M}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:M,temporaryProof:F}=f;return b||g||M||F?new Co({verificationId:g,verificationCode:b,phoneNumber:M,temporaryProof:F}):null}}class Js{constructor(f){var g,b,M,F,ee,pe;const Ke=(0,V.zd)((0,V.pd)(f)),st=null!==(g=Ke.apiKey)&&void 0!==g?g:null,St=null!==(b=Ke.oobCode)&&void 0!==b?b:null,_t=function Yh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ke.mode)&&void 0!==M?M:null);ae(st&&St&&_t,"argument-error"),this.apiKey=st,this.operation=_t,this.code=St,this.continueUrl=null!==(F=Ke.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ee=Ke.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(pe=Ke.tenantId)&&void 0!==pe?pe:null}static parseLink(f){const g=function Aa(y){const f=(0,V.zd)((0,V.pd)(y)).link,g=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,b=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(b?(0,V.zd)((0,V.pd)(b)).link:null)||b||g||f||y}(f);try{return new Js(g)}catch(b){return null}}}let Dl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Xo._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const M=Js.parseLink(b);return ae(M,"argument-error"),Xo._fromEmailAndCode(g,M.code,M.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class qr extends Ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Io extends qr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ae("providerId"in g&&"signInMethod"in g,"argument-error"),Xi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ae(f.idToken||f.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Io.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Io.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:F,nonce:ee,providerId:pe}=f;if(!b&&!M&&!g&&!F||!pe)return null;try{return new Io(pe)._credential({idToken:g,accessToken:b,nonce:ee,pendingToken:F})}catch(Ke){return null}}}let Xs=(()=>{class y extends qr{constructor(){super("facebook.com")}static credential(g){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Do=(()=>{class y extends qr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:M}=g;if(!b&&!M)return null;try{return y.credential(b,M)}catch(F){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),gu=(()=>{class y extends qr{constructor(){super("github.com")}static credential(g){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class To extends Ft{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Gn(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Gn(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Gn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:M,pendingToken:F}=g;return b&&M&&F&&b===M?new To(b,F):null}static _create(f,g){return new To(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends Ss{constructor(f){ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return si.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return si.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=To.fromJSON(f);return ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return To._create(b,g)}catch(M){return null}}}let es=(()=>{class y extends qr{constructor(){super("twitter.com")}static credential(g,b){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=g;if(!b||!M)return null;try{return y.credential(b,M)}catch(F){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function xa(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signUp",an(y,f))})).apply(this,arguments)}class gr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,M=!1){return(0,m.Z)(function*(){const F=yield W._fromIdTokenResponse(f,b,M),ee=ac(b);return new gr({user:F,providerId:ee,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const M=ac(b);return new gr({user:f,providerId:M,_tokenResponse:b,operationType:g})})()}}function ac(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function mu(){return(mu=(0,m.Z)(function*(y){var f;const g=$e(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new gr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield xa(g,{returnSecureToken:!0}),M=yield gr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ra extends V.ZR{constructor(f,g,b,M){var F;super(g.code,g.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Ra.prototype),this.customData={appName:f.name,tenantId:null!==(F=f.tenantId)&&void 0!==F?F:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,M){return new Ra(f,g,b,M)}}function Pa(y,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Ra._fromErrorAndOperation(y,F,f,b):F})}function ts(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function ka(){return(ka=(0,m.Z)(function*(y,f){const g=(0,V.m9)(y);yield xs(!0,g,f);const{providerUserInfo:b}=yield dn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),M=ts(b||[]);return g.providerData=g.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function vn(y,f){return So.apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(y,f,g=!1){const b=yield jn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return gr._forOperation(y,"link",b)})).apply(this,arguments)}function xs(y,f,g){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(y,f,g){yield Jn(f);const M=!1===y?"provider-already-linked":"no-such-provider";ae(ts(f.providerData).has(g)===y,f.auth,M)})).apply(this,arguments)}function _u(y,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(y,f,g=!1){const{auth:b}=y,M="reauthenticate";try{const F=yield jn(y,Pa(b,M,f,y),g);ae(F.idToken,b,"internal-error");const ee=Qe(F.idToken);ae(ee,b,"internal-error");const{sub:pe}=ee;return ae(y.uid===pe,b,"user-mismatch"),gr._forOperation(y,M,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Pe(b,"user-mismatch"),F}})).apply(this,arguments)}function to(y,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(y,f,g=!1){const b="signIn",M=yield Pa(y,b,f),F=yield gr._fromIdTokenResponse(y,b,M);return g||(yield y._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Nn(y,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(y,f){return to($e(y),f)})).apply(this,arguments)}function zr(y,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,m.Z)(function*(y,f){const g=(0,V.m9)(y);return yield xs(!1,g,f.providerId),vn(g,f)})).apply(this,arguments)}function Rs(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,m.Z)(function*(y,f){return _u((0,V.m9)(y),f)})).apply(this,arguments)}function Na(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(y,f){return cr(y,"POST","/v1/accounts:signInWithCustomToken",an(y,f))})).apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(y,f){const g=$e(y),b=yield Na(g,{token:f,returnSecureToken:!0}),M=yield gr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class yt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Oa._fromServerResponse(f,g):Pe(f,"internal-error")}}class Oa extends yt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Oa(g)}}function Ns(y,f,g){var b;ae((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ae(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ae(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function La(){return(La=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y),M={requestType:"PASSWORD_RESET",email:f};g&&Ns(b,M,g),yield Ta(b,M)})).apply(this,arguments)}function no(){return(no=(0,m.Z)(function*(y,f,g){yield Un((0,V.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Re(){return(Re=(0,m.Z)(function*(y,f){yield Cs((0,V.m9)(y),{oobCode:f})})).apply(this,arguments)}function Gt(y,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,m.Z)(function*(y,f){const g=(0,V.m9)(y),b=yield Un(g,{oobCode:f}),M=b.requestType;switch(ae(M,g,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(b.mfaInfo,g,"internal-error");default:ae(b.email,g,"internal-error")}let F=null;return b.mfaInfo&&(F=yt._fromServerResponse($e(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function ro(){return(ro=(0,m.Z)(function*(y,f){const{data:g}=yield Gt((0,V.m9)(y),f);return g.email})).apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(y,f,g){const b=$e(y),M=yield xa(b,{returnSecureToken:!0,email:f,password:g}),F=yield gr._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(F.user),F})).apply(this,arguments)}function yu(){return(yu=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y),M={requestType:"EMAIL_SIGNIN",email:f};ae(g.handleCodeInApp,b,"argument-error"),g&&Ns(b,M,g),yield mi(b,M)})).apply(this,arguments)}function Os(){return(Os=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y),M=Dl.credentialWithLink(f,g||Dt());return ae(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Nn(b,M)})).apply(this,arguments)}function _r(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:createAuthUri",an(y,f))})).apply(this,arguments)}function rs(){return(rs=(0,m.Z)(function*(y,f){const b={identifier:f,continueUri:on()?Dt():"http://localhost"},{signinMethods:M}=yield _r((0,V.m9)(y),b);return M||[]})).apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(y,f){const g=(0,V.m9)(y),M={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ns(g.auth,M,f);const{email:F}=yield Or(g.auth,M);F!==y.email&&(yield y.reload())})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ns(b.auth,F,g);const{email:ee}=yield du(b.auth,F);ee!==y.email&&(yield y.reload())})).apply(this,arguments)}function Rl(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,m.Z)(function*(y,f){return $t(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function na(){return(na=(0,m.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,V.m9)(y),F={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},ee=yield jn(b,Rl(b.auth,F));b.displayName=ee.displayName||null,b.photoURL=ee.photoUrl||null;const pe=b.providerData.find(({providerId:Ke})=>"password"===Ke);pe&&(pe.displayName=b.displayName,pe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ee)})).apply(this,arguments)}function ra(y,f,g){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(y,f,g){const{auth:b}=y,F={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(F.email=f),g&&(F.password=g);const ee=yield jn(y,Lt(b,F));yield y._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class so{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class ia extends so{constructor(f,g,b,M){super(f,g,b),this.username=M}}class wu extends so{constructor(f,g){super(f,"facebook.com",g)}}class oo extends ia{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Fs extends so{constructor(f,g){super(f,"google.com",g)}}class kl extends ia{constructor(f,g,b){super(f,"twitter.com",g,b)}}function yr(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function vu(y){var f,g;if(!y)return null;const{providerId:b}=y,M=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},F=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const ee=null===(g=null===(f=Qe(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(ee)return new so(F,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!b)return null;switch(b){case"facebook.com":return new wu(F,M);case"github.com":return new oo(F,M);case"google.com":return new Fs(F,M);case"twitter.com":return new kl(F,M,y.screenName||null);case"custom":case"anonymous":return new so(F,null);default:return new so(F,b,M)}}(g)}class is{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new is("enroll",f)}static _fromMfaPendingCredential(f){return new is("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return is._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return is._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Mo{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=$e(f),M=g.customData._serverResponse,F=(M.mfaInfo||[]).map(pe=>yt._fromServerResponse(b,pe));ae(M.mfaPendingCredential,b,"internal-error");const ee=is._fromMfaPendingCredential(M.mfaPendingCredential);return new Mo(ee,F,function(){var pe=(0,m.Z)(function*(Ke){const st=yield Ke._process(b,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const St=Object.assign(Object.assign({},M),{idToken:st.idToken,refreshToken:st.refreshToken});switch(g.operationType){case"signIn":const _t=yield gr._fromIdTokenResponse(b,g.operationType,St);return yield b._updateCurrentUser(_t.user),_t;case"reauthenticate":return ae(g.user,b,"internal-error"),gr._forOperation(g.user,g.operationType,St);default:Pe(b,"internal-error")}});return function(Ke){return pe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function qn(y,f){return $t(y,"POST","/v2/accounts/mfaEnrollment:start",an(y,f))}class _i{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>yt._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new _i(f)}getSession(){var f=this;return(0,m.Z)(function*(){return is._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,m.Z)(function*(){const M=f,F=yield b.getSession(),ee=yield jn(b.user,M._process(b.user.auth,F,g));return yield b.user._updateTokensIfNecessary(ee),b.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const b="string"==typeof f?f:f.uid,M=yield g.user.getIdToken(),F=yield jn(g.user,function gd(y,f){return $t(y,"POST","/v2/accounts/mfaEnrollment:withdraw",an(y,f))}(g.user.auth,{idToken:M,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:ee})=>ee!==b),yield g.user._updateTokensIfNecessary(F);try{yield g.user.reload()}catch(ee){if("auth/user-token-expired"!==ee.code)throw ee}})()}}const yi=new WeakMap,Ol="__sak";class ao{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tn=(()=>{class y extends ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cu(){const y=(0,V.z$)();return rn(y)||$n(y)}()&&function mt(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Qi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),F=this.localCache[b];M!==F&&g(b,F,M)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((pe,Ke,st)=>{this.notifyListeners(pe,st)});const M=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(M);if(g.newValue!==pe)null!==g.newValue?this.storage.setItem(M,g.newValue):this.storage.removeItem(M);else if(this.localCache[M]===g.newValue&&!b)return}const F=()=>{const pe=this.storage.getItem(M);!b&&this.localCache[M]===pe||this.notifyListeners(M,pe)},ee=this.storage.getItem(M);!function Zo(){return(0,V.w1)()&&10===document.documentMode}()||ee===g.newValue||g.newValue===g.oldValue?F():setTimeout(F,10)}notifyListeners(g,b){this.localCache[g]=b;const M=this.listeners[g];if(M)for(const F of Array.from(M))F(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var M=()=>super._set,F=this;return(0,m.Z)(function*(){yield M().call(F,g,b),F.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,M=this;return(0,m.Z)(function*(){const F=yield b().call(M,g);return M.localCache[g]=JSON.stringify(F),F})()}_remove(g){var b=()=>super._remove,M=this;return(0,m.Z)(function*(){yield b().call(M,g),delete M.localCache[g]})()}}return y.type="LOCAL",y})(),D=(()=>{class y extends ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let H=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(F=>F.isListeningto(g));if(b)return b;const M=new y(g);return this.receivers.push(M),M}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,m.Z)(function*(){const M=g,{eventId:F,eventType:ee,data:pe}=M.data,Ke=b.handlersMap[ee];if(!(null==Ke?void 0:Ke.size))return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:ee});const st=Array.from(Ke).map(function(){var _t=(0,m.Z)(function*(Zn){return Zn(M.origin,pe)});return function(Zn){return _t.apply(this,arguments)}}()),St=yield function P(y){return Promise.all(y.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(st);M.ports[0].postMessage({status:"done",eventId:F,eventType:ee,response:St})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function xe(y="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return y+g}class ht{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var M=this;return(0,m.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ee,pe;return new Promise((Ke,st)=>{const St=xe("",20);F.port1.start();const _t=setTimeout(()=>{st(new Error("unsupported_event"))},b);pe={messageChannel:F,onMessage(Zn){const qs=Zn;if(qs.data.eventId===St)switch(qs.data.status){case"ack":clearTimeout(_t),ee=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ke(qs.data.response);break;default:clearTimeout(_t),clearTimeout(ee),st(new Error("invalid_response"))}}},M.handlers.add(pe),F.port1.addEventListener("message",pe.onMessage),M.target.postMessage({eventType:f,eventId:St,data:g},[F.port2])}).finally(()=>{pe&&M.removeMessageHandler(pe)})})()}}function xt(){return window}function En(){return void 0!==xt().WorkerGlobalScope&&"function"==typeof xt().importScripts}function Sr(){return(Sr=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const cc="firebaseLocalStorageDb",sa="firebaseLocalStorage",Fn="fbase_key";class lo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Wa(y,f){return y.transaction([sa],f?"readwrite":"readonly").objectStore(sa)}function Po(){const y=indexedDB.open(cc,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(sa,{keyPath:Fn})}catch(M){g(M)}}),y.addEventListener("success",(0,m.Z)(function*(){const b=y.result;b.objectStoreNames.contains(sa)?f(b):(b.close(),yield function ki(){const y=indexedDB.deleteDatabase(cc);return new lo(y).toPromise()}(),f(yield Po()))}))})}function Fl(y,f,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(y,f,g){const b=Wa(y,!0).put({[Fn]:f,value:g});return new lo(b).toPromise()})).apply(this,arguments)}function ko(){return(ko=(0,m.Z)(function*(y,f){const g=Wa(y,!1).get(f),b=yield new lo(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Us(y,f){const g=Wa(y,!0).delete(f);return new lo(g).toPromise()}const os=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Po()),g.db})()}_withRetries(g){var b=this;return(0,m.Z)(function*(){let M=0;for(;;)try{const F=yield b._openDb();return yield g(F)}catch(F){if(M++>3)throw F;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return En()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=H._getInstance(function _d(){return En()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,m.Z)(function*(M,F){return{keyProcessed:(yield g._poll()).includes(F.key)}});return function(M,F){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,m.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var b,M;if(g.activeServiceWorker=yield function ss(){return Sr.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ht(g.activeServiceWorker);const F=yield g.sender._send("ping",{},800);!F||(null===(b=F[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,m.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Nt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Po();return yield Fl(g,Ol,"1"),yield Us(g,Ol),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,m.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var M=this;return(0,m.Z)(function*(){return M._withPendingWrite((0,m.Z)(function*(){return yield M._withRetries(F=>Fl(F,g,b)),M.localCache[g]=b,M.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,m.Z)(function*(){const M=yield b._withRetries(F=>function dc(y,f){return ko.apply(this,arguments)}(F,g));return b.localCache[g]=M,M})()}_remove(g){var b=this;return(0,m.Z)(function*(){return b._withPendingWrite((0,m.Z)(function*(){return yield b._withRetries(M=>Us(M,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const b=yield g._withRetries(ee=>{const pe=Wa(ee,!1).getAll();return new lo(pe).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:ee,value:pe}of b)F.add(ee),JSON.stringify(g.localCache[ee])!==JSON.stringify(pe)&&(g.notifyListeners(ee,pe),M.push(ee));for(const ee of Object.keys(g.localCache))g.localCache[ee]&&!F.has(ee)&&(g.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(g,b){this.localCache[g]=b;const M=this.listeners[g];if(M)for(const F of Array.from(M))F(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function za(y,f){return $t(y,"POST","/v2/accounts/mfaSignIn:start",an(y,f))}function as(){return(as=(0,m.Z)(function*(y){return(yield $t(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ln(y){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=M=>{const F=Te("internal-error");F.customData=M,g(F)},b.type="text/javascript",b.charset="UTF-8",function wd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function Ka(y){return`__${y}${Math.floor(1e6*Math.random())}`}const xr=1e12;class uo{constructor(f){this.auth=f,this.counter=xr,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Bs(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||xr;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||xr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var b;return null===(b=g._widgets.get(f||xr))||void 0===b||b.execute(),""})()}}class Bs{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof f?document.getElementById(f):f;ae(M,"argument-error",{appName:g}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const No=Ka("rcb"),bd=new tn(3e4,6e4);class pg{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!xt().grecaptcha}load(f,g=""){return ae(function gg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(xt().grecaptcha):new Promise((b,M)=>{const F=xt().setTimeout(()=>{M(Te(f,"network-request-failed"))},bd.get());xt()[No]=()=>{xt().clearTimeout(F),delete xt()[No];const pe=xt().grecaptcha;if(!pe)return void M(Te(f,"internal-error"));const Ke=pe.render;pe.render=(st,St)=>{const _t=Ke(st,St);return this.counter++,_t},this.hostLanguage=g,b(pe)},Ln(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:No,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(F),M(Te(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!xt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mg{load(f){return(0,m.Z)(function*(){return new uo(f)})()}clearedOneInstance(){}}const Oo="recaptcha",vi={theme:"light",type:"image"};class _g{constructor(f,g=Object.assign({},vi),b){this.parameters=g,this.type=Oo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$e(b),this.isInvisible="invisible"===this.parameters.size,ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof f?document.getElementById(f):f;ae(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mg:new pg,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(F=>{const ee=pe=>{!pe||(f.tokenChangeListeners.delete(ee),F(pe))};f.tokenChangeListeners.add(ee),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=xt()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){ae(on()&&!En(),f.auth,"internal-error"),yield function Fo(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ar(y){return as.apply(this,arguments)}(f.auth);ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class co{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Co._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Bn(){return(Bn=(0,m.Z)(function*(y,f,g){const b=$e(y),M=yield Fr(b,f,(0,V.m9)(g));return new co(M,F=>Nn(b,F))})).apply(this,arguments)}function Ya(){return(Ya=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y);yield xs(!1,b,"phone");const M=yield Fr(b.auth,f,(0,V.m9)(g));return new co(M,F=>zr(b,F))})).apply(this,arguments)}function pc(){return(pc=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y),M=yield Fr(b.auth,f,(0,V.m9)(g));return new co(M,F=>Rs(b,F))})).apply(this,arguments)}function Fr(y,f,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,m.Z)(function*(y,f,g){var b;const M=yield g.verify();try{let F;if(ae("string"==typeof M,y,"argument-error"),ae(g.type===Oo,y,"argument-error"),F="string"==typeof f?{phoneNumber:f}:f,"session"in F){const ee=F.session;if("phoneNumber"in F)return ae("enroll"===ee.type,y,"internal-error"),(yield qn(y,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ae("signin"===ee.type,y,"internal-error");const pe=(null===(b=F.multiFactorHint)||void 0===b?void 0:b.uid)||F.multiFactorUid;return ae(pe,y,"missing-multi-factor-info"),(yield za(y,{mfaPendingCredential:ee.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield hd(y,{phoneNumber:F.phoneNumber,recaptchaToken:M});return ee}}finally{g._reset()}})).apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(y,f){yield vn((0,V.m9)(y),f)})).apply(this,arguments)}let us=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=$e(g)}verifyPhoneNumber(g,b){return Fr(this.auth,g,(0,V.m9)(b))}static credential(g,b){return Co._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:M}=g;return b&&M?Co._fromTokenResponse(b,M):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function js(y,f){return f?re(f):(ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Vl extends Ft{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Gn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Gn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Gn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function mc(y){return to(y.auth,new Vl(y),y.bypassAuthState)}function _c(y){const{auth:f,user:g}=y;return ae(g,f,"internal-error"),_u(g,new Vl(y),y.bypassAuthState)}function Yt(y){return yc.apply(this,arguments)}function yc(){return(yc=(0,m.Z)(function*(y){const{auth:f,user:g}=y;return ae(g,f,"internal-error"),vn(g,new Vl(y),y.bypassAuthState)})).apply(this,arguments)}class vr{constructor(f,g,b,M,F=!1){this.auth=f,this.resolver=b,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(b,M){f.pendingPromise={resolve:b,reject:M};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(F){f.reject(F)}});return function(b,M){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:F,tenantId:ee,error:pe,type:Ke}=f;if(pe)return void g.reject(pe);const st={auth:g.auth,requestUri:b,sessionId:M,tenantId:ee||void 0,postBody:F||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ke)(st))}catch(St){g.reject(St)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return mc;case"linkViaPopup":case"linkViaRedirect":return Yt;case"reauthViaPopup":case"reauthViaRedirect":return _c;default:Pe(this.auth,"internal-error")}}resolve(f){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vc=new tn(2e3,1e4);function Ed(){return(Ed=(0,m.Z)(function*(y,f,g){const b=$e(y);Ye(y,f,Ss);const M=js(b,g);return new $s(b,"signInViaPopup",f,M).executeNotNull()})).apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y);Ye(b.auth,f,Ss);const M=js(b.auth,g);return new $s(b.auth,"reauthViaPopup",f,M,b).executeNotNull()})).apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y);Ye(b.auth,f,Ss);const M=js(b.auth,g);return new $s(b.auth,"linkViaPopup",f,M,b).executeNotNull()})).apply(this,arguments)}let $s=(()=>{class y extends vr{constructor(g,b,M,F,ee){super(g,b,F,ee),this.provider=M,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const b=yield g.execute();return ae(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,m.Z)(function*(){ue(1===g.filter.length,"Popup operations only handle one event");const b=xe();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(M=>{g.reject(M)}),g.resolver._isIframeWebStorageSupported(g.auth,M=>{M||g.reject(Te(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,M;this.pollId=(null===(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,vc.get())};g()}}return y.currentPopupAction=null,y})();const Gs=new Map;class nr extends vr{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let b=Gs.get(g.auth._key());if(!b){try{const F=(yield function Oi(y,f){return wc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(F)}catch(M){b=()=>Promise.reject(M)}Gs.set(g.auth._key(),b)}return g.bypassAuthState||Gs.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const M=yield b.auth._redirectUserForId(f.eventId);if(M)return b.user=M,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function wc(){return(wc=(0,m.Z)(function*(y,f){const g=S(f),b=T(y);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(g));return yield b._remove(g),M})).apply(this,arguments)}function la(y,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,m.Z)(function*(y,f){return T(y)._set(S(f),"true")})).apply(this,arguments)}function T(y){return re(y._redirectPersistence)}function S(y){return _e("pendingRedirect",y.config.apiKey,y.name)}function ne(){return(ne=(0,m.Z)(function*(y,f,g){const b=$e(y);Ye(y,f,Ss);const M=js(b,g);return yield la(M,b),M._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y);Ye(b.auth,f,Ss);const M=js(b.auth,g);yield la(M,b.auth);const F=yield ua(b);return M._openRedirect(b.auth,f,"reauthViaRedirect",F)})).apply(this,arguments)}function qt(){return(qt=(0,m.Z)(function*(y,f,g){const b=(0,V.m9)(y);Ye(b.auth,f,Ss);const M=js(b.auth,g);yield xs(!1,b,f.providerId),yield la(M,b.auth);const F=yield ua(b);return M._openRedirect(b.auth,f,"linkViaRedirect",F)})).apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(y,f){return yield $e(y)._initializationPromise,Kn(y,f,!1)})).apply(this,arguments)}function Kn(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,m.Z)(function*(y,f,g=!1){const b=$e(y),M=js(b,f),ee=yield new nr(b,M,g).execute();return ee&&!g&&(delete ee.user._redirectEventId,yield b._persistUserIfCurrent(ee.user),yield b._setRedirectUser(null,f)),ee})).apply(this,arguments)}function ua(y){return ai.apply(this,arguments)}function ai(){return(ai=(0,m.Z)(function*(y){const f=xe(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class cs{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function bc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Id(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Id(f)){const M=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Te(this.auth,M))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ca(f))}saveEventToCache(f){this.cachedEventUids.add(ca(f)),this.lastProcessedEventTime=Date.now()}}function ca(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Id({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ec(y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,m.Z)(function*(y,f={}){return $t(y,"GET","/v1/projects",f)})).apply(this,arguments)}const vg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uy=/^https?/;function fo(){return(fo=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ec(y);for(const g of f)try{if(Cc(g))return}catch(b){}Pe(y,"unauthorized-domain")})).apply(this,arguments)}function Cc(y){const f=Dt(),{protocol:g,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const ee=new URL(y);return""===ee.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&ee.hostname===b}if(!uy.test(g))return!1;if(vg.test(y))return b===y;const M=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const dy=new tn(3e4,6e4);function hy(){const y=xt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Dd=null;function fy(y){return Dd=Dd||function wg(y){return new Promise((f,g)=>{var b,M,F;function ee(){hy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{hy(),g(Te(y,"network-request-failed"))},timeout:dy.get()})}if(null===(M=null===(b=xt().gapi)||void 0===b?void 0:b.iframes)||void 0===M?void 0:M.Iframe)f(gapi.iframes.getContext());else{if(!(null===(F=xt().gapi)||void 0===F?void 0:F.load)){const pe=Ka("iframefcb");return xt()[pe]=()=>{gapi.load?ee():g(Te(y,"network-request-failed"))},Ln(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Ke=>g(Ke))}ee()}}).catch(f=>{throw Dd=null,f})}(y),Dd}const Xh=new tn(5e3,15e3),ha={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Td=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bl(y){const f=y.config;ae(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?fn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:ce.SDK_VERSION},M=Td.get(y.config.apiHost);M&&(b.eid=M);const F=y._getFrameworks();return F.length&&(b.fw=F.join(",")),`${g}?${(0,V.xO)(b).slice(1)}`}function Xa(){return Xa=(0,m.Z)(function*(y){const f=yield fy(y),g=xt().gapi;return ae(g,y,"internal-error"),f.open({where:document.body,url:Bl(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ha,dontclear:!0},b=>new Promise(function(){var M=(0,m.Z)(function*(F,ee){yield b.restyle({setHideOnLeave:!1});const pe=Te(y,"network-request-failed"),Ke=xt().setTimeout(()=>{ee(pe)},Xh.get());function st(){xt().clearTimeout(Ke),F(b)}b.ping(st).then(st,()=>{ee(pe)})});return function(F,ee){return M.apply(this,arguments)}}()))}),Xa.apply(this,arguments)}const gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function rf(y,f,g,b,M,F){ae(y.config.authDomain,y,"auth-domain-config-required"),ae(y.config.apiKey,y,"invalid-api-key");const ee={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:ce.SDK_VERSION,eventId:M};if(f instanceof Ss){f.setDefaultLanguage(y.languageCode),ee.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(ee.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ke,st]of Object.entries(F||{}))ee[Ke]=st}if(f instanceof qr){const Ke=f.getScopes().filter(st=>""!==st);Ke.length>0&&(ee.scopes=Ke.join(","))}y.tenantId&&(ee.tid=y.tenantId);const pe=ee;for(const Ke of Object.keys(pe))void 0===pe[Ke]&&delete pe[Ke];return`${function _y({config:y}){return y.emulator?fn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,V.xO)(pe).slice(1)}`}const Vo="webStorageSupport";class sf extends class bg{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return X("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new sf(f)}_finalizeEnroll(f,g,b){return function bu(y,f){return $t(y,"POST","/v2/accounts/mfaEnrollment:finalize",an(y,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Ll(y,f){return $t(y,"POST","/v2/accounts/mfaSignIn:finalize",an(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yy=(()=>{class y{constructor(){}static assertion(g){return sf._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var vy="@firebase/auth",af="0.19.11";class Eg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var M;f((null===(M=b)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uo(){return window}function Mu(){return(Mu=(0,m.Z)(function*(y,f,g){var b;const{BuildInfo:M}=Uo();ue(f.sessionId,"AuthEvent did not contain a session ID");const F=yield jl(f.sessionId),ee={};return $n()?ee.ibi=M.packageName:kn()?ee.apn=M.packageName:Pe(y,"operation-not-supported-in-this-environment"),M.displayName&&(ee.appDisplayName=M.displayName),ee.sessionId=F,rf(y,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,ee)})).apply(this,arguments)}function ds(){return(ds=(0,m.Z)(function*(y){const{BuildInfo:f}=Uo(),g={};$n()?g.iosBundleId=f.packageName:kn()?g.androidPackageName=f.packageName:Pe(y,"operation-not-supported-in-this-environment"),yield Ec(y,g)})).apply(this,arguments)}function Rd(){return(Rd=(0,m.Z)(function*(y,f,g){const{cordova:b}=Uo();let M=()=>{};try{yield new Promise((F,ee)=>{let pe=null;function Ke(){var _t;F();const Zn=null===(_t=b.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Zn&&Zn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function st(){pe||(pe=window.setTimeout(()=>{ee(Te(y,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===(null==document?void 0:document.visibilityState)&&st()}f.addPassiveListener(Ke),document.addEventListener("resume",st,!1),kn()&&document.addEventListener("visibilitychange",St,!1),M=()=>{f.removePassiveListener(Ke),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",St,!1),pe&&window.clearTimeout(pe)}})}finally{M()}})).apply(this,arguments)}function jl(y){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,m.Z)(function*(y){const f=Ru(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ru(y){if(ue(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}!function by(y){(0,ce._registerComponent)(new de.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),M=f.getProvider("heartbeat"),{apiKey:F,authDomain:ee}=b.options;return((pe,Ke)=>{ae(F&&!F.includes(":"),"invalid-api-key",{appName:pe.name}),ae(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:pe.name});const st={apiKey:F,authDomain:ee,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yo(y)},St=new ri(pe,Ke,st);return function fe(y,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(re);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(St,g),St})(b,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new de.wA("auth-internal",f=>{const g=$e(f.getProvider("auth").getImmediate());return new Eg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(vy,af,function wy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(vy,af,"esm2017")}("Browser");class df extends cs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function Tc(y){return tl.apply(this,arguments)}function tl(){return(tl=(0,m.Z)(function*(y){const f=yield Ac()._get(ff(y));return f&&(yield Ac()._remove(ff(y))),f})).apply(this,arguments)}function Sc(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function Ac(){return re(Tn)}function ff(y){return _e("authEvent",y.config.apiKey,y.name)}function kd(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,V.zd)(g.join("?"))}function _f(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Nd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Tg(y=(0,V.z$)()){return!("file:"!==Nd()&&"ionic:"!==Nd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jr(){try{const y=self.localStorage,f=xe();if(y)return y.setItem(f,"1"),y.removeItem(f),!function nl(y=(0,V.z$)()){return function Ty(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sy(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch(y){return fa()&&(0,V.hl)()}return!1}function fa(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rc(){return(function Dy(){return"http:"===Nd()||"https:"===Nd()}()||(0,V.ru)()||Tg())&&!function Od(){return(0,V.b$)()||(0,V.UG)()}()&&Jr()&&!fa()}function yf(){return Tg()&&"undefined"!=typeof document}function Hl(){return(Hl=(0,m.Z)(function*(){return!!yf()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const hs={LOCAL:"local",NONE:"none",SESSION:"session"},$l=ae,wf="persistence";function Gl(y){return bf.apply(this,arguments)}function bf(){return(bf=(0,m.Z)(function*(y){yield y._initializationPromise;const f=Pc(),g=_e(wf,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Pc(){var y;try{return(null===(y=function vf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Ay=ae;class Li{constructor(){this.browserResolver=re(class el{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D,this._completeRedirectFn=Kn}_openPopup(f,g,b,M){var F=this;return(0,m.Z)(function*(){var ee;ue(null===(ee=F.eventManagers[f._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const pe=rf(f,g,b,Dt(),M);return function Md(y,f,g,b=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-b)/2,0).toString();let pe="";const Ke=Object.assign(Object.assign({},gy),{width:b.toString(),height:M.toString(),top:F,left:ee}),st=(0,V.z$)().toLowerCase();g&&(pe=Hn(st)?"_blank":g),Ct(st)&&(f=f||"http://localhost",Ke.scrollbars="yes");const St=Object.entries(Ke).reduce((Zn,[qs,Nc])=>`${Zn}${qs}=${Nc},`,"");if(function Da(y=(0,V.z$)()){var f;return $n(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(st)&&"_self"!==pe)return function nf(y,f){const g=document.createElement("a");g.href=y,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",pe),new xd(null);const _t=window.open(f||"",pe,St);ae(_t,y,"popup-blocked");try{_t.focus()}catch(Zn){}return new xd(_t)}(f,pe,xe())})()}_openRedirect(f,g,b,M){var F=this;return(0,m.Z)(function*(){return yield F._originValidation(f),function Qr(y){xt().location.href=y}(rf(f,g,b,Dt(),M)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:M,promise:F}=this.eventManagers[g];return M?Promise.resolve(M):(ue(F,"If manager is not set, promise should be"),F)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const b=yield function py(y){return Xa.apply(this,arguments)}(f),M=new cs(f);return b.register("authEvent",F=>(ae(null==F?void 0:F.authEvent,f,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:M},g.iframes[f._key()]=b,M})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Vo,{type:Vo},M=>{var F;const ee=null===(F=null==M?void 0:M[0])||void 0===F?void 0:F[Vo];void 0!==ee&&g(!!ee),Pe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function cy(y){return fo.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Qi()||rn()||$n()}}),this.cordovaResolver=re(class mf{constructor(){this._redirectPersistence=D,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Kn}_initialize(f){var g=this;return(0,m.Z)(function*(){const b=f._key();let M=g.eventManagers.get(b);return M||(M=new df(f),g.eventManagers.set(b,M),g.attachCallbackListeners(f,M)),M})()}_openPopup(f){Pe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,M){var F=this;return(0,m.Z)(function*(){!function Pd(y){var f,g,b,M,F,ee,pe,Ke,st,St;const _t=Uo();ae("function"==typeof(null===(f=null==_t?void 0:_t.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(void 0!==(null===(g=null==_t?void 0:_t.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(F=null===(M=null===(b=null==_t?void 0:_t.cordova)||void 0===b?void 0:b.plugins)||void 0===M?void 0:M.browsertab)||void 0===F?void 0:F.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Ke=null===(pe=null===(ee=null==_t?void 0:_t.cordova)||void 0===ee?void 0:ee.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===Ke?void 0:Ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(St=null===(st=null==_t?void 0:_t.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===St?void 0:St.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const ee=yield F._initialize(f);yield ee.initialized(),ee.resetRedirect(),function Su(){Gs.clear()}(),yield F._originValidation(f);const pe=function hf(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Sc(),postBody:null,tenantId:y.tenantId,error:Te(y,"no-auth-event")}}(f,b,M);yield function Ib(y,f){return Ac()._set(ff(y),f)}(f,pe);const Ke=yield function lf(y,f,g){return Mu.apply(this,arguments)}(f,pe,g),st=yield function Dc(y){const{cordova:f}=Uo();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let M=null;b?f.plugins.browsertab.openUrl(y):M=f.InAppBrowser.open(y,function Qs(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(M)})})}(Ke);return function Cg(y,f,g){return Rd.apply(this,arguments)}(f,ee,st)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uf(y){return ds.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:M,BuildInfo:F}=Uo(),ee=setTimeout((0,m.Z)(function*(){yield Tc(f),g.onEvent(_f())}),500),pe=function(){var St=(0,m.Z)(function*(_t){clearTimeout(ee);const Zn=yield Tc(f);let qs=null;Zn&&(null==_t?void 0:_t.url)&&(qs=function Cy(y,f){var g,b;const M=function xc(y){const f=kd(y),g=f.link?decodeURIComponent(f.link):void 0,b=kd(g).link,M=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return kd(M).link||M||b||g||y}(f);if(M.includes("/__/auth/callback")){const F=kd(M),ee=F.firebaseError?function pf(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(F.firebaseError)):null,pe=null===(b=null===(g=null==ee?void 0:ee.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],Ke=pe?Te(pe):null;return Ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:M,postBody:null}}return null}(Zn,_t.url)),g.onEvent(qs||_f())});return function(Zn){return St.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,pe);const Ke=M,st=`${F.packageName.toLowerCase()}://`;Uo().handleOpenURL=function(){var St=(0,m.Z)(function*(_t){if(_t.toLowerCase().startsWith(st)&&pe({url:_t}),"function"==typeof Ke)try{Ke(_t)}catch(Zn){console.error(Zn)}});return function(_t){return St.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=D,this._completeRedirectFn=Kn}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,M){var F=this;return(0,m.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(f,g,b,M)})()}_openRedirect(f,g,b,M){var F=this;return(0,m.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(f,g,b,M)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return yf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ay(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function li(){return Hl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function xg(y){return y.unwrap()}function ql(y){return Mg(y)}function Mg(y){const{_tokenResponse:f}=y instanceof V.ZR?y.customData:y;if(!f)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return us.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Do;break;case"facebook.com":b=Xs;break;case"github.com":b=gu;break;case"twitter.com":b=es;break;default:const{oauthIdToken:M,oauthAccessToken:F,oauthTokenSecret:ee,pendingToken:pe,nonce:Ke}=f;return F||ee||M||pe?pe?g.startsWith("saml.")?To._create(g,pe):Xi._fromParams({providerId:g,signInMethod:g,pendingToken:pe,idToken:M,accessToken:F}):new Io(g).credential({idToken:M,accessToken:F,rawNonce:Ke}):null}return y instanceof V.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function Xr(y,f){return f.catch(g=>{throw g instanceof V.ZR&&function My(y,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Ry(y,function Ro(y,f){var g;const b=(0,V.m9)(y),M=f;return ae(f.customData.operationType,b,"argument-error"),ae(null===(g=M.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Mo._fromError(b,M)}(y,f));else if(b){const M=Mg(f),F=f;M&&(F.credential=M,F.tenantId=b.tenantId||void 0,F.email=b.email||void 0,F.phoneNumber=b.phoneNumber||void 0)}}(y,g),g}).then(g=>{const M=g.user;return{operationType:g.operationType,credential:ql(g),additionalUserInfo:yr(g),user:pa.getOrCreate(M)}})}function Ef(y,f){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,m.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>Xr(y,g.confirm(b))}})).apply(this,arguments)}class Ry{constructor(f,g){this.resolver=g,this.auth=function xy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Xr(xg(this.auth),this.resolver.resolveSignIn(f))}}class pa{constructor(f){this._delegate=f,this.multiFactor=function Eu(y){const f=(0,V.m9)(y);return yi.has(f)||yi.set(f,_i._fromUser(f)),yi.get(f)}(f)}static getOrCreate(f){return pa.USER_MAP.has(f)||pa.USER_MAP.set(f,new pa(f)),pa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Xr(g.auth,zr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,m.Z)(function*(){return Ef(b.auth,function fc(y,f,g){return Ya.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Xr(g.auth,function Hs(y,f,g){return Tu.apply(this,arguments)}(g._delegate,f,Li))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield Gl($e(g.auth)),function it(y,f,g){return function Pt(y,f,g){return qt.apply(this,arguments)}(y,f,g)}(g._delegate,f,Li)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Xr(g.auth,Rs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Ef(this.auth,function yg(y,f,g){return pc.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Xr(this.auth,function aa(y,f,g){return Du.apply(this,arguments)}(this._delegate,f,Li))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield Gl($e(g.auth)),function le(y,f,g){return function Le(y,f,g){return Ve.apply(this,arguments)}(y,f,g)}(g._delegate,f,Li)})()}sendEmailVerification(f){return function Yr(y,f){return ja.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function eo(y,f){return ka.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Ga(y,f){return ra((0,V.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Pl(y,f){return ra((0,V.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function gc(y,f){return ho.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ta(y,f){return na.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Ha(y,f,g){return $a.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pa.USER_MAP=new WeakMap;const kc=ae;let If=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=g.options;kc(M,"invalid-api-key",{appName:g.name}),kc(M,"invalid-api-key",{appName:g.name});const F="undefined"!=typeof window?Li:void 0;this._delegate=b.initialize({options:{persistence:Py(M,g.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function yn(y,f,g){const b=$e(y);ae(b._canInitEmulator,b,"emulator-config-failed"),ae(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const M=!!(null==g?void 0:g.disableWarnings),F=pr(f),{host:ee,port:pe}=function Ri(y){const f=pr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const F=M[1];return{host:F,port:An(b.substr(F.length+1))}}{const[F,ee]=b.split(":");return{host:F,port:An(ee)}}}(f);b.config.emulator={url:`${F}//${ee}${null===pe?"":`:${pe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ee,port:pe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function gi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function Tl(y,f){return Re.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Gt(this._delegate,g)}confirmPasswordReset(g,b){return function Va(y,f,g){return no.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var M=this;return(0,m.Z)(function*(){return Xr(M._delegate,function Ao(y,f,g){return Zr.apply(this,arguments)}(M._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ba(y,f){return rs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ml(y,f){const g=Js.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){kc(Rc(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function Ot(y,f){return rr.apply(this,arguments)}(g._delegate,Li);return b?Xr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Dg(y,f){$e(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,M){const{next:F,error:ee,complete:pe}=Df(g,b,M);return this._delegate.onAuthStateChanged(F,ee,pe)}onIdTokenChanged(g,b,M){const{next:F,error:ee,complete:pe}=Df(g,b,M);return this._delegate.onIdTokenChanged(F,ee,pe)}sendSignInLinkToEmail(g,b){return function xl(y,f,g){return yu.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function Fa(y,f,g){return La.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,m.Z)(function*(){let M;switch(function Sg(y,f){$l(Object.values(hs).includes(f),y,"invalid-persistence-type"),(0,V.b$)()?$l(f!==hs.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?$l(f===hs.NONE,y,"unsupported-persistence-type"):fa()?$l(f===hs.NONE||f===hs.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):$l(f===hs.NONE||Jr(),y,"unsupported-persistence-type")}(b._delegate,g),g){case hs.SESSION:M=D;break;case hs.LOCAL:M=(yield re(os)._isAvailable())?os:Tn;break;case hs.NONE:M=J;break;default:return Pe("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Xr(this._delegate,function Ma(y){return mu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Xr(this._delegate,Nn(this._delegate,g))}signInWithCustomToken(g){return Xr(this._delegate,function Ps(y,f){return ks.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return Xr(this._delegate,function Al(y,f,g){return Nn((0,V.m9)(y),Dl.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return Xr(this._delegate,function Ua(y,f,g){return Os.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return Ef(this._delegate,function Iu(y,f,g){return Bn.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,m.Z)(function*(){return kc(Rc(),b._delegate,"operation-not-supported-in-this-environment"),Xr(b._delegate,function Lo(y,f,g){return Ed.apply(this,arguments)}(b._delegate,g,Li))})()}signInWithRedirect(g){var b=this;return(0,m.Z)(function*(){return kc(Rc(),b._delegate,"operation-not-supported-in-this-environment"),yield Gl(b._delegate),function N(y,f,g){return function j(y,f,g){return ne.apply(this,arguments)}(y,f,g)}(b._delegate,g,Li)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function In(y,f){return ro.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=hs,y})();function Df(y,f,g){let b=y;"function"!=typeof y&&({next:b,error:f,complete:g}=y);const M=b;return{next:ee=>M(ee&&pa.getOrCreate(ee)),error:f,complete:g}}function Py(y,f){const g=function Ag(y,f){const g=Pc();if(!g)return[];const b=_e(wf,y,f);switch(g.getItem(b)){case hs.NONE:return[J];case hs.LOCAL:return[os,D];case hs.SESSION:return[D];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(os)&&g.push(os),"undefined"!=typeof window)for(const b of[Tn,D])g.includes(b)||g.push(b);return g.includes(J)||g.push(J),g}class Tf{constructor(){this.providerId="phone",this._delegate=new us(xg(te.Z.auth()))}static credential(f,g){return us.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Tf.PHONE_SIGN_IN_METHOD=us.PHONE_SIGN_IN_METHOD,Tf.PROVIDER_ID=us.PROVIDER_ID;const ky=ae;class Ny{constructor(f,g,b=te.Z.app()){var M;ky(null===(M=b.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new _g(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rg(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new If(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Dl,FacebookAuthProvider:Xs,GithubAuthProvider:gu,GoogleAuthProvider:Do,OAuthProvider:Io,SAMLAuthProvider:si,PhoneAuthProvider:Tf,PhoneMultiFactorGenerator:yy,RecaptchaVerifier:Ny,TwitterAuthProvider:es,Auth:If,AuthCredential:Ft,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(te.Z)},8306:(gt,Me,U)=>{"use strict";U.d(Me,{y:()=>z});var m=U(930),te=U(727),V=U(8822),ce=U(4671);var de=U(2416),me=U(576),ge=U(2806);let z=(()=>{class Oe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ve=new Oe;return ve.source=this,ve.operator=qe,ve}subscribe(qe,ve,Ae){const rt=function Je(Oe){return Oe&&Oe instanceof m.Lv||function ie(Oe){return Oe&&(0,me.m)(Oe.next)&&(0,me.m)(Oe.error)&&(0,me.m)(Oe.complete)}(Oe)&&(0,te.Nn)(Oe)}(qe)?qe:new m.Hp(qe,ve,Ae);return(0,ge.x)(()=>{const{operator:et,source:Pe}=this;rt.add(et?et.call(rt,Pe):Pe?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ve){qe.error(ve)}}forEach(qe,ve){return new(ve=K(ve))((Ae,rt)=>{const et=new m.Hp({next:Pe=>{try{qe(Pe)}catch(Te){rt(Te),et.unsubscribe()}},error:rt,complete:Ae});this.subscribe(et)})}_subscribe(qe){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(qe)}[V.L](){return this}pipe(...qe){return function we(Oe){return 0===Oe.length?ce.y:1===Oe.length?Oe[0]:function(qe){return Oe.reduce((ve,Ae)=>Ae(ve),qe)}}(qe)(this)}toPromise(qe){return new(qe=K(qe))((ve,Ae)=>{let rt;this.subscribe(et=>rt=et,et=>Ae(et),()=>ve(rt))})}}return Oe.create=He=>new Oe(He),Oe})();function K(Oe){var He;return null!==(He=null!=Oe?Oe:de.v.Promise)&&void 0!==He?He:Promise}},7579:(gt,Me,U)=>{"use strict";U.d(Me,{x:()=>de});var m=U(8306),te=U(727);const ce=(0,U(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=U(8737),we=U(2806);let de=(()=>{class ge extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(K){const ie=new me(this,this);return ie.operator=K,ie}_throwIfClosed(){if(this.closed)throw new ce}next(K){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(K)}})}error(K){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=K;const{observers:ie}=this;for(;ie.length;)ie.shift().error(K)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:K}=this;for(;K.length;)K.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var K;return(null===(K=this.observers)||void 0===K?void 0:K.length)>0}_trySubscribe(K){return this._throwIfClosed(),super._trySubscribe(K)}_subscribe(K){return this._throwIfClosed(),this._checkFinalizedStatuses(K),this._innerSubscribe(K)}_innerSubscribe(K){const{hasError:ie,isStopped:Je,observers:Oe}=this;return ie||Je?te.Lc:(this.currentObservers=null,Oe.push(K),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(Oe,K)}))}_checkFinalizedStatuses(K){const{hasError:ie,thrownError:Je,isStopped:Oe}=this;ie?K.error(Je):Oe&&K.complete()}asObservable(){const K=new m.y;return K.source=this,K}}return ge.create=(z,K)=>new me(z,K),ge})();class me extends de{constructor(z,K){super(),this.destination=z,this.source=K}next(z){var K,ie;null===(ie=null===(K=this.destination)||void 0===K?void 0:K.next)||void 0===ie||ie.call(K,z)}error(z){var K,ie;null===(ie=null===(K=this.destination)||void 0===K?void 0:K.error)||void 0===ie||ie.call(K,z)}complete(){var z,K;null===(K=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===K||K.call(z)}_subscribe(z){var K,ie;return null!==(ie=null===(K=this.source)||void 0===K?void 0:K.subscribe(z))&&void 0!==ie?ie:te.Lc}}},930:(gt,Me,U)=>{"use strict";U.d(Me,{Hp:()=>qe,Lv:()=>ie});var m=U(576),te=U(727),V=U(2416),ce=U(7849),oe=U(5032);const we=ge("C",void 0,void 0);function ge(Pe,Te,Se){return{kind:Pe,value:Te,error:Se}}var z=U(3410),K=U(2806);class ie extends te.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,te.Nn)(Te)&&Te.add(this)):this.destination=et}static create(Te,Se,Ye){return new qe(Te,Se,Ye)}next(Te){this.isStopped?rt(function me(Pe){return ge("N",Pe,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?rt(function de(Pe){return ge("E",void 0,Pe)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?rt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function Oe(Pe,Te){return Je.call(Pe,Te)}class He{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Te)}catch(Ye){ve(Ye)}}error(Te){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Te)}catch(Ye){ve(Ye)}else ve(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Se){ve(Se)}}}class qe extends ie{constructor(Te,Se,Ye){let Z;if(super(),(0,m.m)(Te)||!Te)Z={next:null!=Te?Te:void 0,error:null!=Se?Se:void 0,complete:null!=Ye?Ye:void 0};else{let ae;this&&V.v.useDeprecatedNextContext?(ae=Object.create(Te),ae.unsubscribe=()=>this.unsubscribe(),Z={next:Te.next&&Oe(Te.next,ae),error:Te.error&&Oe(Te.error,ae),complete:Te.complete&&Oe(Te.complete,ae)}):Z=Te}this.destination=new He(Z)}}function ve(Pe){V.v.useDeprecatedSynchronousErrorHandling?(0,K.O)(Pe):(0,ce.h)(Pe)}function rt(Pe,Te){const{onStoppedNotification:Se}=V.v;Se&&z.z.setTimeout(()=>Se(Pe,Te))}const et={closed:!0,next:oe.Z,error:function Ae(Pe){throw Pe},complete:oe.Z}},727:(gt,Me,U)=>{"use strict";U.d(Me,{Lc:()=>we,w0:()=>oe,Nn:()=>de});var m=U(576);const V=(0,U(3888).d)(ge=>function(K){ge(this),this.message=K?`${K.length} errors occurred during unsubscription:\n${K.map((ie,Je)=>`${Je+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=K});var ce=U(8737);class oe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:K}=this;if(K)if(this._parentage=null,Array.isArray(K))for(const Oe of K)Oe.remove(this);else K.remove(this);const{initialTeardown:ie}=this;if((0,m.m)(ie))try{ie()}catch(Oe){z=Oe instanceof V?Oe.errors:[Oe]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const Oe of Je)try{me(Oe)}catch(He){z=null!=z?z:[],He instanceof V?z=[...z,...He.errors]:z.push(He)}}if(z)throw new V(z)}}add(z){var K;if(z&&z!==this)if(this.closed)me(z);else{if(z instanceof oe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(K=this._finalizers)&&void 0!==K?K:[]).push(z)}}_hasParent(z){const{_parentage:K}=this;return K===z||Array.isArray(K)&&K.includes(z)}_addParent(z){const{_parentage:K}=this;this._parentage=Array.isArray(K)?(K.push(z),K):K?[K,z]:z}_removeParent(z){const{_parentage:K}=this;K===z?this._parentage=null:Array.isArray(K)&&(0,ce.P)(K,z)}remove(z){const{_finalizers:K}=this;K&&(0,ce.P)(K,z),z instanceof oe&&z._removeParent(this)}}oe.EMPTY=(()=>{const ge=new oe;return ge.closed=!0,ge})();const we=oe.EMPTY;function de(ge){return ge instanceof oe||ge&&"closed"in ge&&(0,m.m)(ge.remove)&&(0,m.m)(ge.add)&&(0,m.m)(ge.unsubscribe)}function me(ge){(0,m.m)(ge)?ge():ge.unsubscribe()}},2416:(gt,Me,U)=>{"use strict";U.d(Me,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Me,U)=>{"use strict";U.d(Me,{E:()=>te});const te=new(U(8306).y)(oe=>oe.complete())},8996:(gt,Me,U)=>{"use strict";U.d(Me,{D:()=>Te});var m=U(8421),te=U(5363),V=U(9468),we=U(8306),me=U(2202),ge=U(576),z=U(9672);function ie(Se,Ye){if(!Se)throw new Error("Iterable cannot be null");return new we.y(Z=>{(0,z.f)(Z,Ye,()=>{const ae=Se[Symbol.asyncIterator]();(0,z.f)(Z,Ye,()=>{ae.next().then(X=>{X.done?Z.complete():Z.next(X.value)})},0,!0)})})}var Je=U(3670),Oe=U(8239),He=U(1144),qe=U(6495),ve=U(2206),Ae=U(4532),rt=U(3260);function Te(Se,Ye){return Ye?function Pe(Se,Ye){if(null!=Se){if((0,Je.c)(Se))return function ce(Se,Ye){return(0,m.Xf)(Se).pipe((0,V.R)(Ye),(0,te.Q)(Ye))}(Se,Ye);if((0,He.z)(Se))return function de(Se,Ye){return new we.y(Z=>{let ae=0;return Ye.schedule(function(){ae===Se.length?Z.complete():(Z.next(Se[ae++]),Z.closed||this.schedule())})})}(Se,Ye);if((0,Oe.t)(Se))return function oe(Se,Ye){return(0,m.Xf)(Se).pipe((0,V.R)(Ye),(0,te.Q)(Ye))}(Se,Ye);if((0,ve.D)(Se))return ie(Se,Ye);if((0,qe.T)(Se))return function K(Se,Ye){return new we.y(Z=>{let ae;return(0,z.f)(Z,Ye,()=>{ae=Se[me.h](),(0,z.f)(Z,Ye,()=>{let X,ue;try{({value:X,done:ue}=ae.next())}catch(he){return void Z.error(he)}ue?Z.complete():Z.next(X)},0,!0)}),()=>(0,ge.m)(null==ae?void 0:ae.return)&&ae.return()})}(Se,Ye);if((0,rt.L)(Se))return function et(Se,Ye){return ie((0,rt.Q)(Se),Ye)}(Se,Ye)}throw(0,Ae.z)(Se)}(Se,Ye):(0,m.Xf)(Se)}},8421:(gt,Me,U)=>{"use strict";U.d(Me,{Xf:()=>Je});var m=U(655),te=U(1144),V=U(8239),ce=U(8306),oe=U(3670),we=U(2206),de=U(4532),me=U(6495),ge=U(3260),z=U(576),K=U(7849),ie=U(8822);function Je(Pe){if(Pe instanceof ce.y)return Pe;if(null!=Pe){if((0,oe.c)(Pe))return function Oe(Pe){return new ce.y(Te=>{const Se=Pe[ie.L]();if((0,z.m)(Se.subscribe))return Se.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,te.z)(Pe))return function He(Pe){return new ce.y(Te=>{for(let Se=0;Se<Pe.length&&!Te.closed;Se++)Te.next(Pe[Se]);Te.complete()})}(Pe);if((0,V.t)(Pe))return function qe(Pe){return new ce.y(Te=>{Pe.then(Se=>{Te.closed||(Te.next(Se),Te.complete())},Se=>Te.error(Se)).then(null,K.h)})}(Pe);if((0,we.D)(Pe))return Ae(Pe);if((0,me.T)(Pe))return function ve(Pe){return new ce.y(Te=>{for(const Se of Pe)if(Te.next(Se),Te.closed)return;Te.complete()})}(Pe);if((0,ge.L)(Pe))return function rt(Pe){return Ae((0,ge.Q)(Pe))}(Pe)}throw(0,de.z)(Pe)}function Ae(Pe){return new ce.y(Te=>{(function et(Pe,Te){var Se,Ye,Z,ae;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Se=(0,m.KL)(Pe);!(Ye=yield Se.next()).done;)if(Te.next(Ye.value),Te.closed)return}catch(X){Z={error:X}}finally{try{Ye&&!Ye.done&&(ae=Se.return)&&(yield ae.call(Se))}finally{if(Z)throw Z.error}}Te.complete()})})(Pe,Te).catch(Se=>Te.error(Se))})}},6451:(gt,Me,U)=>{"use strict";U.d(Me,{T:()=>we});var m=U(8189),te=U(8421),V=U(515),ce=U(7669),oe=U(8996);function we(...de){const me=(0,ce.yG)(de),ge=(0,ce._6)(de,1/0),z=de;return z.length?1===z.length?(0,te.Xf)(z[0]):(0,m.J)(ge)((0,oe.D)(z,me)):V.E}},5403:(gt,Me,U)=>{"use strict";U.d(Me,{x:()=>te});var m=U(930);function te(ce,oe,we,de,me){return new V(ce,oe,we,de,me)}class V extends m.Lv{constructor(oe,we,de,me,ge,z){super(oe),this.onFinalize=ge,this.shouldUnsubscribe=z,this._next=we?function(K){try{we(K)}catch(ie){oe.error(ie)}}:super._next,this._error=me?function(K){try{me(K)}catch(ie){oe.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(K){oe.error(K)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(gt,Me,U)=>{"use strict";U.d(Me,{U:()=>V});var m=U(4482),te=U(5403);function V(ce,oe){return(0,m.e)((we,de)=>{let me=0;we.subscribe((0,te.x)(de,ge=>{de.next(ce.call(oe,ge,me++))}))})}},8189:(gt,Me,U)=>{"use strict";U.d(Me,{J:()=>V});var m=U(5577),te=U(4671);function V(ce=1/0){return(0,m.z)(te.y,ce)}},5577:(gt,Me,U)=>{"use strict";U.d(Me,{z:()=>me});var m=U(4004),te=U(8421),V=U(4482),ce=U(9672),oe=U(5403),de=U(576);function me(ge,z,K=1/0){return(0,de.m)(z)?me((ie,Je)=>(0,m.U)((Oe,He)=>z(ie,Oe,Je,He))((0,te.Xf)(ge(ie,Je))),K):("number"==typeof z&&(K=z),(0,V.e)((ie,Je)=>function we(ge,z,K,ie,Je,Oe,He,qe){const ve=[];let Ae=0,rt=0,et=!1;const Pe=()=>{et&&!ve.length&&!Ae&&z.complete()},Te=Ye=>Ae<ie?Se(Ye):ve.push(Ye),Se=Ye=>{Oe&&z.next(Ye),Ae++;let Z=!1;(0,te.Xf)(K(Ye,rt++)).subscribe((0,oe.x)(z,ae=>{null==Je||Je(ae),Oe?Te(ae):z.next(ae)},()=>{Z=!0},void 0,()=>{if(Z)try{for(Ae--;ve.length&&Ae<ie;){const ae=ve.shift();He?(0,ce.f)(z,He,()=>Se(ae)):Se(ae)}Pe()}catch(ae){z.error(ae)}}))};return ge.subscribe((0,oe.x)(z,Te,()=>{et=!0,Pe()})),()=>{null==qe||qe()}}(ie,Je,ge,K)))}},5363:(gt,Me,U)=>{"use strict";U.d(Me,{Q:()=>ce});var m=U(9672),te=U(4482),V=U(5403);function ce(oe,we=0){return(0,te.e)((de,me)=>{de.subscribe((0,V.x)(me,ge=>(0,m.f)(me,oe,()=>me.next(ge),we),()=>(0,m.f)(me,oe,()=>me.complete(),we),ge=>(0,m.f)(me,oe,()=>me.error(ge),we)))})}},3099:(gt,Me,U)=>{"use strict";U.d(Me,{B:()=>we});var m=U(8996),te=U(5698),V=U(7579),ce=U(930),oe=U(4482);function we(me={}){const{connector:ge=(()=>new V.x),resetOnError:z=!0,resetOnComplete:K=!0,resetOnRefCountZero:ie=!0}=me;return Je=>{let Oe=null,He=null,qe=null,ve=0,Ae=!1,rt=!1;const et=()=>{null==He||He.unsubscribe(),He=null},Pe=()=>{et(),Oe=qe=null,Ae=rt=!1},Te=()=>{const Se=Oe;Pe(),null==Se||Se.unsubscribe()};return(0,oe.e)((Se,Ye)=>{ve++,!rt&&!Ae&&et();const Z=qe=null!=qe?qe:ge();Ye.add(()=>{ve--,0===ve&&!rt&&!Ae&&(He=de(Te,ie))}),Z.subscribe(Ye),Oe||(Oe=new ce.Hp({next:ae=>Z.next(ae),error:ae=>{rt=!0,et(),He=de(Pe,z,ae),Z.error(ae)},complete:()=>{Ae=!0,et(),He=de(Pe,K),Z.complete()}}),(0,m.D)(Se).subscribe(Oe))})(Je)}}function de(me,ge,...z){return!0===ge?(me(),null):!1===ge?null:ge(...z).pipe((0,te.q)(1)).subscribe(()=>me())}},9468:(gt,Me,U)=>{"use strict";U.d(Me,{R:()=>te});var m=U(4482);function te(V,ce=0){return(0,m.e)((oe,we)=>{we.add(V.schedule(()=>oe.subscribe(we),ce))})}},5698:(gt,Me,U)=>{"use strict";U.d(Me,{q:()=>ce});var m=U(515),te=U(4482),V=U(5403);function ce(oe){return oe<=0?()=>m.E:(0,te.e)((we,de)=>{let me=0;we.subscribe((0,V.x)(de,ge=>{++me<=oe&&(de.next(ge),oe<=me&&de.complete())}))})}},8505:(gt,Me,U)=>{"use strict";U.d(Me,{b:()=>oe});var m=U(576),te=U(4482),V=U(5403),ce=U(4671);function oe(we,de,me){const ge=(0,m.m)(we)||de||me?{next:we,error:de,complete:me}:we;return ge?(0,te.e)((z,K)=>{var ie;null===(ie=ge.subscribe)||void 0===ie||ie.call(ge);let Je=!0;z.subscribe((0,V.x)(K,Oe=>{var He;null===(He=ge.next)||void 0===He||He.call(ge,Oe),K.next(Oe)},()=>{var Oe;Je=!1,null===(Oe=ge.complete)||void 0===Oe||Oe.call(ge),K.complete()},Oe=>{var He;Je=!1,null===(He=ge.error)||void 0===He||He.call(ge,Oe),K.error(Oe)},()=>{var Oe,He;Je&&(null===(Oe=ge.unsubscribe)||void 0===Oe||Oe.call(ge)),null===(He=ge.finalize)||void 0===He||He.call(ge)}))}):ce.y}},4408:(gt,Me,U)=>{"use strict";U.d(Me,{o:()=>oe});var m=U(727);class te extends m.w0{constructor(de,me){super()}schedule(de,me=0){return this}}const V={setInterval(we,de,...me){const{delegate:ge}=V;return(null==ge?void 0:ge.setInterval)?ge.setInterval(we,de,...me):setInterval(we,de,...me)},clearInterval(we){const{delegate:de}=V;return((null==de?void 0:de.clearInterval)||clearInterval)(we)},delegate:void 0};var ce=U(8737);class oe extends te{constructor(de,me){super(de,me),this.scheduler=de,this.work=me,this.pending=!1}schedule(de,me=0){if(this.closed)return this;this.state=de;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(z,this.id,me),this}requestAsyncId(de,me,ge=0){return V.setInterval(de.flush.bind(de,this),ge)}recycleAsyncId(de,me,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return me;V.clearInterval(me)}execute(de,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(de,me);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,me){let z,ge=!1;try{this.work(de)}catch(K){ge=!0,z=K||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:de,scheduler:me}=this,{actions:ge}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ge,this),null!=de&&(this.id=this.recycleAsyncId(me,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Me,U)=>{"use strict";U.d(Me,{v:()=>V});var m=U(6063);class te{constructor(oe,we=te.now){this.schedulerActionCtor=oe,this.now=we}schedule(oe,we=0,de){return new this.schedulerActionCtor(this,oe).schedule(de,we)}}te.now=m.l.now;class V extends te{constructor(oe,we=te.now){super(oe,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:we}=this;if(this._active)return void we.push(oe);let de;this._active=!0;do{if(de=oe.execute(oe.state,oe.delay))break}while(oe=we.shift());if(this._active=!1,de){for(;oe=we.shift();)oe.unsubscribe();throw de}}}},4986:(gt,Me,U)=>{"use strict";U.d(Me,{z:()=>V});var m=U(4408);const V=new(U(7565).v)(m.o)},6063:(gt,Me,U)=>{"use strict";U.d(Me,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(gt,Me,U)=>{"use strict";U.d(Me,{z:()=>m});const m={setTimeout(te,V,...ce){const{delegate:oe}=m;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(te,V,...ce):setTimeout(te,V,...ce)},clearTimeout(te){const{delegate:V}=m;return((null==V?void 0:V.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(gt,Me,U)=>{"use strict";U.d(Me,{h:()=>te});const te=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Me,U)=>{"use strict";U.d(Me,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,Me,U)=>{"use strict";U.d(Me,{_6:()=>we,jO:()=>ce,yG:()=>oe});var m=U(576);function V(de){return de[de.length-1]}function ce(de){return(0,m.m)(V(de))?de.pop():void 0}function oe(de){return function te(de){return de&&(0,m.m)(de.schedule)}(V(de))?de.pop():void 0}function we(de,me){return"number"==typeof V(de)?de.pop():me}},8737:(gt,Me,U)=>{"use strict";function m(te,V){if(te){const ce=te.indexOf(V);0<=ce&&te.splice(ce,1)}}U.d(Me,{P:()=>m})},3888:(gt,Me,U)=>{"use strict";function m(te){const ce=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}U.d(Me,{d:()=>m})},2806:(gt,Me,U)=>{"use strict";U.d(Me,{O:()=>ce,x:()=>V});var m=U(2416);let te=null;function V(oe){if(m.v.useDeprecatedSynchronousErrorHandling){const we=!te;if(we&&(te={errorThrown:!1,error:null}),oe(),we){const{errorThrown:de,error:me}=te;if(te=null,de)throw me}}else oe()}function ce(oe){m.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},9672:(gt,Me,U)=>{"use strict";function m(te,V,ce,oe=0,we=!1){const de=V.schedule(function(){ce(),we?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(de),!we)return de}U.d(Me,{f:()=>m})},4671:(gt,Me,U)=>{"use strict";function m(te){return te}U.d(Me,{y:()=>m})},1144:(gt,Me,U)=>{"use strict";U.d(Me,{z:()=>m});const m=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(gt,Me,U)=>{"use strict";U.d(Me,{D:()=>te});var m=U(576);function te(V){return Symbol.asyncIterator&&(0,m.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(gt,Me,U)=>{"use strict";function m(te){return"function"==typeof te}U.d(Me,{m:()=>m})},3670:(gt,Me,U)=>{"use strict";U.d(Me,{c:()=>V});var m=U(8822),te=U(576);function V(ce){return(0,te.m)(ce[m.L])}},6495:(gt,Me,U)=>{"use strict";U.d(Me,{T:()=>V});var m=U(2202),te=U(576);function V(ce){return(0,te.m)(null==ce?void 0:ce[m.h])}},8239:(gt,Me,U)=>{"use strict";U.d(Me,{t:()=>te});var m=U(576);function te(V){return(0,m.m)(null==V?void 0:V.then)}},3260:(gt,Me,U)=>{"use strict";U.d(Me,{L:()=>ce,Q:()=>V});var m=U(655),te=U(576);function V(oe){return(0,m.FC)(this,arguments,function*(){const de=oe.getReader();try{for(;;){const{value:me,done:ge}=yield(0,m.qq)(de.read());if(ge)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(me)}}finally{de.releaseLock()}})}function ce(oe){return(0,te.m)(null==oe?void 0:oe.getReader)}},4482:(gt,Me,U)=>{"use strict";U.d(Me,{A:()=>te,e:()=>V});var m=U(576);function te(ce){return(0,m.m)(null==ce?void 0:ce.lift)}function V(ce){return oe=>{if(te(oe))return oe.lift(function(we){try{return ce(we,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,Me,U)=>{"use strict";function m(){}U.d(Me,{Z:()=>m})},7849:(gt,Me,U)=>{"use strict";U.d(Me,{h:()=>V});var m=U(2416),te=U(3410);function V(ce){te.z.setTimeout(()=>{const{onUnhandledError:oe}=m.v;if(!oe)throw ce;oe(ce)})}},4532:(gt,Me,U)=>{"use strict";function m(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Me,{z:()=>m})},5226:function(gt){gt.exports=function(){"use strict";const Me="SweetAlert2:",m=C=>C.charAt(0).toUpperCase()+C.slice(1),te=C=>Array.prototype.slice.call(C),V=C=>{console.warn("".concat(Me," ").concat("object"==typeof C?C.join(" "):C))},ce=C=>{console.error("".concat(Me," ").concat(C))},oe=[],de=(C,D)=>{(C=>{oe.includes(C)||(oe.push(C),V(C))})('"'.concat(C,'" is deprecated and will be removed in the next major release. Please use "').concat(D,'" instead.'))},me=C=>"function"==typeof C?C():C,ge=C=>C&&"function"==typeof C.toPromise,z=C=>ge(C)?C.toPromise():Promise.resolve(C),K=C=>C&&Promise.resolve(C)===C,ie={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Je=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Oe={},He=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],qe=C=>Object.prototype.hasOwnProperty.call(ie,C),ve=C=>-1!==Je.indexOf(C),Ae=C=>Oe[C],rt=C=>{qe(C)||V('Unknown parameter "'.concat(C,'"'))},et=C=>{He.includes(C)&&V('The parameter "'.concat(C,'" is incompatible with toasts'))},Pe=C=>{Ae(C)&&de(C,Ae(C))},Ye=C=>{const D={};for(const P in C)D[C[P]]="swal2-"+C[P];return D},Z=Ye(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),ae=Ye(["success","warning","info","question","error"]),X=()=>document.body.querySelector(".".concat(Z.container)),ue=C=>{const D=X();return D?D.querySelector(C):null},he=C=>ue(".".concat(C)),re=()=>he(Z.popup),Be=()=>he(Z.icon),fe=()=>he(Z.title),Dt=()=>he(Z["html-container"]),on=()=>he(Z.image),Pn=()=>he(Z["progress-steps"]),dt=()=>he(Z["validation-message"]),at=()=>ue(".".concat(Z.actions," .").concat(Z.confirm)),tn=()=>ue(".".concat(Z.actions," .").concat(Z.deny)),ur=()=>ue(".".concat(Z.loader)),Jt=()=>ue(".".concat(Z.actions," .").concat(Z.cancel)),Pr=()=>he(Z.actions),an=()=>he(Z.footer),$t=()=>he(Z["timer-progress-bar"]),Qn=()=>he(Z.close),xi=()=>{const C=te(re().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((P,H)=>{const xe=parseInt(P.getAttribute("tabindex")),ht=parseInt(H.getAttribute("tabindex"));return xe>ht?1:xe<ht?-1:0}),D=te(re().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(P=>"-1"!==P.getAttribute("tabindex"));return(C=>{const D=[];for(let P=0;P<C.length;P++)-1===D.indexOf(C[P])&&D.push(C[P]);return D})(C.concat(D)).filter(P=>xn(P))},cr=()=>ot(document.body,Z.shown)&&!ot(document.body,Z["toast-shown"])&&!ot(document.body,Z["no-backdrop"]),Hr=()=>re()&&ot(re(),Z.toast),Nr={previousBodyPadding:null},bn=(C,D)=>{if(C.textContent="",D){const H=(new DOMParser).parseFromString(D,"text/html");te(H.querySelector("head").childNodes).forEach(xe=>{C.appendChild(xe)}),te(H.querySelector("body").childNodes).forEach(xe=>{C.appendChild(xe)})}},ot=(C,D)=>{if(!D)return!1;const P=D.split(/\s+/);for(let H=0;H<P.length;H++)if(!C.classList.contains(P[H]))return!1;return!0},dn=(C,D,P)=>{if(((C,D)=>{te(C.classList).forEach(P=>{!Object.values(Z).includes(P)&&!Object.values(ae).includes(P)&&!Object.values(D.showClass).includes(P)&&C.classList.remove(P)})})(C,D),D.customClass&&D.customClass[P]){if("string"!=typeof D.customClass[P]&&!D.customClass[P].forEach)return V("Invalid type of customClass.".concat(P,'! Expected string or iterable object, got "').concat(typeof D.customClass[P],'"'));ft(C,D.customClass[P])}},Vn=(C,D)=>{if(!D)return null;switch(D){case"select":case"textarea":case"file":return C.querySelector(".".concat(Z.popup," > .").concat(Z[D]));case"checkbox":return C.querySelector(".".concat(Z.popup," > .").concat(Z.checkbox," input"));case"radio":return C.querySelector(".".concat(Z.popup," > .").concat(Z.radio," input:checked"))||C.querySelector(".".concat(Z.popup," > .").concat(Z.radio," input:first-child"));case"range":return C.querySelector(".".concat(Z.popup," > .").concat(Z.range," input"));default:return C.querySelector(".".concat(Z.popup," > .").concat(Z.input))}},Gr=C=>{if(C.focus(),"file"!==C.type){const D=C.value;C.value="",C.value=D}},Yi=(C,D,P)=>{!C||!D||("string"==typeof D&&(D=D.split(/\s+/).filter(Boolean)),D.forEach(H=>{Array.isArray(C)?C.forEach(xe=>{P?xe.classList.add(H):xe.classList.remove(H)}):P?C.classList.add(H):C.classList.remove(H)}))},ft=(C,D)=>{Yi(C,D,!0)},mn=(C,D)=>{Yi(C,D,!1)},dr=(C,D)=>{const P=te(C.childNodes);for(let H=0;H<P.length;H++)if(ot(P[H],D))return P[H]},Mi=(C,D,P)=>{P==="".concat(parseInt(P))&&(P=parseInt(P)),P||0===parseInt(P)?C.style[D]="number"==typeof P?"".concat(P,"px"):P:C.style.removeProperty(D)},bt=function(C){C.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Qe=C=>{C.style.display="none"},Tt=(C,D,P,H)=>{const xe=C.querySelector(D);xe&&(xe.style[P]=H)},jn=(C,D,P)=>{D?bt(C,P):Qe(C)},xn=C=>!(!C||!(C.offsetWidth||C.offsetHeight||C.getClientRects().length)),bs=C=>C.scrollHeight>C.clientHeight,hr=C=>{const D=window.getComputedStyle(C),P=parseFloat(D.getPropertyValue("animation-duration")||"0"),H=parseFloat(D.getPropertyValue("transition-duration")||"0");return P>0||H>0},Jn=function(C){let D=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=$t();xn(P)&&(D&&(P.style.transition="none",P.style.width="100%"),setTimeout(()=>{P.style.transition="width ".concat(C/1e3,"s linear"),P.style.width="0%"},10))},fr=()=>"undefined"==typeof window||"undefined"==typeof document,ke={},nt=C=>new Promise(D=>{if(!C)return D();const P=window.scrollX,H=window.scrollY;ke.restoreFocusTimeout=setTimeout(()=>{ke.previousActiveElement&&ke.previousActiveElement.focus?(ke.previousActiveElement.focus(),ke.previousActiveElement=null):document.body&&document.body.focus(),D()},100),window.scrollTo(P,H)}),wt='\n <div aria-labelledby="'.concat(Z.title,'" aria-describedby="').concat(Z["html-container"],'" class="').concat(Z.popup,'" tabindex="-1">\n   <button type="button" class="').concat(Z.close,'"></button>\n   <ul class="').concat(Z["progress-steps"],'"></ul>\n   <div class="').concat(Z.icon,'"></div>\n   <img class="').concat(Z.image,'" />\n   <h2 class="').concat(Z.title,'" id="').concat(Z.title,'"></h2>\n   <div class="').concat(Z["html-container"],'" id="').concat(Z["html-container"],'"></div>\n   <input class="').concat(Z.input,'" />\n   <input type="file" class="').concat(Z.file,'" />\n   <div class="').concat(Z.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(Z.select,'"></select>\n   <div class="').concat(Z.radio,'"></div>\n   <label for="').concat(Z.checkbox,'" class="').concat(Z.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(Z.label,'"></span>\n   </label>\n   <textarea class="').concat(Z.textarea,'"></textarea>\n   <div class="').concat(Z["validation-message"],'" id="').concat(Z["validation-message"],'"></div>\n   <div class="').concat(Z.actions,'">\n     <div class="').concat(Z.loader,'"></div>\n     <button type="button" class="').concat(Z.confirm,'"></button>\n     <button type="button" class="').concat(Z.deny,'"></button>\n     <button type="button" class="').concat(Z.cancel,'"></button>\n   </div>\n   <div class="').concat(Z.footer,'"></div>\n   <div class="').concat(Z["timer-progress-bar-container"],'">\n     <div class="').concat(Z["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Rt=()=>{ke.currentInstance.resetValidationMessage()},se=C=>{const D=(()=>{const C=X();return!!C&&(C.remove(),mn([document.documentElement,document.body],[Z["no-backdrop"],Z["toast-shown"],Z["has-column"]]),!0)})();if(fr())return void ce("SweetAlert2 requires document to initialize");const P=document.createElement("div");P.className=Z.container,D&&ft(P,Z["no-transition"]),bn(P,wt);const H=(C=>"string"==typeof C?document.querySelector(C):C)(C.target);H.appendChild(P),(C=>{const D=re();D.setAttribute("role",C.toast?"alert":"dialog"),D.setAttribute("aria-live",C.toast?"polite":"assertive"),C.toast||D.setAttribute("aria-modal","true")})(C),(C=>{"rtl"===window.getComputedStyle(C).direction&&ft(X(),Z.rtl)})(H),(()=>{const C=re(),D=dr(C,Z.input),P=dr(C,Z.file),H=C.querySelector(".".concat(Z.range," input")),xe=C.querySelector(".".concat(Z.range," output")),ht=dr(C,Z.select),xt=C.querySelector(".".concat(Z.checkbox," input")),Qr=dr(C,Z.textarea);D.oninput=Rt,P.onchange=Rt,ht.onchange=Rt,xt.onchange=Rt,Qr.oninput=Rt,H.oninput=()=>{Rt(),xe.value=H.value},H.onchange=()=>{Rt(),H.nextSibling.value=H.value}})()},We=(C,D)=>{C instanceof HTMLElement?D.appendChild(C):"object"==typeof C?Ct(C,D):C&&bn(D,C)},Ct=(C,D)=>{C.jquery?rn(D,C):bn(D,C.toString())},rn=(C,D)=>{if(C.textContent="",0 in D)for(let P=0;P in D;P++)C.appendChild(D[P].cloneNode(!0));else C.appendChild(D.cloneNode(!0))},Hn=(()=>{if(fr())return!1;const C=document.createElement("div"),D={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const P in D)if(Object.prototype.hasOwnProperty.call(D,P)&&void 0!==C.style[P])return D[P];return!1})(),kn=(C,D)=>{const P=Pr(),H=ur();D.showConfirmButton||D.showDenyButton||D.showCancelButton?bt(P):Qe(P),dn(P,D,"actions"),function Vt(C,D,P){const H=at(),xe=tn(),ht=Jt();$n(H,"confirm",P),$n(xe,"deny",P),$n(ht,"cancel",P),function _n(C,D,P,H){if(!H.buttonsStyling)return mn([C,D,P],Z.styled);ft([C,D,P],Z.styled),H.confirmButtonColor&&(C.style.backgroundColor=H.confirmButtonColor,ft(C,Z["default-outline"])),H.denyButtonColor&&(D.style.backgroundColor=H.denyButtonColor,ft(D,Z["default-outline"])),H.cancelButtonColor&&(P.style.backgroundColor=H.cancelButtonColor,ft(P,Z["default-outline"]))}(H,xe,ht,P),P.reverseButtons&&(P.toast?(C.insertBefore(ht,H),C.insertBefore(xe,H)):(C.insertBefore(ht,D),C.insertBefore(xe,D),C.insertBefore(H,D)))}(P,H,D),bn(H,D.loaderHtml),dn(H,D,"loader")};function $n(C,D,P){jn(C,P["show".concat(m(D),"Button")],"inline-block"),bn(C,P["".concat(D,"ButtonText")]),C.setAttribute("aria-label",P["".concat(D,"ButtonAriaLabel")]),C.className=Z[D],dn(C,P,"".concat(D,"Button")),ft(C,P["".concat(D,"ButtonClass")])}const Qi=(C,D)=>{const P=X();!P||(function Qs(C,D){"string"==typeof D?C.style.background=D:D||ft([document.documentElement,document.body],Z["no-backdrop"])}(P,D.backdrop),function Da(C,D){D in Z?ft(C,Z[D]):(V('The "position" parameter is not valid, defaulting to "center"'),ft(C,Z.center))}(P,D.position),function Zo(C,D){if(D&&"string"==typeof D){const P="grow-".concat(D);P in Z&&ft(C,Z[P])}}(P,D.grow),dn(P,D,"container"))};var mt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Yo=["input","file","range","select","radio","checkbox","textarea"],$e=C=>{if(!Ft[C.input])return ce('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(C.input,'"'));const D=gi(C.input),P=Ft[C.input](D,C);bt(P),setTimeout(()=>{Gr(P)})},yn=(C,D)=>{const P=Vn(re(),C);if(P){(C=>{for(let D=0;D<C.attributes.length;D++){const P=C.attributes[D].name;["type","value","style"].includes(P)||C.removeAttribute(P)}})(P);for(const H in D)P.setAttribute(H,D[H])}},pr=C=>{const D=gi(C.input);C.customClass&&ft(D,C.customClass.input)},Ri=(C,D)=>{(!C.placeholder||D.inputPlaceholder)&&(C.placeholder=D.inputPlaceholder)},An=(C,D,P)=>{if(P.inputLabel){C.id=Z.input;const H=document.createElement("label"),xe=Z["input-label"];H.setAttribute("for",C.id),H.className=xe,ft(H,P.customClass.inputLabel),H.innerText=P.inputLabel,D.insertAdjacentElement("beforebegin",H)}},gi=C=>{const D=Z[C]?Z[C]:Z.input;return dr(re(),D)},Ft={};Ft.text=Ft.email=Ft.password=Ft.number=Ft.tel=Ft.url=(C,D)=>("string"==typeof D.inputValue||"number"==typeof D.inputValue?C.value=D.inputValue:K(D.inputValue)||V('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof D.inputValue,'"')),An(C,C,D),Ri(C,D),C.type=D.input,C),Ft.file=(C,D)=>(An(C,C,D),Ri(C,D),C),Ft.range=(C,D)=>{const P=C.querySelector("input"),H=C.querySelector("output");return P.value=D.inputValue,P.type=D.input,H.value=D.inputValue,An(P,C,D),C},Ft.select=(C,D)=>{if(C.textContent="",D.inputPlaceholder){const P=document.createElement("option");bn(P,D.inputPlaceholder),P.value="",P.disabled=!0,P.selected=!0,C.appendChild(P)}return An(C,C,D),C},Ft.radio=C=>(C.textContent="",C),Ft.checkbox=(C,D)=>{const P=Vn(re(),"checkbox");P.value="1",P.id=Z.checkbox,P.checked=Boolean(D.inputValue);const H=C.querySelector("span");return bn(H,D.inputPlaceholder),C},Ft.textarea=(C,D)=>{C.value=D.inputValue,Ri(C,D),An(C,C,D);return setTimeout(()=>{if("MutationObserver"in window){const H=parseInt(window.getComputedStyle(re()).width);new MutationObserver(()=>{const ht=C.offsetWidth+(H=>parseInt(window.getComputedStyle(H).marginLeft)+parseInt(window.getComputedStyle(H).marginRight))(C);re().style.width=ht>H?"".concat(ht,"px"):null}).observe(C,{attributes:!0,attributeFilter:["style"]})}}),C};const Un=(C,D)=>{const P=Dt();dn(P,D,"htmlContainer"),D.html?(We(D.html,P),bt(P,"block")):D.text?(P.textContent=D.text,bt(P,"block")):Qe(P),((C,D)=>{const P=re(),H=mt.innerParams.get(C),xe=!H||D.input!==H.input;Yo.forEach(ht=>{const xt=Z[ht],Qr=dr(P,xt);yn(ht,D.inputAttributes),Qr.className=xt,xe&&Qe(Qr)}),D.input&&(xe&&$e(D),pr(D))})(C,D)},Cs=(C,D)=>{for(const P in ae)D.icon!==P&&mn(C,ae[P]);ft(C,ae[D.icon]),Ji(C,D),Qo(),dn(C,D,"icon")},Qo=()=>{const C=re(),D=window.getComputedStyle(C).getPropertyValue("background-color"),P=C.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let H=0;H<P.length;H++)P[H].style.backgroundColor=D},Pi=(C,D)=>{C.textContent="",bn(C,D.iconHtml?Or(D.iconHtml):"success"===D.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===D.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Or({question:"?",warning:"!",info:"i"}[D.icon]))},Ji=(C,D)=>{if(D.iconColor){C.style.color=D.iconColor,C.style.borderColor=D.iconColor;for(const P of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Tt(C,P,"backgroundColor",D.iconColor);Tt(C,".swal2-success-ring","borderColor",D.iconColor)}},Or=C=>'<div class="'.concat(Z["icon-content"],'">').concat(C,"</div>"),mi=(C,D)=>{const P=Pn();if(!D.progressSteps||0===D.progressSteps.length)return Qe(P);bt(P),P.textContent="",D.currentProgressStep>=D.progressSteps.length&&V("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),D.progressSteps.forEach((H,xe)=>{const ht=(C=>{const D=document.createElement("li");return ft(D,Z["progress-step"]),bn(D,C),D})(H);if(P.appendChild(ht),xe===D.currentProgressStep&&ft(ht,Z["active-progress-step"]),xe!==D.progressSteps.length-1){const xt=(C=>{const D=document.createElement("li");return ft(D,Z["progress-step-line"]),C.progressStepsDistance&&(D.style.width=C.progressStepsDistance),D})(D);P.appendChild(xt)}})},Ds=(C,D)=>{C.className="".concat(Z.popup," ").concat(xn(C)?D.showClass.popup:""),D.toast?(ft([document.documentElement,document.body],Z["toast-shown"]),ft(C,Z.toast)):ft(C,Z.modal),dn(C,D,"popup"),"string"==typeof D.customClass&&ft(C,D.customClass),D.icon&&ft(C,Z["icon-".concat(D.icon)])},Jo=(C,D)=>{((C,D)=>{const P=X(),H=re();D.toast?(Mi(P,"width",D.width),H.style.width="100%",H.insertBefore(ur(),Be())):Mi(H,"width",D.width),Mi(H,"padding",D.padding),D.color&&(H.style.color=D.color),D.background&&(H.style.background=D.background),Qe(dt()),Ds(H,D)})(0,D),Qi(0,D),mi(0,D),((C,D)=>{const P=mt.innerParams.get(C),H=Be();P&&D.icon===P.icon?(Pi(H,D),Cs(H,D)):D.icon||D.iconHtml?D.icon&&-1===Object.keys(ae).indexOf(D.icon)?(ce('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(D.icon,'"')),Qe(H)):(bt(H),Pi(H,D),Cs(H,D),ft(H,D.showClass.icon)):Qe(H)})(C,D),((C,D)=>{const P=on();if(!D.imageUrl)return Qe(P);bt(P,""),P.setAttribute("src",D.imageUrl),P.setAttribute("alt",D.imageAlt),Mi(P,"width",D.imageWidth),Mi(P,"height",D.imageHeight),P.className=Z.image,dn(P,D,"image")})(0,D),((C,D)=>{const P=fe();jn(P,D.title||D.titleText,"block"),D.title&&We(D.title,P),D.titleText&&(P.innerText=D.titleText),dn(P,D,"title")})(0,D),((C,D)=>{const P=Qn();bn(P,D.closeButtonHtml),dn(P,D,"closeButton"),jn(P,D.showCloseButton),P.setAttribute("aria-label",D.closeButtonAriaLabel)})(0,D),Un(C,D),kn(0,D),((C,D)=>{const P=an();jn(P,D.footer),D.footer&&We(D.footer,P),dn(P,D,"footer")})(0,D),"function"==typeof D.didRender&&D.didRender(re())},Xn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),El=()=>{te(document.body.children).forEach(D=>{D.hasAttribute("data-previous-aria-hidden")?(D.setAttribute("aria-hidden",D.getAttribute("data-previous-aria-hidden")),D.removeAttribute("data-previous-aria-hidden")):D.removeAttribute("aria-hidden")})},Xo=["swal-title","swal-html","swal-footer"],hu=C=>{const D={};return te(C.querySelectorAll("swal-param")).forEach(P=>{Eo(P,["name","value"]);const H=P.getAttribute("name"),xe=P.getAttribute("value");"boolean"==typeof ie[H]&&"false"===xe&&(D[H]=!1),"object"==typeof ie[H]&&(D[H]=JSON.parse(xe))}),D},dd=C=>{const D={};return te(C.querySelectorAll("swal-button")).forEach(P=>{Eo(P,["type","color","aria-label"]);const H=P.getAttribute("type");D["".concat(H,"ButtonText")]=P.innerHTML,D["show".concat(m(H),"Button")]=!0,P.hasAttribute("color")&&(D["".concat(H,"ButtonColor")]=P.getAttribute("color")),P.hasAttribute("aria-label")&&(D["".concat(H,"ButtonAriaLabel")]=P.getAttribute("aria-label"))}),D},Xi=C=>{const D={},P=C.querySelector("swal-image");return P&&(Eo(P,["src","width","height","alt"]),P.hasAttribute("src")&&(D.imageUrl=P.getAttribute("src")),P.hasAttribute("width")&&(D.imageWidth=P.getAttribute("width")),P.hasAttribute("height")&&(D.imageHeight=P.getAttribute("height")),P.hasAttribute("alt")&&(D.imageAlt=P.getAttribute("alt"))),D},hd=C=>{const D={},P=C.querySelector("swal-icon");return P&&(Eo(P,["type","color"]),P.hasAttribute("type")&&(D.icon=P.getAttribute("type")),P.hasAttribute("color")&&(D.iconColor=P.getAttribute("color")),D.iconHtml=P.innerHTML),D},fu=C=>{const D={},P=C.querySelector("swal-input");P&&(Eo(P,["type","label","placeholder","value"]),D.input=P.getAttribute("type")||"text",P.hasAttribute("label")&&(D.inputLabel=P.getAttribute("label")),P.hasAttribute("placeholder")&&(D.inputPlaceholder=P.getAttribute("placeholder")),P.hasAttribute("value")&&(D.inputValue=P.getAttribute("value")));const H=C.querySelectorAll("swal-input-option");return H.length&&(D.inputOptions={},te(H).forEach(xe=>{Eo(xe,["value"]);const ht=xe.getAttribute("value");D.inputOptions[ht]=xe.innerHTML})),D},Cl=(C,D)=>{const P={};for(const H in D){const xe=D[H],ht=C.querySelector(xe);ht&&(Eo(ht,[]),P[xe.replace(/^swal-/,"")]=ht.innerHTML.trim())}return P},Ts=C=>{const D=Xo.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);te(C.children).forEach(P=>{const H=P.tagName.toLowerCase();-1===D.indexOf(H)&&V("Unrecognized element <".concat(H,">"))})},Eo=(C,D)=>{te(C.attributes).forEach(P=>{-1===D.indexOf(P.name)&&V(['Unrecognized attribute "'.concat(P.name,'" on <').concat(C.tagName.toLowerCase(),">."),"".concat(D.length?"Allowed attributes are: ".concat(D.join(", ")):"To set the value, use HTML within the element.")])})};var Il={email:(C,D)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(C)?Promise.resolve():Promise.resolve(D||"Invalid email address"),url:(C,D)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(C)?Promise.resolve():Promise.resolve(D||"Invalid URL")};function pu(C){(function fd(C){C.inputValidator||Object.keys(Il).forEach(D=>{C.input===D&&(C.inputValidator=Il[D])})})(C),C.showLoaderOnConfirm&&!C.preConfirm&&V("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function pd(C){(!C.target||"string"==typeof C.target&&!document.querySelector(C.target)||"string"!=typeof C.target&&!C.target.appendChild)&&(V('Target parameter is not valid, defaulting to "body"'),C.target="body")}(C),"string"==typeof C.title&&(C.title=C.title.split("\n").join("<br />")),se(C)}class Co{constructor(D,P){this.callback=D,this.remaining=P,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(D){const P=this.running;return P&&this.stop(),this.remaining+=D,P&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Yh=()=>{null===Nr.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Nr.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Nr.previousBodyPadding+(()=>{const C=document.createElement("div");C.className=Z["scrollbar-measure"],document.body.appendChild(C);const D=C.getBoundingClientRect().width-C.clientWidth;return document.body.removeChild(C),D})(),"px"))},sc=()=>{const C=navigator.userAgent,D=!!C.match(/iPad/i)||!!C.match(/iPhone/i),P=!!C.match(/WebKit/i);D&&P&&!C.match(/CriOS/i)&&re().scrollHeight>window.innerHeight-44&&(X().style.paddingBottom="".concat(44,"px"))},Dl=()=>{const C=X();let D;C.ontouchstart=P=>{D=Ss(P)},C.ontouchmove=P=>{D&&(P.preventDefault(),P.stopPropagation())}},Ss=C=>{const D=C.target,P=X();return!(qr(C)||Io(C)||D!==P&&(bs(P)||"INPUT"===D.tagName||"TEXTAREA"===D.tagName||bs(Dt())&&Dt().contains(D)))},qr=C=>C.touches&&C.touches.length&&"stylus"===C.touches[0].touchType,Io=C=>C.touches&&C.touches.length>1,gu=C=>{const D=X(),P=re();"function"==typeof C.willOpen&&C.willOpen(P);const xe=window.getComputedStyle(document.body).overflowY;si(D,P,C),setTimeout(()=>{To(D,P)},10),cr()&&(As(D,C.scrollbarPadding,xe),te(document.body.children).forEach(D=>{D===X()||D.contains(X())||(D.hasAttribute("aria-hidden")&&D.setAttribute("data-previous-aria-hidden",D.getAttribute("aria-hidden")),D.setAttribute("aria-hidden","true"))})),!Hr()&&!ke.previousActiveElement&&(ke.previousActiveElement=document.activeElement),"function"==typeof C.didOpen&&setTimeout(()=>C.didOpen(P)),mn(D,Z["no-transition"])},oc=C=>{const D=re();if(C.target!==D)return;const P=X();D.removeEventListener(Hn,oc),P.style.overflowY="auto"},To=(C,D)=>{Hn&&hr(D)?(C.style.overflowY="hidden",D.addEventListener(Hn,oc)):C.style.overflowY="auto"},As=(C,D,P)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!ot(document.body,Z.iosfix)){const D=document.body.scrollTop;document.body.style.top="".concat(-1*D,"px"),ft(document.body,Z.iosfix),Dl(),sc()}})(),D&&"hidden"!==P&&Yh(),setTimeout(()=>{C.scrollTop=0})},si=(C,D,P)=>{ft(C,P.showClass.backdrop),D.style.setProperty("opacity","0","important"),bt(D,"grid"),setTimeout(()=>{ft(D,P.showClass.popup),D.style.removeProperty("opacity")},10),ft([document.documentElement,document.body],Z.shown),P.heightAuto&&P.backdrop&&!P.toast&&ft([document.documentElement,document.body],Z["height-auto"])},es=C=>{let D=re();D||new Tn,D=re();const P=ur();Hr()?Qe(Be()):xa(D,C),bt(P),D.setAttribute("data-loading",!0),D.setAttribute("aria-busy",!0),D.focus()},xa=(C,D)=>{const P=Pr(),H=ur();!D&&xn(at())&&(D=at()),bt(P),D&&(Qe(D),H.setAttribute("data-button-to-replace",D.className)),H.parentNode.insertBefore(H,D),ft([C,P],Z.loading)},ac=C=>C.checked?1:0,Ma=C=>C.checked?C.value:null,mu=C=>C.files.length?null!==C.getAttribute("multiple")?C.files:C.files[0]:null,Ra=(C,D)=>{const P=re(),H=xe=>ts[D.input](P,eo(xe),D);ge(D.inputOptions)||K(D.inputOptions)?(es(at()),z(D.inputOptions).then(xe=>{C.hideLoading(),H(xe)})):"object"==typeof D.inputOptions?H(D.inputOptions):ce("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof D.inputOptions))},Pa=(C,D)=>{const P=C.getInput();Qe(P),z(D.inputValue).then(H=>{P.value="number"===D.input?parseFloat(H)||0:"".concat(H),bt(P),P.focus(),C.hideLoading()}).catch(H=>{ce("Error in inputValue promise: ".concat(H)),P.value="",bt(P),P.focus(),C.hideLoading()})},ts={select:(C,D,P)=>{const H=dr(C,Z.select),xe=(ht,xt,Qr)=>{const En=document.createElement("option");En.value=Qr,bn(En,xt),En.selected=ka(Qr,P.inputValue),ht.appendChild(En)};D.forEach(ht=>{const xt=ht[0],Qr=ht[1];if(Array.isArray(Qr)){const En=document.createElement("optgroup");En.label=xt,En.disabled=!1,H.appendChild(En),Qr.forEach(ss=>xe(En,ss[1],ss[0]))}else xe(H,Qr,xt)}),H.focus()},radio:(C,D,P)=>{const H=dr(C,Z.radio);D.forEach(ht=>{const xt=ht[0],Qr=ht[1],En=document.createElement("input"),ss=document.createElement("label");En.type="radio",En.name=Z.radio,En.value=xt,ka(xt,P.inputValue)&&(En.checked=!0);const Sr=document.createElement("span");bn(Sr,Qr),Sr.className=Z.label,ss.appendChild(En),ss.appendChild(Sr),H.appendChild(ss)});const xe=H.querySelectorAll("input");xe.length&&xe[0].focus()}},eo=C=>{const D=[];return"undefined"!=typeof Map&&C instanceof Map?C.forEach((P,H)=>{let xe=P;"object"==typeof xe&&(xe=eo(xe)),D.push([H,xe])}):Object.keys(C).forEach(P=>{let H=C[P];"object"==typeof H&&(H=eo(H)),D.push([P,H])}),D},ka=(C,D)=>D&&D.toString()===C.toString();function vn(){const C=mt.innerParams.get(this);if(!C)return;const D=mt.domCache.get(this);Qe(D.loader),Hr()?C.icon&&bt(Be()):So(D),mn([D.popup,D.actions],Z.loading),D.popup.removeAttribute("aria-busy"),D.popup.removeAttribute("data-loading"),D.confirmButton.disabled=!1,D.denyButton.disabled=!1,D.cancelButton.disabled=!1}const So=C=>{const D=C.popup.getElementsByClassName(C.loader.getAttribute("data-button-to-replace"));D.length?bt(D[0],"inline-block"):!xn(at())&&!xn(tn())&&!xn(Jt())&&Qe(C.actions)};var sn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Ms=()=>at()&&at().click(),Nn=C=>{C.keydownTarget&&C.keydownHandlerAdded&&(C.keydownTarget.removeEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!1)},zr=(C,D,P)=>{const H=xi();if(H.length)return(D+=P)===H.length?D=0:-1===D&&(D=H.length-1),H[D].focus();re().focus()},mr=["ArrowRight","ArrowDown"],Rs=["ArrowLeft","ArrowUp"],ns=(C,D,P)=>{const H=mt.innerParams.get(C);!H||D.isComposing||229===D.keyCode||(H.stopKeydownPropagation&&D.stopPropagation(),"Enter"===D.key?Na(C,D,H):"Tab"===D.key?Kr(D,H):[...mr,...Rs].includes(D.key)?Ps(D.key):"Escape"===D.key&&ks(D,H,P))},Na=(C,D,P)=>{if(me(P.allowEnterKey)&&D.target&&C.getInput()&&D.target.outerHTML===C.getInput().outerHTML){if(["textarea","file"].includes(P.input))return;Ms(),D.preventDefault()}},Kr=(C,D)=>{const P=C.target,H=xi();let xe=-1;for(let ht=0;ht<H.length;ht++)if(P===H[ht]){xe=ht;break}zr(0,xe,C.shiftKey?-1:1),C.stopPropagation(),C.preventDefault()},Ps=C=>{if(![at(),tn(),Jt()].includes(document.activeElement))return;const xe=mr.includes(C)?"nextElementSibling":"previousElementSibling";let ht=document.activeElement;for(let xt=0;xt<Pr().children.length;xt++){if(ht=ht[xe],!ht)return;if(xn(ht)&&ht instanceof HTMLButtonElement)break}ht instanceof HTMLButtonElement&&ht.focus()},ks=(C,D,P)=>{me(D.allowEscapeKey)&&(C.preventDefault(),P(Xn.esc))};function yt(C,D,P,H){Hr()?Sl(C,H):(nt(P).then(()=>Sl(C,H)),Nn(ke)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(D.setAttribute("style","display:none !important"),D.removeAttribute("class"),D.innerHTML=""):D.remove(),cr()&&(null!==Nr.previousBodyPadding&&(document.body.style.paddingRight="".concat(Nr.previousBodyPadding,"px"),Nr.previousBodyPadding=null),(()=>{if(ot(document.body,Z.iosfix)){const C=parseInt(document.body.style.top,10);mn(document.body,Z.iosfix),document.body.style.top="",document.body.scrollTop=-1*C}})(),El()),function Oa(){mn([document.documentElement,document.body],[Z.shown,Z["height-auto"],Z["no-backdrop"],Z["toast-shown"]])}()}function Ns(C){C=Tl(C);const D=sn.swalPromiseResolve.get(this),P=La(this);this.isAwaitingPromise()?C.isDismissed||(no(this),D(C)):P&&D(C)}const La=C=>{const D=re();if(!D)return!1;const P=mt.innerParams.get(C);if(!P||ot(D,P.hideClass.popup))return!1;mn(D,P.showClass.popup),ft(D,P.hideClass.popup);const H=X();return mn(H,P.showClass.backdrop),ft(H,P.hideClass.backdrop),Re(C,D,P),!0};const no=C=>{C.isAwaitingPromise()&&(mt.awaitingPromise.delete(C),mt.innerParams.get(C)||C._destroy())},Tl=C=>void 0===C?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},C),Re=(C,D,P)=>{const H=X(),xe=Hn&&hr(D);"function"==typeof P.willClose&&P.willClose(D),xe?Gt(C,D,H,P.returnFocus,P.didClose):yt(C,H,P.returnFocus,P.didClose)},Gt=(C,D,P,H,xe)=>{ke.swalCloseEventFinishedCallback=yt.bind(null,C,P,H,xe),D.addEventListener(Hn,function(ht){ht.target===D&&(ke.swalCloseEventFinishedCallback(),delete ke.swalCloseEventFinishedCallback)})},Sl=(C,D)=>{setTimeout(()=>{"function"==typeof D&&D.bind(C.params)(),C._destroy()})};function In(C,D,P){const H=mt.domCache.get(C);D.forEach(xe=>{H[xe].disabled=P})}function ro(C,D){if(!C)return!1;if("radio"===C.type){const H=C.parentNode.parentNode.querySelectorAll("input");for(let xe=0;xe<H.length;xe++)H[xe].disabled=D}else C.disabled=D}const _r=C=>{const D={};return Object.keys(C).forEach(P=>{ve(P)?D[P]=C[P]:V('Invalid parameter to update: "'.concat(P,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),D};const Ba=C=>{rs(C),delete C.params,delete ke.keydownHandler,delete ke.keydownTarget,delete ke.currentInstance},rs=C=>{C.isAwaitingPromise()?(Yr(mt,C),mt.awaitingPromise.set(C,!0)):(Yr(sn,C),Yr(mt,C))},Yr=(C,D)=>{for(const P in C)C[P].delete(D)};var ja=Object.freeze({hideLoading:vn,disableLoading:vn,getInput:function xs(C){const D=mt.innerParams.get(C||this),P=mt.domCache.get(C||this);return P?Vn(P.popup,D.input):null},close:Ns,isAwaitingPromise:function Fa(){return!!mt.awaitingPromise.get(this)},rejectPromise:function Va(C){const D=sn.swalPromiseReject.get(this);no(this),D&&D(C)},handleAwaitingPromise:no,closePopup:Ns,closeModal:Ns,closeToast:Ns,enableButtons:function Ao(){In(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Zr(){In(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Al(){return ro(this.getInput(),!1)},disableInput:function xl(){return ro(this.getInput(),!0)},showValidationMessage:function yu(C){const D=mt.domCache.get(this),P=mt.innerParams.get(this);bn(D.validationMessage,C),D.validationMessage.className=Z["validation-message"],P.customClass&&P.customClass.validationMessage&&ft(D.validationMessage,P.customClass.validationMessage),bt(D.validationMessage);const H=this.getInput();H&&(H.setAttribute("aria-invalid",!0),H.setAttribute("aria-describedby",Z["validation-message"]),Gr(H),ft(H,Z.inputerror))},resetValidationMessage:function Ml(){const C=mt.domCache.get(this);C.validationMessage&&Qe(C.validationMessage);const D=this.getInput();D&&(D.removeAttribute("aria-invalid"),D.removeAttribute("aria-describedby"),mn(D,Z.inputerror))},getProgressSteps:function Ua(){return mt.domCache.get(this).progressSteps},update:function Os(C){const D=re(),P=mt.innerParams.get(this);if(!D||ot(D,P.hideClass.popup))return V("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const H=_r(C),xe=Object.assign({},P,H);Jo(this,xe),mt.innerParams.set(this,xe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,C),writable:!1,enumerable:!0}})},_destroy:function oi(){const C=mt.domCache.get(this),D=mt.innerParams.get(this);D?(C.popup&&ke.swalCloseEventFinishedCallback&&(ke.swalCloseEventFinishedCallback(),delete ke.swalCloseEventFinishedCallback),ke.deferDisposalTimer&&(clearTimeout(ke.deferDisposalTimer),delete ke.deferDisposalTimer),"function"==typeof D.didDestroy&&D.didDestroy(),Ba(this)):rs(this)}});const xo=(C,D)=>{const P=mt.innerParams.get(C);if(!P.input)return ce('The "input" parameter is needed to be set when using returnInputValueOn'.concat(m(D)));const H=((C,D)=>{const P=C.getInput();if(!P)return null;switch(D.input){case"checkbox":return ac(P);case"radio":return Ma(P);case"file":return mu(P);default:return D.inputAutoTrim?P.value.trim():P.value}})(C,P);P.inputValidator?ta(C,H,D):C.getInput().checkValidity()?"deny"===D?na(C,H):ra(C,H):(C.enableButtons(),C.showValidationMessage(P.validationMessage))},ta=(C,D,P)=>{const H=mt.innerParams.get(C);C.disableInput(),Promise.resolve().then(()=>z(H.inputValidator(D,H.validationMessage))).then(ht=>{C.enableButtons(),C.enableInput(),ht?C.showValidationMessage(ht):"deny"===P?na(C,D):ra(C,D)})},na=(C,D)=>{const P=mt.innerParams.get(C||void 0);P.showLoaderOnDeny&&es(tn()),P.preDeny?(mt.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>z(P.preDeny(D,P.validationMessage))).then(xe=>{!1===xe?(C.hideLoading(),no(C)):C.closePopup({isDenied:!0,value:void 0===xe?D:xe})}).catch(xe=>Pl(C||void 0,xe))):C.closePopup({isDenied:!0,value:D})},Ga=(C,D)=>{C.closePopup({isConfirmed:!0,value:D})},Pl=(C,D)=>{C.rejectPromise(D)},ra=(C,D)=>{const P=mt.innerParams.get(C||void 0);P.showLoaderOnConfirm&&es(),P.preConfirm?(C.resetValidationMessage(),mt.awaitingPromise.set(C||void 0,!0),Promise.resolve().then(()=>z(P.preConfirm(D,P.validationMessage))).then(xe=>{xn(dt())||!1===xe?(C.hideLoading(),no(C)):Ga(C,void 0===xe?D:xe)}).catch(xe=>Pl(C||void 0,xe))):Ga(C,D)},vu=(C,D,P)=>{D.popup.onclick=()=>{const H=mt.innerParams.get(C);H&&(so(H)||H.timer||H.input)||P(Xn.close)}},so=C=>C.showConfirmButton||C.showDenyButton||C.showCancelButton||C.showCloseButton;let ia=!1;const wu=C=>{C.popup.onmousedown=()=>{C.container.onmouseup=function(D){C.container.onmouseup=void 0,D.target===C.container&&(ia=!0)}}},oo=C=>{C.container.onmousedown=()=>{C.popup.onmouseup=function(D){C.popup.onmouseup=void 0,(D.target===C.popup||C.popup.contains(D.target))&&(ia=!0)}}},Fs=(C,D,P)=>{D.container.onclick=H=>{const xe=mt.innerParams.get(C);ia?ia=!1:H.target===D.container&&me(xe.allowOutsideClick)&&P(Xn.backdrop)}},yr=C=>C instanceof Element||(C=>"object"==typeof C&&C.jquery)(C);const Qh=()=>{if(ke.timeout)return(()=>{const C=$t(),D=parseInt(window.getComputedStyle(C).width);C.style.removeProperty("transition"),C.style.width="100%";const H=D/parseInt(window.getComputedStyle(C).width)*100;C.style.removeProperty("transition"),C.style.width="".concat(H,"%")})(),ke.timeout.stop()},qa=()=>{if(ke.timeout){const C=ke.timeout.start();return Jn(C),C}};let Mo=!1;const Ro={};const bu=C=>{for(let D=C.target;D&&D!==document;D=D.parentNode)for(const P in Ro){const H=D.getAttribute(P);if(H)return void Ro[P].fire({template:H})}};var gd=Object.freeze({isValidParameter:qe,isUpdatableParameter:ve,isDeprecatedParameter:Ae,argsToParams:C=>{const D={};return"object"!=typeof C[0]||yr(C[0])?["title","html","icon"].forEach((P,H)=>{const xe=C[H];"string"==typeof xe||yr(xe)?D[P]=xe:void 0!==xe&&ce("Unexpected type of ".concat(P,'! Expected "string" or "Element", got ').concat(typeof xe))}):Object.assign(D,C[0]),D},isVisible:()=>xn(re()),clickConfirm:Ms,clickDeny:()=>tn()&&tn().click(),clickCancel:()=>Jt()&&Jt().click(),getContainer:X,getPopup:re,getTitle:fe,getHtmlContainer:Dt,getImage:on,getIcon:Be,getInputLabel:()=>he(Z["input-label"]),getCloseButton:Qn,getActions:Pr,getConfirmButton:at,getDenyButton:tn,getCancelButton:Jt,getLoader:ur,getFooter:an,getTimerProgressBar:$t,getFocusableElements:xi,getValidationMessage:dt,isLoading:()=>re().hasAttribute("data-loading"),fire:function On(){const C=this;for(var D=arguments.length,P=new Array(D),H=0;H<D;H++)P[H]=arguments[H];return new C(...P)},mixin:function lc(C){return class D extends(this){_main(H,xe){return super._main(H,Object.assign({},C,xe))}}},showLoading:es,enableLoading:es,getTimerLeft:()=>ke.timeout&&ke.timeout.getTimerLeft(),stopTimer:Qh,resumeTimer:qa,toggleTimer:()=>{const C=ke.timeout;return C&&(C.running?Qh():qa())},increaseTimer:C=>{if(ke.timeout){const D=ke.timeout.increase(C);return Jn(D,!0),D}},isTimerRunning:()=>ke.timeout&&ke.timeout.isRunning(),bindClickHandler:function qn(){Ro[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Mo||(document.body.addEventListener("click",bu),Mo=!0)}});let _i;class yi{constructor(){if("undefined"==typeof window)return;_i=this;for(var D=arguments.length,P=new Array(D),H=0;H<D;H++)P[H]=arguments[H];const xe=Object.freeze(this.constructor.argsToParams(P));Object.defineProperties(this,{params:{value:xe,writable:!1,enumerable:!0,configurable:!0}});const ht=this._main(this.params);mt.promise.set(this,ht)}_main(D){let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(C=>{!C.backdrop&&C.allowOutsideClick&&V('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const D in C)rt(D),C.toast&&et(D),Pe(D)})(Object.assign({},P,D)),ke.currentInstance&&(ke.currentInstance._destroy(),cr()&&El()),ke.currentInstance=this;const H=Ol(D,P);pu(H),Object.freeze(H),ke.timeout&&(ke.timeout.stop(),delete ke.timeout),clearTimeout(ke.restoreFocusTimeout);const xe=ao(this);return Jo(this,H),mt.innerParams.set(this,H),Eu(this,xe,H)}then(D){return mt.promise.get(this).then(D)}finally(D){return mt.promise.get(this).finally(D)}}const Eu=(C,D,P)=>new Promise((H,xe)=>{const ht=xt=>{C.closePopup({isDismissed:!0,dismiss:xt})};sn.swalPromiseResolve.set(C,H),sn.swalPromiseReject.set(C,xe),D.confirmButton.onclick=()=>(C=>{const D=mt.innerParams.get(C);C.disableButtons(),D.input?xo(C,"confirm"):ra(C,!0)})(C),D.denyButton.onclick=()=>(C=>{const D=mt.innerParams.get(C);C.disableButtons(),D.returnInputValueOnDeny?xo(C,"deny"):na(C,!1)})(C),D.cancelButton.onclick=()=>((C,D)=>{C.disableButtons(),D(Xn.cancel)})(C,ht),D.closeButton.onclick=()=>ht(Xn.close),((C,D,P)=>{mt.innerParams.get(C).toast?vu(C,D,P):(wu(D),oo(D),Fs(C,D,P))})(C,D,ht),((C,D,P,H)=>{Nn(D),P.toast||(D.keydownHandler=xe=>ns(C,xe,H),D.keydownTarget=P.keydownListenerCapture?window:re(),D.keydownListenerCapture=P.keydownListenerCapture,D.keydownTarget.addEventListener("keydown",D.keydownHandler,{capture:D.keydownListenerCapture}),D.keydownHandlerAdded=!0)})(C,ke,P,ht),((C,D)=>{"select"===D.input||"radio"===D.input?Ra(C,D):["text","email","number","tel","textarea"].includes(D.input)&&(ge(D.inputValue)||K(D.inputValue))&&(es(at()),Pa(C,D))})(C,P),gu(P),Cu(ke,P,ht),uc(D,P),setTimeout(()=>{D.container.scrollTop=0})}),Ol=(C,D)=>{const P=(C=>{const D="string"==typeof C.template?document.querySelector(C.template):C.template;if(!D)return{};const P=D.content;return Ts(P),Object.assign(hu(P),dd(P),Xi(P),hd(P),fu(P),Cl(P,Xo))})(C),H=Object.assign({},ie,D,P,C);return H.showClass=Object.assign({},ie.showClass,H.showClass),H.hideClass=Object.assign({},ie.hideClass,H.hideClass),H},ao=C=>{const D={popup:re(),container:X(),actions:Pr(),confirmButton:at(),denyButton:tn(),cancelButton:Jt(),loader:ur(),closeButton:Qn(),validationMessage:dt(),progressSteps:Pn()};return mt.domCache.set(C,D),D},Cu=(C,D,P)=>{const H=$t();Qe(H),D.timer&&(C.timeout=new Co(()=>{P("timer"),delete C.timeout},D.timer),D.timerProgressBar&&(bt(H),dn(H,D,"timerProgressBar"),setTimeout(()=>{C.timeout&&C.timeout.running&&Jn(D.timer)})))},uc=(C,D)=>{if(!D.toast){if(!me(D.allowEnterKey))return Dn();md(C,D)||zr(0,-1,1)}},md=(C,D)=>D.focusDeny&&xn(C.denyButton)?(C.denyButton.focus(),!0):D.focusCancel&&xn(C.cancelButton)?(C.cancelButton.focus(),!0):!(!D.focusConfirm||!xn(C.confirmButton)||(C.confirmButton.focus(),0)),Dn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(yi.prototype,ja),Object.assign(yi,gd),Object.keys(ja).forEach(C=>{yi[C]=function(){if(_i)return _i[C](...arguments)}}),yi.DismissReason=Xn,yi.version="11.4.8";const Tn=yi;return Tn.default=Tn,Tn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(Me,U){var m=Me.createElement("style");if(Me.getElementsByTagName("head")[0].appendChild(m),m.styleSheet)m.styleSheet.disabled||(m.styleSheet.cssText=U);else try{m.innerHTML=U}catch(te){m.innerText=U}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(gt,Me,U)=>{"use strict";function ce(X,ue){var he={};for(var re in X)Object.prototype.hasOwnProperty.call(X,re)&&ue.indexOf(re)<0&&(he[re]=X[re]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(re=Object.getOwnPropertySymbols(X);Be<re.length;Be++)ue.indexOf(re[Be])<0&&Object.prototype.propertyIsEnumerable.call(X,re[Be])&&(he[re[Be]]=X[re[Be]])}return he}function me(X,ue,he,re){return new(he||(he=Promise))(function(fe,Dt){function on(at){try{dt(re.next(at))}catch(tn){Dt(tn)}}function Pn(at){try{dt(re.throw(at))}catch(tn){Dt(tn)}}function dt(at){at.done?fe(at.value):function Be(fe){return fe instanceof he?fe:new he(function(Dt){Dt(fe)})}(at.value).then(on,Pn)}dt((re=re.apply(X,ue||[])).next())})}function ve(X){return this instanceof ve?(this.v=X,this):new ve(X)}function Ae(X,ue,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,re=he.apply(X,ue||[]),fe=[];return Be={},Dt("next"),Dt("throw"),Dt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function Dt(fn){re[fn]&&(Be[fn]=function(ur){return new Promise(function(Jt,Pr){fe.push([fn,ur,Jt,Pr])>1||on(fn,ur)})})}function on(fn,ur){try{!function Pn(fn){fn.value instanceof ve?Promise.resolve(fn.value.v).then(dt,at):tn(fe[0][2],fn)}(re[fn](ur))}catch(Jt){tn(fe[0][3],Jt)}}function dt(fn){on("next",fn)}function at(fn){on("throw",fn)}function tn(fn,ur){fn(ur),fe.shift(),fe.length&&on(fe[0][0],fe[0][1])}}function et(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ue=X[Symbol.asyncIterator];return ue?ue.call(X):(X=function ie(X){var ue="function"==typeof Symbol&&Symbol.iterator,he=ue&&X[ue],re=0;if(he)return he.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&re>=X.length&&(X=void 0),{value:X&&X[re++],done:!X}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),he={},re("next"),re("throw"),re("return"),he[Symbol.asyncIterator]=function(){return this},he);function re(fe){he[fe]=X[fe]&&function(Dt){return new Promise(function(on,Pn){!function Be(fe,Dt,on,Pn){Promise.resolve(Pn).then(function(dt){fe({value:dt,done:on})},Dt)}(on,Pn,(Dt=X[fe](Dt)).done,Dt.value)})}}}U.d(Me,{FC:()=>Ae,KL:()=>et,_T:()=>ce,mG:()=>me,qq:()=>ve})},5e3:(gt,Me,U)=>{"use strict";U.d(Me,{$8M:()=>Ka,$Z:()=>Vv,AFp:()=>Dp,AaK:()=>me,CRH:()=>uI,CZH:()=>bh,CqO:()=>sS,EJc:()=>FA,F4k:()=>th,FYo:()=>mA,FiY:()=>Fi,G48:()=>OI,GfV:()=>Ut,Gpc:()=>K,JOm:()=>pe,LFG:()=>it,LSH:()=>Pu,Lbi:()=>bI,NdJ:()=>Zf,OlP:()=>zn,Oqu:()=>Gu,PXZ:()=>HA,Q6J:()=>_m,QGY:()=>Kf,Qsj:()=>_A,R0b:()=>Go,RDi:()=>ts,Rgc:()=>gp,SBq:()=>zc,Sil:()=>II,Suo:()=>Zm,TTD:()=>Xs,TgZ:()=>vm,Tol:()=>Tm,VLi:()=>c_,X6Q:()=>Ap,XFs:()=>ot,Xpm:()=>Rt,Y36:()=>eh,YKP:()=>_w,YNc:()=>VE,Yjl:()=>Hn,Yz7:()=>Jt,ZZ4:()=>kp,_Bn:()=>fw,_UZ:()=>zE,_Vd:()=>pw,_c5:()=>Xe,_uU:()=>gC,aQg:()=>Er,c2e:()=>EI,cJS:()=>an,cg1:()=>Pm,dDg:()=>SI,deG:()=>pg,dqk:()=>Xt,eFA:()=>n0,ekj:()=>Gv,g9A:()=>wI,h0i:()=>Zc,hGG:()=>ye,hij:()=>Jf,iGM:()=>lI,ifc:()=>bt,ip1:()=>Ip,kL8:()=>Vi,lG2:()=>rn,n5z:()=>wd,oAB:()=>se,q4F:()=>up,qLn:()=>Xr,qOj:()=>ME,qZA:()=>Uv,sBO:()=>a0,sIi:()=>gs,s_b:()=>gh,soG:()=>Zw,tBr:()=>ai,tb:()=>Ch,tp0:()=>ca,uIk:()=>Dv,vHH:()=>He,vpe:()=>dl,wAp:()=>Et,xp6:()=>Yy,z2F:()=>Th,zSh:()=>Kl,zs3:()=>ma});var m=U(7579),te=U(727),V=U(8306),ce=U(6451),oe=U(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function me(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(me).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=we({__forward_ref__:we});function K(s){return s.__forward_ref__=K,s.toString=function(){return me(this())},s}function ie(s){return Je(s)?s():s}function Je(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===K}class He extends Error{constructor(o,l){super(function qe(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}function Te(s,o){const l=o?` in ${o}`:"";throw new He(-201,`No provider for ${Ae(s)} found${l}`)}function dt(s,o){null==s&&function at(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function an(s){return{providers:s.providers||[],imports:s.imports||[]}}function $t(s){return Qn(s,Hr)||Qn(s,Nr)}function Qn(s,o){return s.hasOwnProperty(o)?s[o]:null}function cr(s){return s&&(s.hasOwnProperty(kr)||s.hasOwnProperty(bn))?s[kr]:null}const Hr=we({\u0275prov:we}),kr=we({\u0275inj:we}),Nr=we({ngInjectableDef:we}),bn=we({ngInjectorDef:we});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let $r;function Vn(s){const o=$r;return $r=s,o}function Gr(s,o,l){const c=$t(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ot.Optional?null:void 0!==o?o:void Te(me(s),"Injector")}function ft(s){return{toString:s}.toString()}var mn=(()=>((mn=mn||{})[mn.OnPush=0]="OnPush",mn[mn.Default=1]="Default",mn))(),bt=(()=>{return(s=bt||(bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",bt;var s})();const Qe="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,jn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Xt=Qe||"undefined"!=typeof global&&global||Tt||jn,Jn={},vt=[],fr=we({\u0275cmp:we}),Zt=we({\u0275dir:we}),ke=we({\u0275pipe:we}),Ne=we({\u0275mod:we}),nt=we({\u0275fac:we}),wt=we({__NG_ELEMENT_ID__:we});let Qt=0;function Rt(s){return ft(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||vt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||bt.Emulated,id:"c",styles:s.styles||vt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=Qt++,c.inputs=Ct(s.inputs,l),c.outputs=Ct(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(G):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(J):null,c})}function G(s){return nn(s)||function kn(s){return s[Zt]||null}(s)}function J(s){return function Vt(s){return s[ke]||null}(s)}const _e={};function se(s){return ft(()=>{const o={type:s.type,bootstrap:s.bootstrap||vt,declarations:s.declarations||vt,imports:s.imports||vt,exports:s.exports||vt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(_e[s.id]=s.type),o})}function Ct(s,o){if(null==s)return Jn;const l={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),l[d]=c,o&&(o[d]=p)}return l}const rn=Rt;function Hn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function nn(s){return s[fr]||null}function _n(s,o){const l=s[Ne]||null;if(!l&&!0===o)throw new Error(`Type ${me(s)} does not have '\u0275mod' property.`);return l}function mi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ii(s){return Array.isArray(s)&&!0===s[1]}function du(s){return 0!=(8&s.flags)}function Ds(s){return 2==(2&s.flags)}function Jo(s){return 1==(1&s.flags)}function Xn(s){return null!==s.template}function ic(s){return 0!=(512&s[2])}function qr(s,o){return s.hasOwnProperty(nt)?s[nt]:null}class Io{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Xs(){return Do}function Do(s){return s.type.prototype.ngOnChanges&&(s.setInput=oc),gu}function gu(){const s=As(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===Jn)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function oc(s,o,l,c){const d=As(s)||function si(s,o){return s[To]=o}(s,{previous:Jn,current:null}),p=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[l],I=v[E];p[E]=new Io(I&&I.currentValue,o,v===Jn),s[c]=o}Xs.ngInherit=!0;const To="__ngSimpleChanges__";function As(s){return s[To]||null}let Pa;function ts(s){Pa=s}function vn(s){return!!s.listen}const So={createRenderer:(s,o)=>function eo(){return void 0!==Pa?Pa:"undefined"!=typeof document?document:void 0}()};function sn(s){for(;Array.isArray(s);)s=s[0];return s}function to(s,o){return sn(o[s])}function Tr(s,o){return sn(o[s.index])}function ea(s,o){return s.data[o]}function mr(s,o){const l=o[s];return mi(l)?l:l[0]}function Rs(s){return 4==(4&s[2])}function ns(s){return 128==(128&s[2])}function Kr(s,o){return null==o?null:s[o]}function Ps(s){s[18]=0}function ks(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const yt={lFrame:so(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Va(){return yt.bindingsEnabled}function Re(){return yt.lFrame.lView}function Gt(){return yt.lFrame.tView}function In(){let s=ro();for(;null!==s&&64===s.type;)s=s.parent;return s}function ro(){return yt.lFrame.currentTNode}function Zr(s,o){const l=yt.lFrame;l.currentTNode=s,l.isParent=o}function Al(){return yt.lFrame.isParent}function Ua(){return yt.isInCheckNoChangesMode}function Os(s){yt.isInCheckNoChangesMode=s}function rs(){return yt.lFrame.bindingIndex++}function Yr(s){const o=yt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function $a(s,o){const l=yt.lFrame;l.bindingIndex=l.bindingRootIndex=s,xo(o)}function xo(s){yt.lFrame.currentDirectiveIndex=s}function na(){return yt.lFrame.currentQueryIndex}function Ga(s){yt.lFrame.currentQueryIndex=s}function Pl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ra(s,o,l){if(l&ot.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||l&ot.Host||(d=Pl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=yt.lFrame=vu();return c.currentTNode=o,c.lView=s,!0}function io(s){const o=vu(),l=s[1];yt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function vu(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?so(s):o}function so(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ia(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const wu=ia;function oo(){const s=ia();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function yr(){return yt.lFrame.selectedIndex}function Ls(s){yt.lFrame.selectedIndex=s}function On(){const s=yt.lFrame;return ea(s.tView,s.selectedIndex)}function is(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:R,ngOnDestroy:k}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),R&&((s.viewHooks||(s.viewHooks=[])).push(l,R),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,R)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(l,k)}}function Mo(s,o,l){bu(s,o,3,l)}function Ro(s,o,l,c){(3&s[2])===l&&bu(s,o,l,c)}function qn(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function bu(s,o,l,c){const p=null!=c?c:-1,v=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<p||-1==p)&&(gd(s,l,o,I),s[18]=(4294901760&s[18])+I+2),I++}function gd(s,o,l,c){const d=l[c]<0,p=l[c+1],E=s[d?-l[c]:l[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class yi{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function C(s,o,l){const c=vn(s);let d=0;for(;d<l.length;){const p=l[d];if("number"==typeof p){if(0!==p)break;d++;const v=l[d++],E=l[d++],I=l[d++];c?s.setAttribute(o,E,I,v):o.setAttributeNS(v,E,I)}else{const v=p,E=l[++d];P(v)?c&&s.setProperty(o,v,E):c?s.setAttribute(o,v,E):o.setAttribute(v,E),d++}}return d}function D(s){return 3===s||4===s||6===s}function P(s){return 64===s.charCodeAt(0)}function H(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?l=d:0===l||xe(s,l,d,null,-1===l||2===l?o[++c]:null)}}return s}function xe(s,o,l,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function ht(s){return-1!==s}function xt(s){return 32767&s}function En(s,o){let l=function Qr(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let ss=!0;function Sr(s){const o=ss;return ss=s,o}let yd=0;function Fn(s,o){const l=Wa(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,lo(c.data,s),lo(o,null),lo(c.blueprint,null));const d=ki(s,o),p=s.injectorIndex;if(ht(d)){const v=xt(d),E=En(d,o),I=E[1].data;for(let R=0;R<8;R++)o[p+R]=E[v+R]|I[v+R]}return o[p+8]=d,p}function lo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Wa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ki(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(l++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Po(s,o,l){!function sa(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(wt)&&(c=l[wt]),null==c&&(c=l[wt]=yd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,l)}function Vs(s,o,l){if(l&ot.Optional)return s;Te(o,"NodeInjector")}function dc(s,o,l,c){if(l&ot.Optional&&void 0===c&&(c=null),0==(l&(ot.Self|ot.Host))){const d=s[9],p=Vn(void 0);try{return d?d.get(o,c,l&ot.Optional):Gr(o,c,l&ot.Optional)}finally{Vn(p)}}return Vs(c,o,l)}function ko(s,o,l,c=ot.Default,d){if(null!==s){const p=function za(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(wt)?s[wt]:void 0;return"number"==typeof o?o>=0?255&o:hc:o}(l);if("function"==typeof p){if(!ra(o,s,c))return c&ot.Host?Vs(d,l,c):dc(o,l,c,d);try{const v=p(c);if(null!=v||c&ot.Optional)return v;Te(l)}finally{wu()}}else if("number"==typeof p){let v=null,E=Wa(s,o),I=-1,R=c&ot.Host?o[16][6]:null;for((-1===E||c&ot.SkipSelf)&&(I=-1===E?ki(s,o):o[E+8],-1!==I&&Ar(c,!1)?(v=o[1],E=xt(I),o=En(I,o)):E=-1);-1!==E;){const k=o[1];if(Ll(p,E,k.data)){const B=vd(E,o,l,v,c,R);if(B!==Us)return B}I=o[E+8],-1!==I&&Ar(c,o[1].data[E+8]===R)&&Ll(p,E,o)?(v=k,E=xt(I),o=En(I,o)):E=-1}}}return dc(o,l,c,d)}const Us={};function hc(){return new as(In(),Re())}function vd(s,o,l,c,d,p){const v=o[1],E=v.data[s+8],k=oa(E,v,l,null==c?Ds(E)&&ss:c!=v&&0!=(3&E.type),d&ot.Host&&p===E);return null!==k?os(o,v,k,E):Us}function oa(s,o,l,c,d){const p=s.providerIndexes,v=o.data,E=1048575&p,I=s.directiveStart,k=p>>20,q=d?E+k:s.directiveEnd;for(let Q=c?E:E+k;Q<q;Q++){const De=v[Q];if(Q<I&&l===De||Q>=I&&De.type===l)return Q}if(d){const Q=v[I];if(Q&&Xn(Q)&&Q.type===l)return I}return null}function os(s,o,l,c){let d=s[l];const p=o.data;if(function Eu(s){return s instanceof yi}(d)){const v=d;v.resolving&&function rt(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new He(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ae(p[l]));const E=Sr(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Vn(v.injectImpl):null;ra(s,c,ot.Default);try{d=s[l]=v.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Nl(s,o,l){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=Do(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}d&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,d),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==I&&Vn(I),Sr(E),v.resolving=!1,wu()}}return d}function Ll(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Ar(s,o){return!(s&ot.Self||s&ot.Host&&o)}class as{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return ko(this._tNode,this._lView,o,c,l)}}function wd(s){return ft(()=>{const o=s.prototype.constructor,l=o[nt]||Ln(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[nt]||Ln(d);if(p&&p!==l)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ln(s){return Je(s)?()=>{const o=Ln(ie(s));return o&&o()}:qr(s)}function Ka(s){return function Fl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let d=0;for(;d<c;){const p=l[d];if(D(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof l[d];)d++;else{if(p===o)return l[d+1];d+=2}}}return null}(In(),s)}const Za="__parameters__";function Wn(s,o,l){return ft(()=>{const c=function Bs(s){return function(...l){if(s){const c=s(...l);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return E.annotation=v,E;function E(I,R,k){const B=I.hasOwnProperty(Za)?I[Za]:Object.defineProperty(I,Za,{value:[]})[Za];for(;B.length<=k;)B.push(null);return(B[k]=B[k]||[]).push(v),I}}return l&&(d.prototype=Object.create(l.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class zn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Jt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pg=new zn("AnalyzeForEntryComponents");function Fr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Fr(c,o)):o!==s&&o.push(c)}return o}function Ni(s,o){s.forEach(l=>Array.isArray(l)?Ni(l,o):o(l))}function gc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ho(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vr(s,o,l){let c=Lo(s,o);return c>=0?s[1|c]=l:(c=~c,function mc(s,o,l,c){let d=s.length;if(d==o)s.push(l,c);else if(1===d)s.push(c,s[0]),s[0]=l;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function vc(s,o){const l=Lo(s,o);if(l>=0)return s[1|l]}function Lo(s,o){return function aa(s,o,l){let c=0,d=s.length>>l;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<l];if(o===v)return p<<l;v>o?d=p:c=p+1}return~(d<<l)}(s,o,1)}const la={},Qa="__NG_DI_FLAG__",Su="ngTempTokenPath",S=/\n/gm,j="__source",ne=we({provide:String,useValue:we});let le;function Le(s){const o=le;return le=s,o}function Ve(s,o=ot.Default){if(void 0===le)throw new He(203,"");return null===le?Gr(s,void 0,o):le.get(s,o&ot.Optional?null:void 0,o)}function it(s,o=ot.Default){return(function dn(){return $r}()||Ve)(ie(s),o)}const qt=it;function Ot(s){const o=[];for(let l=0;l<s.length;l++){const c=ie(s[l]);if(Array.isArray(c)){if(0===c.length)throw new He(900,"");let d,p=ot.Default;for(let v=0;v<c.length;v++){const E=c[v],I=Kn(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push(it(d,p))}else o.push(it(c))}return o}function rr(s,o){return s[Qa]=o,s.prototype[Qa]=o,s}function Kn(s){return s[Qa]}const ai=rr(Wn("Inject",s=>({token:s})),-1),Fi=rr(Wn("Optional"),8),ca=rr(Wn("SkipSelf"),4);class Md{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Vo(s){return s instanceof Md?s.changingThisBreaksApplicationSecurity:s}const Uo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var pn=(()=>((pn=pn||{})[pn.NONE=0]="NONE",pn[pn.HTML=1]="HTML",pn[pn.STYLE=2]="STYLE",pn[pn.SCRIPT=3]="SCRIPT",pn[pn.URL=4]="URL",pn[pn.RESOURCE_URL=5]="RESOURCE_URL",pn))();function Pu(s){const o=function nl(){const s=Re();return s&&s[12]}();return o?o.sanitize(pn.URL,s)||"":function el(s,o){const l=function xu(s){return s instanceof Md&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Vo(s):function Mu(s){return(s=String(s)).match(Uo)||s.match(lf)?s:"unsafe:"+s}(ve(s))}const yf="__ngContext__";function li(s,o){s[yf]=o}function vf(s){const o=function Hl(s){return s[yf]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ql(s){return s.ngOriginalError}function Mg(s,...o){s.error(...o)}class Xr{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function My(s){return s&&s.ngErrorLogger||Mg}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&ql(o);for(;l&&ql(l);)l=ql(l);return l||null}}const Ny=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Xt))();function g(s){return s instanceof Function?s():s}var pe=(()=>((pe=pe||{})[pe.Important=1]="Important",pe[pe.DashCase=2]="DashCase",pe))();function st(s,o){return undefined(s,o)}function Zn(s){const o=s[3];return ii(o)?o[3]:o}function ku(s){return Sf(s[13])}function Nu(s){return Sf(s[4])}function Sf(s){for(;null!==s&&!ii(s);)s=s[4];return s}function rl(s,o,l,c,d){if(null!=c){let p,v=!1;ii(c)?p=c:mi(c)&&(v=!0,c=c[0]);const E=sn(c);0===s&&null!==l?null==d?jy(o,l,E):po(o,l,E,d||null,!0):1===s&&null!==l?po(o,l,E,d||null,!0):2===s?function qy(s,o,l){const c=Og(s,o);c&&function fT(s,o,l,c){vn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,E,v):3===s&&o.destroyNode(E),null!=p&&function kb(s,o,l,c,d){const p=l[7];p!==sn(l)&&rl(o,s,c,p,d);for(let E=10;E<l.length;E++){const I=l[E];Lg(I[1],I,s,o,c,p)}}(o,s,p,l,d)}}function Vd(s,o,l){if(vn(s))return s.createElement(o,l);{const c=null!==l?function Ra(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Db(s,o){const l=s[9],c=l.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ks(d,-1)),l.splice(c,1)}function Vy(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const d=c[17];null!==d&&d!==s&&Db(d,c),o>0&&(s[l-1][4]=c[4]);const p=ho(s,10+o);!function Lr(s,o){Lg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Uy(s,o){if(!(256&o[2])){const l=o[11];vn(l)&&l.destroyNode&&Lg(s,o,l,3,null,null),function Ly(s){let o=s[13];if(!o)return By(s[1],s);for(;o;){let l=null;if(mi(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)mi(o)&&By(o[1],o),o=o[3];null===o&&(o=s),mi(o)&&By(o[1],o),l=o&&o[4]}o=l}}(o)}}function By(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Sb(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const d=o[l[c]];if(!(d instanceof yi)){const p=l[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=d[p[v]],I=p[v+1];try{I.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function Tb(s,o){const l=s.cleanup,c=o[7];let d=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const v=l[p+1],E="function"==typeof v?v(o):sn(o[v]),I=c[d=l[p+2]],R=l[p+3];"boolean"==typeof R?E.removeEventListener(l[p],I,R):R>=0?c[d=R]():c[d=-R].unsubscribe(),p+=2}else{const v=c[d=l[p+1]];l[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&vn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ii(o[3])){l!==o[3]&&Db(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ng(s,o,l){return function hT(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===bt.None||d===bt.Emulated)return null}return Tr(c,l)}(s,o.parent,l)}function po(s,o,l,c,d){vn(s)?s.insertBefore(o,l,c,d):o.insertBefore(l,c,d)}function jy(s,o,l){vn(s)?s.appendChild(o,l):o.appendChild(l)}function Ab(s,o,l,c,d){null!==c?po(s,o,l,c,d):jy(s,o,l)}function Og(s,o){return vn(s)?s.parentNode(o):o.parentNode}let Hy=function Mb(s,o,l){return 40&s.type?Tr(s,l):null};function Fg(s,o,l,c){const d=Ng(s,c,o),p=o[11],E=function xb(s,o,l){return Hy(s,o,l)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(l))for(let I=0;I<l.length;I++)Ab(p,d,l[I],E,!1);else Ab(p,d,l,E,!1)}function Bd(s,o){if(null!==o){const l=o.type;if(3&l)return Tr(o,s);if(4&l)return Gy(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Bd(s,c);{const d=s[o.index];return ii(d)?Gy(-1,d):sn(d)}}if(32&l)return st(o,s)()||sn(s[o.index]);{const c=Pb(s,o);return null!==c?Array.isArray(c)?c[0]:Bd(Zn(s[16]),c):Bd(s,o.next)}}return null}function Pb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Gy(s,o){const l=10+s+1;if(l<o.length){const c=o[l],d=c[1].firstChild;if(null!==d)return Bd(c,d)}return o[7]}function Wy(s,o,l,c,d,p,v){for(;null!=l;){const E=c[l.index],I=l.type;if(v&&0===o&&(E&&li(sn(E),c),l.flags|=4),64!=(64&l.flags))if(8&I)Wy(s,o,l.child,c,d,p,!1),rl(o,s,d,E,p);else if(32&I){const R=st(l,c);let k;for(;k=R();)rl(o,s,d,k,p);rl(o,s,d,E,p)}else 16&I?Ee(s,o,c,l,d,p):rl(o,s,d,E,p);l=v?l.projectionNext:l.next}}function Lg(s,o,l,c,d,p){Wy(l,c,s.firstChild,o,d,p,!1)}function Ee(s,o,l,c,d,p){const v=l[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let R=0;R<I.length;R++)rl(o,s,d,I[R],p);else Wy(s,o,I,v[3],d,p,!0)}function zy(s,o,l){vn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Wl(s,o,l){vn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function ga(s,o,l){let c=s.length;for(;;){const d=s.indexOf(o,l);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}l=d+1}}const Ky="ng-template";function _T(s,o,l){let c=0;for(;c<s.length;){let d=s[c++];if(l&&"class"===d){if(d=s[c],-1!==ga(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Nb(s){return 4===s.type&&s.value!==Ky}function yT(s,o,l){return o===(4!==s.type||l?s.value:Ky)}function Mf(s,o,l){let c=4;const d=s.attrs||[],p=function vT(s){for(let o=0;o<s.length;o++)if(D(s[o]))return o;return s.length}(d);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!yT(s,I,l)||""===I&&1===o.length){if(ui(c))return!1;v=!0}}else{const R=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!_T(s.attrs,R,l)){if(ui(c))return!1;v=!0}continue}const B=Ob(8&c?"class":I,d,Nb(s),l);if(-1===B){if(ui(c))return!1;v=!0;continue}if(""!==R){let q;q=B>p?"":d[B+1].toLowerCase();const Q=8&c?q:null;if(Q&&-1!==ga(Q,R,0)||2&c&&R!==q){if(ui(c))return!1;v=!0}}}}else{if(!v&&!ui(c)&&!ui(I))return!1;if(v&&ui(I))continue;v=!1,c=I|1&c}}return ui(c)||v}function ui(s){return 0==(1&s)}function Ob(s,o,l,c){if(null===o)return-1;let d=0;if(c||!l){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function il(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function wi(s,o,l=!1){for(let c=0;c<o.length;c++)if(Mf(s,o[c],l))return!0;return!1}function Zy(s,o){return s?":not("+o.trim()+")":o}function Lb(s){let o=s[0],l=1,c=2,d="",p=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const E=s[++l];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!ui(v)&&(o+=Zy(p,d),d=""),c=v,p=p||!ui(c);l++}return""!==d&&(o+=Zy(p,d)),o}const Ht={};function Yy(s){Qy(Gt(),Re(),yr()+s,Ua())}function Qy(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Mo(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Ro(o,p,0,l)}Ls(l)}function Pf(s,o){return s<<17|o<<2}function Bo(s){return s>>17&32767}function Xy(s){return 2|s}function sl(s){return(131068&s)>>2}function Vg(s,o){return-131069&s|o<<2}function Bg(s){return 1|s}function Yb(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const d=l[c],p=l[c+1];if(-1!==p){const v=s.data[p];Ga(d),v.contentQueries(2,o[p],p)}}}function qd(s,o,l,c,d,p,v,E,I,R){const k=o.blueprint.slice();return k[0]=d,k[2]=140|c,Ps(k),k[3]=k[15]=s,k[8]=l,k[10]=v||s&&s[10],k[11]=E||s&&s[11],k[12]=I||s&&s[12]||null,k[9]=R||s&&s[9]||null,k[6]=p,k[16]=2==o.type?s[16]:k,k}function Vf(s,o,l,c,d){let p=s.data[o];if(null===p)p=function Uf(s,o,l,c,d){const p=ro(),v=Al(),I=s.data[o]=function zg(s,o,l,c,d,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,l,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,l,c,d),function ja(){return yt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=d;const v=function Ao(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Zr(p,!0),p}function Wd(s,o,l,c){if(0===l)return-1;const d=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function zd(s,o,l){io(o);try{const c=s.viewQuery;null!==c&&Zd(1,c,l);const d=s.template;null!==d&&DT(s,o,d,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Yb(s,o),s.staticViewQueries&&Zd(2,s.viewQuery,l);const p=s.components;null!==p&&function IT(s,o){for(let l=0;l<o.length;l++)OT(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,oo()}}function Uu(s,o,l,c){const d=o[2];if(256==(256&d))return;io(o);const p=Ua();try{Ps(o),function Ba(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&DT(s,o,l,2,c);const v=3==(3&d);if(!p)if(v){const R=s.preOrderCheckHooks;null!==R&&Mo(o,R,null)}else{const R=s.preOrderHooks;null!==R&&Ro(o,R,0,null),qn(o,0)}if(function NT(s){for(let o=ku(s);null!==o;o=Nu(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const d=l[c],p=d[3];0==(1024&d[2])&&ks(p,1),d[2]|=1024}}}(o),function oE(s){for(let o=ku(s);null!==o;o=Nu(o))for(let l=10;l<o.length;l++){const c=o[l],d=c[1];ns(c)&&Uu(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Yb(s,o),!p)if(v){const R=s.contentCheckHooks;null!==R&&Mo(o,R)}else{const R=s.contentHooks;null!==R&&Ro(o,R,1),qn(o,1)}!function Zb(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const d=l[c];if(d<0)Ls(~d);else{const p=d,v=l[++c],E=l[++c];$a(v,p),E(2,o[p])}}}finally{Ls(-1)}}(s,o);const E=s.components;null!==E&&function bP(s,o){for(let l=0;l<o.length;l++)aE(s,o[l])}(o,E);const I=s.viewQuery;if(null!==I&&Zd(2,I,c),!p)if(v){const R=s.viewCheckHooks;null!==R&&Mo(o,R)}else{const R=s.viewHooks;null!==R&&Ro(o,R,2),qn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ks(o[3],-1))}finally{oo()}}function sv(s,o,l,c){const d=o[10],p=!Ua(),v=Rs(o);try{p&&!v&&d.begin&&d.begin(),v&&zd(s,o,c),Uu(s,o,l,c)}finally{p&&!v&&d.end&&d.end()}}function DT(s,o,l,c,d){const p=yr(),v=2&c;try{Ls(-1),v&&o.length>20&&Qy(s,o,20,Ua()),l(c,d)}finally{Ls(p)}}function Oc(s,o,l){!Va()||(function EP(s,o,l,c){const d=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||Fn(l,o),li(c,o);const v=l.initialInputs;for(let E=d;E<p;E++){const I=s.data[E],R=Xn(I);R&&uv(o,l,I);const k=os(o,s,E,l);li(k,o),null!==v&&PT(0,E-d,k,I,0,v),R&&(mr(l.index,o)[8]=k)}}(s,o,l,Tr(l,o)),128==(128&l.flags)&&function CP(s,o,l){const c=l.directiveStart,d=l.directiveEnd,v=l.index,E=function Rl(){return yt.lFrame.currentDirectiveIndex}();try{Ls(v);for(let I=c;I<d;I++){const R=s.data[I],k=o[I];xo(I),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&MT(R,k)}}finally{Ls(-1),xo(E)}}(s,o,l))}function Kd(s,o,l=Tr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?l(o,s):s[v];s[d++]=E}}}function Fc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bu(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bu(s,o,l,c,d,p,v,E,I,R){const k=20+c,B=k+d,q=function TT(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Ht);return l}(k,B),Q="function"==typeof R?R():R;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function ov(s,o,l,c){const d=dE(o);null===l?d.push(c):(d.push(l),s.firstCreatePass&&em(s).push(c,d.length-1))}function Kg(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,d):l[c]=[o,d]}return l}function Lc(s,o,l,c){let d=!1;if(Va()){const p=function IP(s,o,l){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];wi(l,v.selectors,!1)&&(d||(d=[]),Po(Fn(l,o),s,v.type),Xn(v)?(rE(s,l),d.unshift(v)):d.push(v))}return d}(s,o,l),v=null===c?null:{"":-1};if(null!==p){d=!0,av(l,s.data.length,p.length);for(let k=0;k<p.length;k++){const B=p[k];B.providersResolver&&B.providersResolver(B)}let E=!1,I=!1,R=Wd(s,o,p.length,null);for(let k=0;k<p.length;k++){const B=p[k];l.mergedAttrs=H(l.mergedAttrs,B.hostAttrs),lv(s,l,o,R,B),RT(R,B,v),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const q=B.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),R++}!function Zg(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let E=null,I=null;for(let R=o.directiveStart;R<c;R++){const k=d[R],B=k.inputs,q=null===p||Nb(o)?null:DP(B,p);v.push(q),E=Kg(B,R,E),I=Kg(k.outputs,R,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}(s,l)}v&&function iE(s,o,l){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=l[o[d+1]];if(null==p)throw new He(-301,!1);c.push(o[d],p)}}}(l,c,v)}return l.mergedAttrs=H(l.mergedAttrs,l.attrs),d}function Yg(s,o,l,c,d,p){const v=p.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function nE(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(c,d,v)}}function MT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function rE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function RT(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Xn(o)&&(l[""]=s)}}function av(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function lv(s,o,l,c,d){s.data[c]=d;const p=d.factory||(d.factory=qr(d.type)),v=new yi(p,Xn(d),null);s.blueprint[c]=v,l[c]=v,Yg(s,o,0,c,Wd(s,l,d.hostVars,Ht),d)}function uv(s,o,l){const c=Tr(o,s),d=Fc(l),p=s[10],v=Jg(s,qd(s,d,null,l.onPush?64:16,c,o,p,p.createRenderer(c,l),null,null));s[o.index]=v}function ol(s,o,l,c,d,p){const v=Tr(s,o);!function Qg(s,o,l,c,d,p,v){if(null==p)vn(s)?s.removeAttribute(o,d,l):o.removeAttribute(d);else{const E=null==v?ve(p):v(p,c||"",d);vn(s)?s.setAttribute(o,d,E,l):l?o.setAttributeNS(l,d,E):o.setAttribute(d,E)}}(o[11],v,p,s.value,l,c,d)}function PT(s,o,l,c,d,p){const v=p[o];if(null!==v){const E=c.setInput;for(let I=0;I<v.length;){const R=v[I++],k=v[I++],B=v[I++];null!==E?c.setInput(l,B,R,k):l[k]=B}}}function DP(s,o){let l=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===l&&(l=[]),l.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return l}function sE(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function aE(s,o){const l=mr(o,s);if(ns(l)){const c=l[1];80&l[2]?Uu(c,l,c.template,l[8]):l[5]>0&&jf(l)}}function jf(s){for(let c=ku(s);null!==c;c=Nu(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];Uu(v,p,v.template,p[8])}else p[5]>0&&jf(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const d=mr(l[c],s);ns(d)&&d[5]>0&&jf(d)}}function OT(s,o){const l=mr(o,s),c=l[1];(function lE(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),zd(c,l,l[8])}function Jg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Vc(s){for(;s;){s[2]|=64;const o=Zn(s);if(ic(s)&&!o)return s;s=o}return null}function cv(s,o,l){const c=o[10];c.begin&&c.begin();try{Uu(s,o,s.template,l)}catch(d){throw fE(o,d),d}finally{c.end&&c.end()}}function Xg(s){!function Hf(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=vf(l),d=c[1];sv(d,c,d.template,l)}}(s[8])}function Zd(s,o,l){Ga(0),o(s,l)}const cE=(()=>Promise.resolve(null))();function dE(s){return s[7]||(s[7]=[])}function em(s){return s.cleanup||(s.cleanup=[])}function fE(s,o){const l=s[9],c=l?l.get(Xr,null):null;c&&c.handleError(o)}function dv(s,o,l,c,d){for(let p=0;p<l.length;){const v=l[p++],E=l[p++],I=o[v],R=s.data[v];null!==R.setInput?R.setInput(I,d,c,E):I[E]=d}}function zl(s,o,l){const c=to(o,s);!function Ld(s,o,l){vn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function hv(s,o,l){let c=l?s.styles:null,d=l?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?d=ge(d,E):2==p&&(c=ge(c,E+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=d:s.classesWithoutHost=d}const pv=new zn("INJECTOR",-1);class gv{get(o,l=la){if(l===la){const c=new Error(`NullInjectorError: No provider for ${me(o)}!`);throw c.name="NullInjectorError",c}return l}}const Kl=new zn("Set Injector scope."),$f={},pE={};let mv;function _v(){return void 0===mv&&(mv=new gv),mv}function gE(s,o=null,l=null,c){const d=mE(s,o,l,c);return d._resolveInjectorDefTypes(),d}function mE(s,o=null,l=null,c){return new yv(s,l,o||_v(),c)}class yv{constructor(o,l,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&Ni(l,E=>this.processProvider(E,o,l)),Ni([o],E=>this.processInjectorType(E,[],p)),this.records.set(pv,Uc(void 0,this));const v=this.records.get(Kl);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:me(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=la,c=ot.Default){this.assertNotDestroyed();const d=Le(this),p=Vn(void 0);try{if(!(c&ot.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function bE(s){return"function"==typeof s||"object"==typeof s&&s instanceof zn}(o)&&$t(o);E=I&&this.injectableDefInScope(I)?Uc(tm(o),$f):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&ot.Self?_v():this.parent).get(o,l=c&ot.Optional&&l===la?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Su]=v[Su]||[]).unshift(me(o)),d)throw v;return function Ja(s,o,l,c){const d=s[Su];throw o[j]&&d.unshift(o[j]),s.message=function ua(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=me(o);if(Array.isArray(o))d=o.map(me).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):me(E)))}d=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${d}]: ${s.replace(S,"\n  ")}`}("\n"+s.message,d,l,c),s.ngTokenPath=d,s[Su]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Vn(p),Le(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(me(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processInjectorType(o,l,c){if(!(o=ie(o)))return!1;let d=cr(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,E=-1!==c.indexOf(v);if(void 0!==p&&(d=cr(p)),null==d)return!1;if(null!=d.imports&&!E){let k;c.push(v);try{Ni(d.imports,B=>{this.processInjectorType(B,l,c)&&(void 0===k&&(k=[]),k.push(B))})}finally{}if(void 0!==k)for(let B=0;B<k.length;B++){const{ngModule:q,providers:Q}=k[B];Ni(Q,De=>this.processProvider(De,q,Q||vt))}}this.injectorDefTypes.add(v);const I=qr(v)||(()=>new v);this.records.set(v,Uc(I,$f));const R=d.providers;if(null!=R&&!E){const k=o;Ni(R,B=>this.processProvider(B,k,R))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,c){let d=Bc(o=ie(o))?o:ie(o&&o.provide);const p=function _E(s,o,l){return vE(s)?Uc(void 0,s.useValue):Uc(yE(s),$f)}(o);if(Bc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Uc(void 0,$f,!0),v.factory=()=>Ot(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,l){return l.value===$f&&(l.value=pE,l.value=l.factory()),"object"==typeof l.value&&l.value&&function xP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ie(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function tm(s){const o=$t(s),l=null!==o?o.factory:qr(s);if(null!==l)return l;if(s instanceof zn)throw new He(204,!1);if(s instanceof Function)return function BT(s){const o=s.length;if(o>0)throw function us(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new He(204,!1);const l=function jr(s){const o=s&&(s[Hr]||s[Nr]);if(o){const l=function xi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new He(204,!1)}function yE(s,o,l){let c;if(Bc(s)){const d=ie(s);return qr(d)||tm(d)}if(vE(s))c=()=>ie(s.useValue);else if(function jT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ot(s.deps||[]));else if(function wE(s){return!(!s||!s.useExisting)}(s))c=()=>it(ie(s.useExisting));else{const d=ie(s&&(s.useClass||s.provide));if(!function AP(s){return!!s.deps}(s))return qr(d)||tm(d);c=()=>new d(...Ot(s.deps))}return c}function Uc(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function vE(s){return null!==s&&"object"==typeof s&&ne in s}function Bc(s){return"function"==typeof s}let ma=(()=>{class s{static create(l,c){var d;if(Array.isArray(l))return gE({name:""},c,l,"");{const p=null!==(d=l.name)&&void 0!==d?d:"";return gE({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=la,s.NULL=new gv,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>it(pv)}),s.__NG_ELEMENT_ID__=-1,s})();function RP(s,o){is(vf(s)[1],In())}function ME(s){let o=function zT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let d;if(Xn(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new He(903,"");d=o.\u0275dir}if(d){if(l){c.push(d);const v=s;v.inputs=RE(s.inputs),v.declaredInputs=RE(s.declaredInputs),v.outputs=RE(s.outputs);const E=d.hostBindings;E&&_a(s,E);const I=d.viewQuery,R=d.contentQueries;if(I&&kP(s,I),R&&ps(s,R),de(s.inputs,d.inputs),de(s.declaredInputs,d.declaredInputs),de(s.outputs,d.outputs),Xn(d)&&d.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(s),E===ME&&(l=!1)}}o=Object.getPrototypeOf(o)}!function PP(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=H(d.hostAttrs,l=H(l,d.hostAttrs))}}(c)}function RE(s){return s===Jn?{}:s===vt?[]:s}function kP(s,o){const l=s.viewQuery;s.viewQuery=l?(c,d)=>{o(c,d),l(c,d)}:o}function ps(s,o){const l=s.contentQueries;s.contentQueries=l?(c,d,p)=>{o(c,d,p),l(c,d,p)}:o}function _a(s,o){const l=s.hostBindings;s.hostBindings=l?(c,d)=>{o(c,d),l(c,d)}:o}let om=null;function Yd(){if(!om){const s=Xt.Symbol;if(s&&s.iterator)om=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(om=c)}}}return om}function gs(s){return!!Iv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Yd()in s)}function Iv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function bi(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Dv(s,o,l,c){const d=Re();return bi(d,rs(),o)&&(Gt(),ol(On(),d,s,o,l,c)),Dv}function VE(s,o,l,c,d,p,v,E){const I=Re(),R=Gt(),k=s+20,B=R.firstCreatePass?function KT(s,o,l,c,d,p,v,E,I){const R=o.consts,k=Vf(o,s,4,v||null,Kr(R,E));Lc(o,l,k,Kr(R,I)),is(o,k);const B=k.tViews=Bu(2,k,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R);return null!==o.queries&&(o.queries.template(o,k),B.queries=o.queries.embeddedTView(k)),k}(k,R,I,o,l,c,d,p,v):R.data[k];Zr(B,!1);const q=I[11].createComment("");Fg(R,I,q,B),li(q,I),Jg(I,I[k]=sE(q,I,q,B)),Jo(B)&&Oc(R,I,B),null!=v&&Kd(I,B,E)}function eh(s,o=ot.Default){const l=Re();return null===l?it(s,o):ko(In(),l,ie(s),o)}function Vv(){throw new Error("invalid")}function _m(s,o,l){const c=Re();return bi(c,rs(),o)&&function Ws(s,o,l,c,d,p,v,E){const I=Tr(o,l);let k,R=o.inputs;!E&&null!=R&&(k=R[c])?(dv(s,l,k,c,d),Ds(o)&&function Jb(s,o){const l=mr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function Qb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,vn(p)?p.setProperty(I,c,d):P(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}(Gt(),On(),c,s,o,c[11],l,!1),_m}function ym(s,o,l,c,d){const v=d?"class":"style";dv(s,l,o.inputs[v],v,c)}function vm(s,o,l,c){const d=Re(),p=Gt(),v=20+s,E=d[11],I=d[v]=Vd(E,o,function Jh(){return yt.lFrame.currentNamespace}()),R=p.firstCreatePass?function UP(s,o,l,c,d,p,v){const E=o.consts,R=Vf(o,s,2,d,Kr(E,p));return Lc(o,l,R,Kr(E,v)),null!==R.attrs&&hv(R,R.attrs,!1),null!==R.mergedAttrs&&hv(R,R.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,R),R}(v,p,d,0,o,l,c):p.data[v];Zr(R,!0);const k=R.mergedAttrs;null!==k&&C(E,I,k);const B=R.classes;null!==B&&Wl(E,I,B);const q=R.styles;return null!==q&&zy(E,I,q),64!=(64&R.flags)&&Fg(p,d,I,R),0===function Ns(){return yt.lFrame.elementDepthCount}()&&li(I,d),function Fa(){yt.lFrame.elementDepthCount++}(),Jo(R)&&(Oc(p,d,R),function Gg(s,o,l){if(du(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,l[p],p)}}}(p,R,d)),null!==c&&Kd(d,R),vm}function Uv(){let s=In();Al()?function xl(){yt.lFrame.isParent=!1}():(s=s.parent,Zr(s,!1));const o=s;!function La(){yt.lFrame.elementDepthCount--}();const l=Gt();return l.firstCreatePass&&(is(l,s),du(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function uc(s){return 0!=(16&s.flags)}(o)&&ym(l,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function md(s){return 0!=(32&s.flags)}(o)&&ym(l,o,Re(),o.stylesWithoutHost,!1),Uv}function zE(s,o,l,c){return vm(s,o,l,c),Uv(),zE}function Kf(s){return!!s&&"function"==typeof s.then}function th(s){return!!s&&"function"==typeof s.subscribe}const sS=th;function Zf(s,o,l,c){const d=Re(),p=Gt(),v=In();return function lS(s,o,l,c,d,p,v,E){const I=Jo(c),k=s.firstCreatePass&&em(s),B=o[8],q=dE(o);let Q=!0;if(3&c.type||E){const ze=Tr(c,o),ut=E?E(ze):ze,Ce=q.length,It=E?Wt=>E(sn(Wt[c.index])):c.index;if(vn(l)){let Wt=null;if(!E&&I&&(Wt=function aS(s,o,l,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===l&&d[p+1]===c){const E=o[7],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=p,Wt.__ngLastListenerFn__=p,Q=!1;else{p=jv(c,o,B,p,!1);const Mt=l.listen(ut,d,p);q.push(p,Mt),k&&k.push(d,It,Ce,Ce+1)}}else p=jv(c,o,B,p,!0),ut.addEventListener(d,p,v),q.push(p),k&&k.push(d,It,Ce,v)}else p=jv(c,o,B,p,!1);const De=c.outputs;let Fe;if(Q&&null!==De&&(Fe=De[d])){const ze=Fe.length;if(ze)for(let ut=0;ut<ze;ut+=2){const ti=o[Fe[ut]][Fe[ut+1]].subscribe(p),nu=q.length;q.push(p,ti),k&&k.push(d,c.index,nu,-(nu+1))}}}(p,d,d[11],v,s,o,!!l,c),Zf}function QE(s,o,l,c){try{return!1!==l(c)}catch(d){return fE(s,d),!1}}function jv(s,o,l,c,d){return function p(v){if(v===Function)return c;const E=2&s.flags?mr(s.index,o):o;0==(32&o[2])&&Vc(E);let I=QE(o,0,c,v),R=p.__ngNextListenerFn__;for(;R;)I=QE(o,0,R,v)&&I,R=R.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function nh(s,o,l,c,d){const p=s[l+1],v=null===o;let E=c?Bo(p):sl(p),I=!1;for(;0!==E&&(!1===I||v);){const k=s[E+1];fS(s[E],o)&&(I=!0,s[E+1]=c?Bg(k):Xy(k)),E=c?Bo(k):sl(k)}I&&(s[l+1]=c?Xy(p):Bg(p))}function fS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Lo(s,o)>=0}const wr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tC(s){return s.substring(wr.key,wr.keyEnd)}function nC(s,o){const l=wr.textEnd;return l===o?-1:(o=wr.keyEnd=function _S(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,wr.key=o,l),rh(s,o,l))}function rh(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Gv(s,o){return function $o(s,o,l,c){const d=Re(),p=Gt(),v=Yr(2);p.firstUpdatePass&&ir(p,s,v,c),o!==Ht&&bi(d,v,o)&&dC(p,p.data[yr()],d,d[11],s,d[v+1]=function fC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=me(Vo(s)))),s}(o,l),c,v)}(s,o,null,!0),Gv}function Tm(s){!function wa(s,o,l,c){const d=Gt(),p=Yr(2);d.firstUpdatePass&&ir(d,null,p,c);const v=Re();if(l!==Ht&&bi(v,p,l)){const E=d.data[yr()];if(pC(E,c)&&!lC(d,p)){let I=c?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(l=ge(I,l||"")),ym(d,E,v,l,c)}else!function cC(s,o,l,c,d,p,v,E){d===Ht&&(d=vt);let I=0,R=0,k=0<d.length?d[0]:null,B=0<p.length?p[0]:null;for(;null!==k||null!==B;){const q=I<d.length?d[I+1]:void 0,Q=R<p.length?p[R+1]:void 0;let Fe,De=null;k===B?(I+=2,R+=2,q!==Q&&(De=B,Fe=Q)):null===B||null!==k&&k<B?(I+=2,De=k):(R+=2,De=B,Fe=Q),null!==De&&dC(s,o,l,c,De,Fe,v,E),k=I<d.length?d[I]:null,B=R<p.length?p[R]:null}}(d,E,v,v[11],v[p+1],v[p+1]=function CS(s,o,l){if(null==l||""===l)return vt;const c=[],d=Vo(l);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(s,o,l),c,p)}}(vr,va,s,!0)}function va(s,o){for(let l=function gS(s){return function rC(s){wr.key=0,wr.keyEnd=0,wr.value=0,wr.valueEnd=0,wr.textEnd=s.length}(s),nC(s,rh(s,0,wr.textEnd))}(o);l>=0;l=nC(o,l))vr(s,tC(o),!0)}function lC(s,o){return o>=s.expandoStartIndex}function ir(s,o,l,c){const d=s.data;if(null===d[l+1]){const p=d[yr()],v=lC(s,l);pC(p,c)&&null===o&&!v&&(o=!1),o=function qv(s,o,l,c){const d=function ta(s){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(l=Qf(l=zv(null,s,o,l,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(l=zv(d,s,o,l,c),null===p){let I=function Wv(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==sl(c))return s[Bo(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=zv(null,s,o,I[1],c),I=Qf(I,o.attrs,c),function bS(s,o,l,c){s[Bo(l?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function ES(s,o,l){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Qf(c,s[p].hostAttrs,l);return Qf(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(d,p,o,c),function Hv(s,o,l,c,d,p){let v=p?o.classBindings:o.styleBindings,E=Bo(v),I=sl(v);s[c]=l;let k,R=!1;if(Array.isArray(l)){const B=l;k=B[1],(null===k||Lo(B,k)>0)&&(R=!0)}else k=l;if(d)if(0!==I){const q=Bo(s[E+1]);s[c+1]=Pf(q,E),0!==q&&(s[q+1]=Vg(s[q+1],c)),s[E+1]=function Bb(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Pf(E,0),0!==E&&(s[E+1]=Vg(s[E+1],c)),E=c;else s[c+1]=Pf(I,0),0===E?E=c:s[I+1]=Vg(s[I+1],c),I=c;R&&(s[c+1]=Xy(s[c+1])),nh(s,k,c,!0),nh(s,k,c,!1),function $v(s,o,l,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Lo(p,o)>=0&&(l[c+1]=Bg(l[c+1]))}(o,k,s,c,p),v=Pf(E,I),p?o.classBindings=v:o.styleBindings=v}(d,p,o,l,v,c)}}function zv(s,o,l,c,d){let p=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(p=o[E],c=Qf(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(l.directiveStylingLast=E),c}function Qf(s,o,l){const c=l?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vr(s,v,!!l||o[++p]))}return void 0===s?null:s}function dC(s,o,l,c,d,p,v,E){if(!(3&o.type))return;const I=s.data,R=I[E+1];Sm(function Ug(s){return 1==(1&s)}(R)?hC(I,o,l,d,sl(R),v):void 0)||(Sm(p)||function Jy(s){return 2==(2&s)}(R)&&(p=hC(I,null,l,d,E,v)),function mT(s,o,l,c,d){const p=vn(s);if(o)d?p?s.addClass(l,c):l.classList.add(c):p?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:pe.DashCase;if(null==d)p?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),v|=pe.Important),p?s.setStyle(l,c,d,v):l.style.setProperty(c,d,E?"important":"")}}}(c,v,to(yr(),l),d,p))}function hC(s,o,l,c,d,p){const v=null===o;let E;for(;d>0;){const I=s[d],R=Array.isArray(I),k=R?I[1]:I,B=null===k;let q=l[d+1];q===Ht&&(q=B?vt:void 0);let Q=B?vc(q,c):k===c?q:void 0;if(R&&!Sm(Q)&&(Q=vc(I,c)),Sm(Q)&&(E=Q,v))return E;const De=s[d+1];d=v?Bo(De):sl(De)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=vc(I,c))}return E}function Sm(s){return void 0!==s}function pC(s,o){return 0!=(s.flags&(o?16:32))}function gC(s,o=""){const l=Re(),c=Gt(),d=s+20,p=c.firstCreatePass?Vf(c,d,1,o,null):c.data[d],v=l[d]=function Fd(s,o){return vn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Fg(c,l,v,p),Zr(p,!1)}function Gu(s){return Jf("",s,""),Gu}function Jf(s,o,l){const c=Re(),d=function Zl(s,o,l,c){return bi(s,rs(),l)?o+ve(l)+c:Ht}(c,s,o,l);return d!==Ht&&zl(c,yr(),d),Jf}const Gc=void 0;var ew=["en",[["a","p"],["AM","PM"],Gc],[["AM","PM"],Gc,Gc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gc,"{1} 'at' {0}",Gc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ll(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let oh={};function Pm(s){const o=function NS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Xf(o);if(l)return l;const c=o.split("-")[0];if(l=Xf(c),l)return l;if("en"===c)return ew;throw new Error(`Missing locale data for the locale "${s}".`)}function Vi(s){return Pm(s)[Et.PluralCase]}function Xf(s){return s in oh||(oh[s]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[s]),oh[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const km="en-US";let ba=km;function Lm(s,o,l,c,d){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)Lm(s[p],o,l,c,d);else{const p=Gt(),v=Re();let E=Bc(s)?s:ie(s.provide),I=yE(s);const R=In(),k=1048575&R.providerIndexes,B=R.directiveStart,q=R.providerIndexes>>20;if(Bc(s)||!s.multi){const Q=new yi(I,d,eh),De=dw(E,o,d?k:k+q,B);-1===De?(Po(Fn(R,v),p,E),Vm(p,s,o.length),o.push(E),R.directiveStart++,R.directiveEnd++,d&&(R.providerIndexes+=1048576),l.push(Q),v.push(Q)):(l[De]=Q,v[De]=Q)}else{const Q=dw(E,o,k+q,B),De=dw(E,o,k,k+q),Fe=Q>=0&&l[Q],ze=De>=0&&l[De];if(d&&!ze||!d&&!Fe){Po(Fn(R,v),p,E);const ut=function hA(s,o,l,c,d){const p=new yi(s,l,eh);return p.multi=[],p.index=o,p.componentProviders=0,qC(p,d,c&&!l),p}(d?dA:cA,l.length,d,c,I);!d&&ze&&(l[De].providerFactory=ut),Vm(p,s,o.length,0),o.push(E),R.directiveStart++,R.directiveEnd++,d&&(R.providerIndexes+=1048576),l.push(ut),v.push(ut)}else Vm(p,s,Q>-1?Q:De,qC(l[d?De:Q],I,!d&&c));!d&&c&&ze&&l[De].componentProviders++}}}function Vm(s,o,l,c){const d=Bc(o),p=function SP(s){return!!s.useClass}(o);if(d||p){const I=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(I){const R=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const k=R.indexOf(l);-1===k?R.push(l,[c,I]):R[k+1].push(c,I)}else R.push(l,I)}}}function qC(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function dw(s,o,l,c){for(let d=l;d<c;d++)if(o[d]===s)return d;return-1}function cA(s,o,l,c){return hw(this.multi,[])}function dA(s,o,l,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=os(l,l[1],this.providerFactory.index,c);p=E.slice(0,v),hw(d,p);for(let I=v;I<E.length;I++)p.push(E[I])}else p=[],hw(d,p);return p}function hw(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function fw(s,o=[]){return l=>{l.providersResolver=(c,d)=>function Jl(s,o,l){const c=Gt();if(c.firstCreatePass){const d=Xn(s);Lm(l,c.data,c.blueprint,d,!0),Lm(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class WC{}class pA{resolveComponentFactory(o){throw function fA(s){const o=Error(`No component factory found for ${me(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let pw=(()=>{class s{}return s.NULL=new pA,s})();function gA(){return ch(In(),Re())}function ch(s,o){return new zc(Tr(s,o))}let zc=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=gA,s})();function KC(s){return s instanceof zc?s.nativeElement:s}class mA{}let _A=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function lt(){const s=Re(),l=mr(In().index,s);return function Xl(s){return s[11]}(mi(l)?l:s)}(),s})(),gw=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class Ut{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const up=new Ut("13.3.1"),cp={};function Wu(s,o,l,c,d=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(sn(p)),ii(p))for(let E=10;E<p.length;E++){const I=p[E],R=I[1].firstChild;null!==R&&Wu(I[1],I,R,c)}const v=l.type;if(8&v)Wu(s,o,l.child,c);else if(32&v){const E=st(l,o);let I;for(;I=E();)c.push(I)}else if(16&v){const E=Pb(o,l);if(Array.isArray(E))c.push(...E);else{const I=Zn(o[16]);Wu(I[1],I,E,c,!0)}}l=d?l.projectionNext:l.next}return c}class dp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Wu(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ii(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Vy(o,c),ho(l,c))}this._attachedToViewContainer=!1}Uy(this._lView[1],this._lView)}onDestroy(o){ov(this._lView[1],this._lView,null,o)}markForCheck(){Vc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function uE(s,o,l){Os(!0);try{cv(s,o,l)}finally{Os(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new He(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pg(s,o){Lg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new He(902,"");this._appRef=o}}class mw extends dp{constructor(o){super(o),this._view=o}detectChanges(){Xg(this._view)}checkNoChanges(){!function LT(s){Os(!0);try{Xg(s)}finally{Os(!1)}}(this._view)}get context(){return null}}class ZC extends pw{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=nn(o);return new dh(l,this.ngModule)}}function YC(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class dh extends WC{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Vb(s){return s.map(Lb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return YC(this.componentDef.inputs)}get outputs(){return YC(this.componentDef.outputs)}create(o,l,c,d){const p=(d=d||this.ngModule)?function Ci(s,o){return{get:(l,c,d)=>{const p=s.get(l,cp,d);return p!==cp||c===cp?p:o.get(l,c,d)}}}(o,d.injector):o,v=p.get(mA,So),E=p.get(gw,null),I=v.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",k=c?function Wg(s,o,l){if(vn(s))return s.selectRootElement(o,l===bt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Vd(v.createRenderer(null,this.componentDef),R,function yA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),B=this.componentDef.onPush?576:528,q=function WT(s,o){return{components:[],scheduler:s||Ny,clean:cE,playerHandler:o||null,flags:0}}(),Q=Bu(0,null,null,1,0,null,null,null,null,null),De=qd(null,Q,q,B,null,null,v,I,E,p);let Fe,ze;io(De);try{const ut=function AE(s,o,l,c,d,p){const v=l[1];l[20]=s;const I=Vf(v,20,2,"#host",null),R=I.mergedAttrs=o.hostAttrs;null!==R&&(hv(I,R,!0),null!==s&&(C(d,s,R),null!==I.classes&&Wl(d,s,I.classes),null!==I.styles&&zy(d,s,I.styles)));const k=c.createRenderer(s,o),B=qd(l,Fc(o),null,o.onPush?64:16,l[20],I,c,k,p||null,null);return v.firstCreatePass&&(Po(Fn(I,l),v,o.type),rE(v,I),av(I,l.length,1)),Jg(l,B),l[20]=B}(k,this.componentDef,De,v,I);if(k)if(c)C(I,k,["ng-version",up.full]);else{const{attrs:Ce,classes:It}=function Ub(s){const o=[],l=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&l.push(p);else{if(!ui(d))break;d=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ce&&C(I,k,Ce),It&&It.length>0&&Wl(I,k,It.join(" "))}if(ze=ea(Q,20),void 0!==l){const Ce=ze.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Wt=l[It];Ce.push(null!=Wt?Array.from(Wt):null)}}Fe=function xE(s,o,l,c,d){const p=l[1],v=function xT(s,o,l){const c=In();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),lv(s,c,o,Wd(s,o,1,null),l));const d=os(o,s,c.directiveStart,c);li(d,o);const p=Tr(c,o);return p&&li(p,o),d}(p,l,o);if(c.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=In();o.contentQueries(1,v,I.directiveStart)}const E=In();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ls(E.index),Yg(l[1],E,0,E.directiveStart,E.directiveEnd,o),MT(o,v)),v}(ut,this.componentDef,De,q,[RP]),zd(Q,De,null)}finally{oo()}return new vA(this.componentType,Fe,ch(ze,De),De,ze)}}class vA extends class Um{}{constructor(o,l,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new mw(d),this.componentType=o}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Zc{}class _w{}const hh=new Map;class Bi extends Zc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ZC(this);const c=_n(o);this._bootstrapComponents=g(c.bootstrap),this._r3Injector=mE(o,l,[{provide:Zc,useValue:this},{provide:pw,useValue:this.componentFactoryResolver}],me(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ma.THROW_IF_NOT_FOUND,c=ot.Default){return o===ma||o===Zc||o===pv?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Hm extends _w{constructor(o){super(),this.moduleType=o,null!==_n(o)&&function jm(s){const o=new Set;!function l(c){const d=_n(c,!0),p=d.id;null!==p&&(function Bm(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${me(o)} vs ${me(o.name)}`)}(p,hh.get(p),c),hh.set(p,c));const v=g(d.imports);for(const E of v)o.has(E)||(o.add(E),l(E))}(s)}(o)}create(o){return new Bi(this.moduleType,o)}}function Qc(s){return o=>{setTimeout(s,void 0,o)}}const dl=class ji extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var d,p,v;let E=o,I=l||(()=>null),R=c;if(o&&"object"==typeof o){const B=o;E=null===(d=B.next)||void 0===d?void 0:d.bind(B),I=null===(p=B.error)||void 0===p?void 0:p.bind(B),R=null===(v=B.complete)||void 0===v?void 0:v.bind(B)}this.__isAsync&&(I=Qc(I),E&&(E=Qc(E)),R&&(R=Qc(R)));const k=super.subscribe({next:E,error:I,complete:R});return o instanceof te.w0&&o.add(k),k}};function pp(){return this._results[Yd()]()}class Dw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Yd(),c=Dw.prototype;c[l]||(c[l]=pp)}get changes(){return this._changes||(this._changes=new dl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const d=Fr(o);(this._changesDetected=!function pc(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(l&&(d=l(d),p=l(p)),p!==d)return!1}return!0}(c._results,d,l))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Tw,s})();const Gm=gp,qm=class extends Gm{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=qd(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(l)),zd(l,c,o),new dp(c)}};function Tw(){return ph(In(),Re())}function ph(s,o){return 4&s.type?new qm(o,s,ch(s,o)):null}let gh=(()=>{class s{}return s.__NG_ELEMENT_ID__=Sw,s})();function Sw(){return xw(In(),Re())}const sI=gh,Aw=class extends sI{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return ch(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){const o=ki(this._hostTNode,this._hostLView);if(ht(o)){const l=En(o,this._hostLView),c=xt(o);return new as(l[1].data[c+8],l)}return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=oI(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const d=o.createEmbeddedView(l||{});return this.insert(d,c),d}createComponent(o,l,c,d,p){const v=o&&!function Ya(s){return"function"==typeof s}(o);let E;if(v)E=l;else{const B=l||{};E=B.index,c=B.injector,d=B.projectableNodes,p=B.ngModuleRef}const I=v?o:new dh(nn(o)),R=c||this.parentInjector;if(!p&&null==I.ngModule){const q=(v?R:this.parentInjector).get(Zc,null);q&&(p=q)}const k=I.create(R,d,void 0,p);return this.insert(k.hostView,E),k}insert(o,l){const c=o._lView,d=c[1];if(function Na(s){return ii(s[3])}(c)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const B=c[3],q=new Aw(B,B[6],B[3]);q.detach(q.indexOf(o))}}const p=this._adjustIndex(l),v=this._lContainer;!function kg(s,o,l,c){const d=10+c,p=l.length;c>0&&(l[d-1][4]=o),c<p-10?(o[4]=l[d],gc(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function Ud(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,v,p);const E=Gy(p,v),I=c[11],R=Og(I,v[7]);return null!==R&&function xf(s,o,l,c,d,p){c[0]=d,c[6]=o,Lg(s,c,l,1,d,p)}(d,v[6],I,c,R,E),o.attachToViewContainerRef(),gc(Wm(v),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=oI(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Vy(this._lContainer,l);c&&(ho(Wm(this._lContainer),l),Uy(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Vy(this._lContainer,l);return c&&null!=ho(Wm(this._lContainer),l)?new dp(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function oI(s){return s[8]}function Wm(s){return s[8]||(s[8]=[])}function xw(s,o){let l;const c=o[s.index];if(ii(c))l=c;else{let d;if(8&s.type)d=sn(c);else{const p=o[11];d=p.createComment("");const v=Tr(s,o);po(p,Og(p,v),d,function pT(s,o){return vn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=l=sE(c,o,d,s),Jg(o,l)}return new Aw(l,s,o)}class mp{constructor(o){this.queryList=o,this.matches=null}clone(){return new mp(this.queryList)}setDirty(){this.queryList.setDirty()}}class _p{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,d=[];for(let p=0;p<c;p++){const v=l.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new _p(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Qm(o,l).matches&&this.queries[l].setDirty()}}class zm{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class Ur{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const d=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new Ur(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ei{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new ei(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,l,Km(l,p)),this.matchTNodeWithReadOption(o,l,oa(l,o,p,!1,!1))}else c===gp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,oa(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===zc||d===gh||d===gp&&4&l.type)this.addMatch(l.index,-2);else{const p=oa(l,o,d,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Km(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function AA(s,o,l,c){return-1===l?function Rw(s,o){return 11&s.type?ch(s,o):4&s.type?ph(s,o):null}(o,s):-2===l?function xA(s,o,l){return l===zc?ch(o,s):l===gp?ph(o,s):l===gh?xw(o,s):void 0}(s,o,c):os(s,s[1],l,o)}function Pw(s,o,l,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=l.matches,E=[];for(let I=0;I<v.length;I+=2){const R=v[I];E.push(R<0?null:AA(o,p[R],v[I+1],l.metadata.read))}d.matches=E}return d.matches}function kw(s,o,l,c){const d=s.queries.getByIndex(l),p=d.matches;if(null!==p){const v=Pw(s,o,d,l);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(v[E/2]);else{const R=p[E+1],k=o[-I];for(let B=10;B<k.length;B++){const q=k[B];q[17]===q[3]&&kw(q[1],q,R,c)}if(null!==k[9]){const B=k[9];for(let q=0;q<B.length;q++){const Q=B[q];kw(Q[1],Q,R,c)}}}}}return c}function lI(s){const o=Re(),l=Gt(),c=na();Ga(c+1);const d=Qm(l,c);if(s.dirty&&Rs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?kw(l,o,c,[]):Pw(l,o,d,c);s.reset(p,KC),s.notifyOnChanges()}return!0}return!1}function Zm(s,o,l,c){const d=Gt();if(d.firstCreatePass){const p=In();(function cI(s,o,l){null===s.queries&&(s.queries=new Ur),s.queries.track(new ei(o,l))})(d,new zm(o,l,c),p.index),function Ym(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(d,s),2==(2&l)&&(d.staticContentQueries=!0)}!function Fw(s,o,l){const c=new Dw(4==(4&l));ov(s,o,c,c.destroy),null===o[19]&&(o[19]=new _p),o[19].queries.push(new mp(c))}(d,Re(),l)}function uI(){return function Ow(s,o){return s[19].queries[o].queryList}(Re(),na())}function Qm(s,o){return s.queries.getByIndex(o)}function hl(...s){}const Ip=new zn("Application Initializer");let bh=(()=>{class s{constructor(l){this.appInits=l,this.resolve=hl,this.reject=hl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Kf(p))l.push(p);else if(sS(p)){const v=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(d=>{this.reject(d)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(it(Ip,8))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Dp=new zn("AppId",{providedIn:"root",factory:function Kw(){return`${Eh()}${Eh()}${Eh()}`}});function Eh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wI=new zn("Platform Initializer"),bI=new zn("Platform ID"),Ch=new zn("appBootstrapListener");let EI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();const Zw=new zn("LocaleId",{providedIn:"root",factory:()=>qt(Zw,ot.Optional|ot.SkipSelf)||function CI(){return"undefined"!=typeof $localize&&$localize.locale||km}()}),FA=new zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Zu{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let II=(()=>{class s{compileModuleSync(l){return new Hm(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=g(_n(l).declarations).reduce((v,E)=>{const I=nn(E);return I&&v.push(new dh(I)),v},[]);return new Zu(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ih=(()=>Promise.resolve(0))();function Yw(s){"undefined"==typeof Zone?Ih.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Go{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dl(!1),this.onMicrotaskEmpty=new dl(!1),this.onStable=new dl(!1),this.onError=new dl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&l,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function VA(){let s=Xt.requestAnimationFrame,o=Xt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Qw(s){const o=()=>{!function TI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Xt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Tp(s),s.isCheckStableRunning=!0,u_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Tp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,d,p,v,E)=>{try{return Jw(s),l.invokeTask(d,p,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Xw(s)}},onInvoke:(l,c,d,p,v,E,I)=>{try{return Jw(s),l.invoke(d,p,v,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Xw(s)}},onHasTask:(l,c,d,p)=>{l.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Tp(s),u_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,d,p)=>(l.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Go.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Go.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,UA,hl,hl);try{return p.runTask(v,l,c)}finally{p.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const UA={};function u_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Tp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Jw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Xw(s){s._nesting--,u_(s)}class e0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dl,this.onMicrotaskEmpty=new dl,this.onStable=new dl,this.onError=new dl}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,d){return o.apply(l,c)}}let SI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Go.assertNotInAngularZone(),Yw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yw(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:d})}whenStable(l,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,d){return[]}}return s.\u0275fac=function(l){return new(l||s)(it(Go))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),AI=(()=>{class s{constructor(){this._applications=new Map,td.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return td.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();class BA{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function c_(s){td=s}let Ks,td=new BA;const Dh=new zn("AllowMultipleToken");class HA{constructor(o,l){this.name=o,this.token=l}}function n0(s,o,l=[]){const c=`Platform: ${o}`,d=new zn(c);return(p=[])=>{let v=xI();if(!v||v.injector.get(Dh,!1))if(s)s(l.concat(p).concat({provide:d,useValue:!0}));else{const E=l.concat(p).concat({provide:d,useValue:!0},{provide:Kl,useValue:"platform"});!function Br(s){if(Ks&&!Ks.destroyed&&!Ks.injector.get(Dh,!1))throw new He(400,"");Ks=s.get(MI);const o=s.get(wI,null);o&&o.forEach(l=>l())}(ma.create({providers:E,name:c}))}return function $A(s){const o=xI();if(!o)throw new He(401,"");return o}()}}function xI(){return Ks&&!Ks.destroyed?Ks:null}let MI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const E=function RI(s,o){let l;return l="noop"===s?new e0:("zone.js"===s?void 0:s)||new Go({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Go,useValue:E}];return E.run(()=>{const R=ma.create({providers:I,parent:this.injector,name:l.moduleType.name}),k=l.create(R),B=k.injector.get(Xr,null);if(!B)throw new He(402,"");return E.runOutsideAngular(()=>{const q=E.onError.subscribe({next:Q=>{B.handleError(Q)}});k.onDestroy(()=>{d_(this._modules,k),q.unsubscribe()})}),function PI(s,o,l){try{const c=l();return Kf(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(B,E,()=>{const q=k.injector.get(bh);return q.runInitializers(),q.donePromise.then(()=>(function ul(s){dt(s,"Expected localeId to be defined"),"string"==typeof s&&(ba=s.toLowerCase().replace(/_/g,"-"))}(k.injector.get(Zw,km)||km),this._moduleDoBootstrap(k),k))})})}bootstrapModule(l,c=[]){const d=r0({},c);return function t0(s,o,l){const c=new Hm(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(l){const c=l.injector.get(Th);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!l.instance.ngDoBootstrap)throw new He(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(it(ma))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();function r0(s,o){return Array.isArray(o)?o.reduce(r0,s):Object.assign(Object.assign({},s),o)}let Th=(()=>{class s{constructor(l,c,d,p,v){this._zone=l,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new V.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),I=new V.y(R=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Go.assertNotInAngularZone(),Yw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{Go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{k.unsubscribe(),B.unsubscribe()}});this.isStable=(0,ce.T)(E,I.pipe((0,oe.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new He(405,"");let d;d=l instanceof WC?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(d.componentType);const p=function Sp(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Zc),E=d.create(ma.NULL,[],c||d.selector,p),I=E.location.nativeElement,R=E.injector.get(SI,null),k=R&&E.injector.get(AI);return R&&k&&k.registerApplication(I,R),E.onDestroy(()=>{this.detachView(E.hostView),d_(this.components,E),k&&k.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new He(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;d_(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Ch,[]).concat(this._bootstrapListeners).forEach(d=>d(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(it(Go),it(ma),it(Xr),it(pw),it(bh))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function d_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let NI=!0,h_=!1;function Ap(){return h_=!0,NI}function OI(){if(h_)throw new Error("Cannot enable prod mode after platform setup.");NI=!1}let a0=(()=>{class s{}return s.__NG_ELEMENT_ID__=f_,s})();function f_(s){return function GA(s,o,l){if(Ds(s)&&!l){const c=mr(s.index,o);return new dp(c,c)}return 47&s.type?new dp(o[16],o):null}(In(),Re(),16==(16&s))}class y_{constructor(){}supports(o){return gs(o)}create(o){return new YA(o)}}const ZA=(s,o)=>o;class YA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ZA}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,d=0,p=null;for(;l||c;){const v=!c||l&&l.currentIndex<jI(c,d,p)?l:c,E=jI(v,d,p),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)d++;else{p||(p=[]);const R=E-d,k=I-d;if(R!=k){for(let q=0;q<R;q++){const Q=q<p.length?p[q]:p[q]=0,De=Q+q;k<=De&&De<R&&(p[q]=Q+1)}p[v.previousIndex]=k-R}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!gs(o))throw new He(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,p,v,E)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,v,E),c=!0),l=l._next}else d=0,function Cv(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Yd()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(d,E),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,E,v,d)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,d),c=!0),l=l._next,d++}),this.length=d;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,d)):o=this._addAfter(new BI(l,c),p,d),o}_verifyReinsertion(o,l,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const d=null===l?this._itHead:l._next;return o._next=d,o._prev=l,null===d?this._itTail=o:d._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Pp),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class BI{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Pp{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new QA,this.map.set(l,c)),c.add(o)}get(o,l){const d=this.map.get(o);return d?d.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jI(s,o,l){const c=s.previousIndex;if(null===c)return c;let d=0;return l&&c<l.length&&(d=l[c]),c+o+d}class d0{constructor(){}supports(o){return o instanceof Map||Iv(o)}create(){return new Di}}class Di{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Iv(o)))throw new He(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(l&&l.key===d)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(d,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,l);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new Ah(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Ah{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tu(){return new kp([new y_])}let kp=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const d=c.factories.slice();l=l.concat(d)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||tu()),deps:[[s,new ca,new Fi]]}}find(l){const c=this.factories.find(d=>d.supports(l));if(null!=c)return c;throw new He(901,"")}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:tu}),s})();function Ge(){return new Er([new d0])}let Er=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const d=c.factories.slice();l=l.concat(d)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Ge()),deps:[[s,new ca,new Fi]]}}find(l){const c=this.factories.find(p=>p.supports(l));if(c)return c;throw new He(901,"")}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:Ge}),s})();const Xe=n0(null,"core",[{provide:bI,useValue:"unknown"},{provide:MI,deps:[ma]},{provide:AI,deps:[]},{provide:EI,deps:[]}]);let ye=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(it(Th))},s.\u0275mod=se({type:s}),s.\u0275inj=an({}),s})()},3942:(gt,Me,U)=>{"use strict";U.d(Me,{Z:()=>He});var m=U(2090),te=U(4859),V=U(9681),ce=U(1877);class oe{constructor(ve,Ae){this._delegate=ve,this.firebase=Ae,(0,V._addComponent)(ve,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ve,Ae=V._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(ve);return!et.isInitialized()&&"EXPLICIT"===(null===(rt=et.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Ae})}_removeServiceInstance(ve,Ae=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(Ae)}_addComponent(ve){(0,V._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,V._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const qe=function me(qe){const ve={},Ae={__esModule:!0,initializeApp:function Pe(Z,ae={}){const X=V.initializeApp(Z,ae);if((0,m.r3)(ve,X.name))return ve[X.name];const ue=new qe(X,Ae);return ve[X.name]=ue,ue},app:et,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Se(Z){const ae=Z.name,X=ae.replace("-compat","");if(V._registerComponent(Z)&&"PUBLIC"===Z.type){const ue=(he=et())=>{if("function"!=typeof he[X])throw de.create("invalid-app-argument",{appName:ae});return he[X]()};void 0!==Z.serviceProps&&(0,m.ZB)(ue,Z.serviceProps),Ae[X]=ue,qe.prototype[X]=function(...he){return this._getService.bind(this,ae).apply(this,Z.multipleInstances?he:[])}}return"PUBLIC"===Z.type?Ae[X]:null},removeApp:function rt(Z){delete ve[Z]},useAsService:function Ye(Z,ae){return"serverAuth"===ae?null:ae},modularAPIs:V}};function et(Z){if(!(0,m.r3)(ve,Z=Z||V._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Z});return ve[Z]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Te(){return Object.keys(ve).map(Z=>ve[Z])}}),et.App=qe,Ae}(oe);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function ve(Ae){(0,m.ZB)(qe,Ae)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),qe}(),K=new ce.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=z;!function Oe(qe){(0,V.registerVersion)("@firebase/app-compat","0.1.21",qe)}()},9681:(gt,Me,U)=>{"use strict";U.r(Me),U.d(Me,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>cr,_DEFAULT_ENTRY_NAME:()=>Pn,_addComponent:()=>fn,_addOrOverwriteComponent:()=>ur,_apps:()=>at,_clearComponents:()=>$t,_components:()=>tn,_getProvider:()=>Pr,_registerComponent:()=>Jt,_removeServiceInstance:()=>an,deleteApp:()=>bn,getApp:()=>kr,getApps:()=>Nr,initializeApp:()=>Hr,onLog:()=>dn,registerVersion:()=>$r,setLogLevel:()=>Vn});var m=U(5861),te=U(4859),V=U(1877),ce=U(2090);class oe{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function we(ke){const Ne=ke.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(nt)){const wt=nt.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(nt=>nt).join(" ")}}const de="@firebase/app",ge=new V.Yd("@firebase/app"),Pn="[DEFAULT]",dt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},at=new Map,tn=new Map;function fn(ke,Ne){try{ke.container.addComponent(Ne)}catch(nt){ge.debug(`Component ${Ne.name} failed to register with FirebaseApp ${ke.name}`,nt)}}function ur(ke,Ne){ke.container.addOrOverwriteComponent(Ne)}function Jt(ke){const Ne=ke.name;if(tn.has(Ne))return ge.debug(`There were multiple attempts to register component ${Ne}.`),!1;tn.set(Ne,ke);for(const nt of at.values())fn(nt,ke);return!0}function Pr(ke,Ne){const nt=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),ke.container.getProvider(Ne)}function an(ke,Ne,nt=Pn){Pr(ke,Ne).clearInstance(nt)}function $t(){tn.clear()}const jr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class xi{constructor(Ne,nt,wt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}const cr="9.6.10";function Hr(ke,Ne={}){"object"!=typeof Ne&&(Ne={name:Ne});const nt=Object.assign({name:Pn,automaticDataCollectionEnabled:!1},Ne),wt=nt.name;if("string"!=typeof wt||!wt)throw jr.create("bad-app-name",{appName:String(wt)});const Qt=at.get(wt);if(Qt){if((0,ce.vZ)(ke,Qt.options)&&(0,ce.vZ)(nt,Qt.config))return Qt;throw jr.create("duplicate-app",{appName:wt})}const Rt=new te.H0(wt);for(const G of tn.values())Rt.addComponent(G);const W=new xi(ke,nt,Rt);return at.set(wt,W),W}function kr(ke=Pn){const Ne=at.get(ke);if(!Ne)throw jr.create("no-app",{appName:ke});return Ne}function Nr(){return Array.from(at.values())}function bn(ke){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(ke){const Ne=ke.name;at.has(Ne)&&(at.delete(Ne),yield Promise.all(ke.container.getProviders().map(nt=>nt.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function $r(ke,Ne,nt){var wt;let Qt=null!==(wt=dt[ke])&&void 0!==wt?wt:ke;nt&&(Qt+=`-${nt}`);const Rt=Qt.match(/\s|\//),W=Ne.match(/\s|\//);if(Rt||W){const G=[`Unable to register library "${Qt}" with version "${Ne}":`];return Rt&&G.push(`library name "${Qt}" contains illegal characters (whitespace or "/")`),Rt&&W&&G.push("and"),W&&G.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void ge.warn(G.join(" "))}Jt(new te.wA(`${Qt}-version`,()=>({library:Qt,version:Ne}),"VERSION"))}function dn(ke,Ne){if(null!==ke&&"function"!=typeof ke)throw jr.create("invalid-log-argument");(0,V.Am)(ke,Ne)}function Vn(ke){(0,V.Ub)(ke)}const ft="firebase-heartbeat-store";let mn=null;function dr(){return mn||(mn=(0,ce.X3)("firebase-heartbeat-database",1,(ke,Ne)=>{0===Ne&&ke.createObjectStore(ft)}).catch(ke=>{throw jr.create("storage-open",{originalErrorMessage:ke.message})})),mn}function bt(){return(bt=(0,m.Z)(function*(ke){try{return(yield dr()).transaction(ft).objectStore(ft).get(jn(ke))}catch(Ne){throw jr.create("storage-get",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function Qe(ke,Ne){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(ke,Ne){try{const wt=(yield dr()).transaction(ft,"readwrite");return yield wt.objectStore(ft).put(Ne,jn(ke)),wt.complete}catch(nt){throw jr.create("storage-set",{originalErrorMessage:nt.message})}})).apply(this,arguments)}function jn(ke){return`${ke.name}!${ke.options.appId}`}class bs{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new vt(nt),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var Ne=this;return(0,m.Z)(function*(){const wt=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qt=hr();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Qt&&!Ne._heartbeatsCache.heartbeats.some(Rt=>Rt.date===Qt))return Ne._heartbeatsCache.heartbeats.push({date:Qt,agent:wt}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Rt=>{const W=new Date(Rt.date).valueOf();return Date.now()-W<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,m.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const nt=hr(),{heartbeatsToSend:wt,unsentEntries:Qt}=function Jn(ke,Ne=1024){const nt=[];let wt=ke.slice();for(const Qt of ke){const Rt=nt.find(W=>W.agent===Qt.agent);if(Rt){if(Rt.dates.push(Qt.date),fr(nt)>Ne){Rt.dates.pop();break}}else if(nt.push({agent:Qt.agent,dates:[Qt.date]}),fr(nt)>Ne){nt.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:nt,unsentEntries:wt}}(Ne._heartbeatsCache.heartbeats),Rt=(0,ce.L)(JSON.stringify({version:2,heartbeats:wt}));return Ne._heartbeatsCache.lastSentHeartbeatDate=nt,Qt.length>0?(Ne._heartbeatsCache.heartbeats=Qt,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Rt})()}}function hr(){return(new Date).toISOString().substring(0,10)}class vt{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,m.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function Mi(ke){return bt.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var nt=this;return(0,m.Z)(function*(){var wt;if(yield nt._canUseIndexedDBPromise){const Rt=yield nt.read();return Qe(nt.app,{lastSentHeartbeatDate:null!==(wt=Ne.lastSentHeartbeatDate)&&void 0!==wt?wt:Rt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var nt=this;return(0,m.Z)(function*(){var wt;if(yield nt._canUseIndexedDBPromise){const Rt=yield nt.read();return Qe(nt.app,{lastSentHeartbeatDate:null!==(wt=Ne.lastSentHeartbeatDate)&&void 0!==wt?wt:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...Ne.heartbeats]})}})()}}function fr(ke){return(0,ce.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function Zt(ke){Jt(new te.wA("platform-logger",Ne=>new oe(Ne),"PRIVATE")),Jt(new te.wA("heartbeat",Ne=>new bs(Ne),"PRIVATE")),$r(de,"0.7.20",ke),$r(de,"0.7.20","esm2017"),$r("fire-js","")}("")},4859:(gt,Me,U)=>{"use strict";U.d(Me,{H0:()=>me,wA:()=>V,zt:()=>oe});var m=U(5861),te=U(2090);class V{constructor(z,K,ie){this.name=z,this.instanceFactory=K,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ce="[DEFAULT]";class oe{constructor(z,K){this.name=z,this.container=K,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const K=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(K)){const ie=new te.BH;if(this.instancesDeferred.set(K,ie),this.isInitialized(K)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:K});Je&&ie.resolve(Je)}catch(Je){}}return this.instancesDeferred.get(K).promise}getImmediate(z){var K;const ie=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),Je=null!==(K=null==z?void 0:z.optional)&&void 0!==K&&K;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Oe){if(Je)return null;throw Oe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function de(ge){return"EAGER"===ge.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(K){}for(const[K,ie]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(K);try{const Oe=this.getOrInitializeService({instanceIdentifier:Je});ie.resolve(Oe)}catch(Oe){}}}}clearInstance(z=ce){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,m.Z)(function*(){const K=Array.from(z.instances.values());yield Promise.all([...K.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...K.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ce){return this.instances.has(z)}getOptions(z=ce){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:K={}}=z,ie=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:ie,options:K});for(const[Oe,He]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Oe)&&He.resolve(Je);return Je}onInit(z,K){var ie;const Je=this.normalizeInstanceIdentifier(K),Oe=null!==(ie=this.onInitCallbacks.get(Je))&&void 0!==ie?ie:new Set;Oe.add(z),this.onInitCallbacks.set(Je,Oe);const He=this.instances.get(Je);return He&&z(He,Je),()=>{Oe.delete(z)}}invokeOnInitCallbacks(z,K){const ie=this.onInitCallbacks.get(K);if(ie)for(const Je of ie)try{Je(z,K)}catch(Oe){}}getOrInitializeService({instanceIdentifier:z,options:K={}}){let ie=this.instances.get(z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===ce?void 0:ge),options:K}),this.instances.set(z,ie),this.instancesOptions.set(z,K),this.invokeOnInitCallbacks(ie,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ie)}catch(Je){}var ge;return ie||null}normalizeInstanceIdentifier(z=ce){return this.component?this.component.multipleInstances?z:ce:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const K=this.getProvider(z.name);if(K.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);K.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const K=new oe(z,this);return this.providers.set(z,K),K}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Me,U)=>{"use strict";U.d(Me,{Am:()=>ge,Ub:()=>me,Yd:()=>de,in:()=>te});const m=[];var te=(()=>{return(z=te||(te={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",te;var z})();const V={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ce=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},we=(z,K,...ie)=>{if(K<z.logLevel)return;const Je=(new Date).toISOString(),Oe=oe[K];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${K})`);console[Oe](`[${Je}]  ${z.name}:`,...ie)};class de{constructor(K){this.name=K,this._logLevel=ce,this._logHandler=we,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in te))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"==typeof K?V[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!=typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(...K){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...K),this._logHandler(this,te.DEBUG,...K)}log(...K){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...K),this._logHandler(this,te.VERBOSE,...K)}info(...K){this._userLogHandler&&this._userLogHandler(this,te.INFO,...K),this._logHandler(this,te.INFO,...K)}warn(...K){this._userLogHandler&&this._userLogHandler(this,te.WARN,...K),this._logHandler(this,te.WARN,...K)}error(...K){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...K),this._logHandler(this,te.ERROR,...K)}}function me(z){m.forEach(K=>{K.setLogLevel(z)})}function ge(z,K){for(const ie of m){let Je=null;K&&K.level&&(Je=V[K.level]),ie.userLogHandler=null===z?null:(Oe,He,...qe)=>{const ve=qe.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(rt){return null}}).filter(Ae=>Ae).join(" ");He>=(null!=Je?Je:Oe.logLevel)&&z({level:te[He].toLowerCase(),message:ve,args:qe,type:Oe.name})}}}},5861:(gt,Me,U)=>{"use strict";function m(V,ce,oe,we,de,me,ge){try{var z=V[me](ge),K=z.value}catch(ie){return void oe(ie)}z.done?ce(K):Promise.resolve(K).then(we,de)}function te(V){return function(){var ce=this,oe=arguments;return new Promise(function(we,de){var me=V.apply(ce,oe);function ge(K){m(me,we,de,ge,z,"next",K)}function z(K){m(me,we,de,ge,z,"throw",K)}ge(void 0)})}}U.d(Me,{Z:()=>te})}},gt=>{gt(gt.s=1904)}]);